"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5415],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>c});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var p=n.createContext({}),k=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},m=function(e){var t=k(e.components);return n.createElement(p.Provider,{value:t},e.children)},s="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,i=e.originalType,p=e.parentName,m=r(e,["components","mdxType","originalType","parentName"]),s=k(a),d=l,c=s["".concat(p,".").concat(d)]||s[d]||u[d]||i;return a?n.createElement(c,o(o({ref:t},m),{},{components:a})):n.createElement(c,o({ref:t},m))}));function c(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=a.length,o=new Array(i);o[0]=d;var r={};for(var p in t)hasOwnProperty.call(t,p)&&(r[p]=t[p]);r.originalType=e,r[s]="string"==typeof e?e:l,o[1]=r;for(var k=2;k<i;k++)o[k]=a[k];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},1184:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>s,frontMatter:()=>i,metadata:()=>r,toc:()=>k});var n=a(7462),l=(a(7294),a(3905));const i={sidebar_position:5},o="MySQL \u9ad8\u7ea7\u7b2c\u4e94\u7bc7",r={unversionedId:"MySql/advanced/mysql-advance-5",id:"MySql/advanced/mysql-advance-5",title:"MySQL \u9ad8\u7ea7\u7b2c\u4e94\u7bc7",description:"\u4e00\u3001\u4e8b\u52a1\u673a\u5236",source:"@site/docs/MySql/advanced/mysql-advance-5.md",sourceDirName:"MySql/advanced",slug:"/MySql/advanced/mysql-advance-5",permalink:"/docs/MySql/advanced/mysql-advance-5",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"MySQL \u9ad8\u7ea7\u7b2c\u56db\u7bc7",permalink:"/docs/MySql/advanced/mysql-advance-4"},next:{title:"MySQL \u9ad8\u7ea7\u7b2c\u516d\u7bc7",permalink:"/docs/MySql/advanced/mysql-advance-6"}},p={},k=[{value:"\u4e00\u3001\u4e8b\u52a1\u673a\u5236",id:"\u4e00\u4e8b\u52a1\u673a\u5236",level:2},{value:"1.\u6570\u636e\u5e93\u4e8b\u52a1",id:"1\u6570\u636e\u5e93\u4e8b\u52a1",level:3},{value:"2.\u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b",id:"2\u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b",level:3},{value:"\u4e8c\u3001\u4e8b\u52a1\u65e5\u5fd7",id:"\u4e8c\u4e8b\u52a1\u65e5\u5fd7",level:2},{value:"1.redo log",id:"1redo-log",level:3},{value:"2.undo log",id:"2undo-log",level:3}],m={toc:k};function s(e){let{components:t,...i}=e;return(0,l.kt)("wrapper",(0,n.Z)({},m,i,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"mysql-\u9ad8\u7ea7\u7b2c\u4e94\u7bc7"},"MySQL \u9ad8\u7ea7\u7b2c\u4e94\u7bc7"),(0,l.kt)("h2",{id:"\u4e00\u4e8b\u52a1\u673a\u5236"},"\u4e00\u3001\u4e8b\u52a1\u673a\u5236"),(0,l.kt)("h3",{id:"1\u6570\u636e\u5e93\u4e8b\u52a1"},"1.\u6570\u636e\u5e93\u4e8b\u52a1"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u4e8b\u52a1: ",(0,l.kt)("inlineCode",{parentName:"p"},"\u4e00\u7ec4\u903b\u8f91\u64cd\u4f5c\u5355\u5143"),"\uff0c\u4f7f\u6570\u636e\u4ece\u4e00\u79cd\u72b6\u6001\u53d8\u6362\u5230\u53e6\u4e00\u79cd\u72b6\u6001\u3002")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u4e8b\u52a1",(0,l.kt)("inlineCode",{parentName:"p"},"\u5904\u7406\u7684\u539f\u5219"),":\n\u4fdd\u8bc1\u6240\u6709\u4e8b\u52a1\u90fd\u4f5c\u4e3a\u4e00\u4e2a\u5de5\u4f5c\u5355\u5143\u6765\u6267\u884c\uff0c\u5373\u4f7f\u51fa\u73b0\u4e86\u6545\u969c\uff0c\u90fd\u4e0d\u80fd\u6539\u53d8\u8fd9\u79cd\u6267\u884c\u65b9\u5f0f\u3002\u5f53\u5728\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u6267\u884c\u591a\u4e2a\u64cd\u4f5c\u65f6\uff0c\u8981\u4e48\u6240\u6709\u7684\u4e8b\u52a1\u90fd",(0,l.kt)("inlineCode",{parentName:"p"},"\u88ab\u63d0\u4ea4(commit)"),",\u90a3\u4e48\u8fd9\u4e9b\u4fee\u6539\u5c31\u6c38\u4e45\u5730\u4fdd\u5b58\u4e0b\u6765;\u8981\u4e48\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u5c06\u653e\u5f03\u6240\u4f5c\u7684\u6240\u6709\u4fee\u6539\uff0c\u6574\u4e2a\u4e8b\u52a1",(0,l.kt)("inlineCode",{parentName:"p"},"\u56de\u6eda(rollback)"),"\u5230\u6700\u521d\u72b6\u6001\u3002")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u4e8b\u52a1\u7684ACID\u7279\u6027"),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u539f\u5b50\u6027"),"(atomicity) : \u539f\u5b50\u6027\u662f\u6307\u4e8b\u52a1\u662f\u4e00\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\uff0c\u8981\u4e48\u5168\u90e8\u63d0\u4ea4\uff0c\u8981\u4e48\u5168\u90e8\u5931\u8d25\u56de\u6eda\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u4e00\u81f4\u6027"),"(consistency):\u6839\u636e\u5b9a\u4e49\uff0c\u4e00\u81f4\u6027\u662f\u6307\u4e8b\u52a1\u6267\u884c\u524d\u540e\uff0c\u6570\u636e\u4ece\u4e00\u4e2a\u5408\u6cd5\u6027\u72b6\u6001\u53d8\u6362\u5230\u53e6\u5916\u4e00\u4e2a\u5408\u6cd5\u6027\u72b6\u6001\u3002\u8fd9\u79cd\u72b6\u6001\u662f\u8bed\u4e49\u4e0a\u7684\u800c\u4e0d\u662f\u8bed\u6cd5\u4e0a\u7684\uff0c\u8ddf\u5177\u4f53\u7684\u4e1a\u52a1\u6709\u5173\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u9694\u79bb\u578b"),"(isolation) :\u4e8b\u52a1\u7684\u9694\u79bb\u6027\u662f\u6307\u4e00\u4e2a\u4e8b\u52a1\u7684\u6267\u884c\u4e0d\u80fd\u88ab\u5176\u4ed6\u4e8b\u52a1\u5e72\u6270\uff0c\u5373\u4e00\u4e2a\u4e8b\u52a1\u5185\u90e8\u7684\u64cd\u4f5c\u53ca\u4f7f\u7528\u7684\u6570\u636e\u5bf9\u5f00\u53d1\u7684\u5176\u4ed6\u4e8b\u52a1\u662f\u9694\u79bb\u7684\uff0c\u5e76\u53d1\u6267\u884c\u7684\u5404\u4e2a\u4e8b\u52a1\u4e4b\u95f4\u4e0d\u80fd\u4e92\u76f8\u5e72\u6270\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u6301\u4e45\u6027"),"(durability) :\u6301\u4e45\u6027\u662f\u6307\u4e00\u4e2a\u4e8b\u52a1\u4e00\u65e6\u88ab\u63d0\u4ea4\uff0c\u5b83\u5bf9\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u6539\u53d8\u5c31\u662f\u6c38\u4e45\u6027\u7684\uff0c\u63a5\u4e0b\u6765\u7684\u5176\u4ed6\u64cd\u4f5c\u548c\u6570\u636e\u5e93\u6545\u969c\u4e0d\u5e94\u8be5\u5bf9\u5176\u6709\u4efb\u4f55\u5f71\u54cd\u3002"))),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("p",{parentName:"blockquote"},"ACID\u662f\u4e8b\u52a1\u7684\u56db\u5927\u7279\u6027\uff0c\u5728\u8fd9\u56db\u4e2a\u7279\u6027\u4e2d\uff0c\u539f\u5b50\u6027\u662f\u57fa\u7840\uff0c\u9694\u79bb\u6027\u662f\u624b\u6bb5\uff0c\u4e00\u81f4\u6027\u662f\u7ea6\u675f\u6761\u4ef6\uff0c\u800c\u6301\u4e45\u6027\u662f\u6211\u4eec\u7684\u76ee\u7684\u3002")),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("p",{parentName:"blockquote"},"\u6570\u636e\u5e93\u4e8b\u52a1\uff0c\u5176\u5b9e\u5c31\u662f\u6570\u636e\u5e93\u8bbe\u8ba1\u8005\u4e3a\u4e86\u65b9\u4fbf\u8d77\u89c1\uff0c\u628a\u9700\u8981\u4fdd\u8bc1\u539f\u4e86\u6027\u3001\u8d2d\u79bb\u6027\u3001\u4e00\u81f4\u6027\u548c\u6301\u4e45\u6027\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u79f0\u4e3a\u4e00\u4e2a\u4e8b\u52a1\u3002")))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e8b\u52a1\u7684\u72b6\u6001",(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u6d3b\u52a8\u7684"),"(active)\uff1a\u4e8b\u52a1\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u64cd\u4f5c\u6b63\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u65f6\uff0c\u6211\u4eec\u5c31\u8bf4\u8be5\u4e8b\u52a1\u5904\u5728\u6d3b\u52a8\u7684\u72b6\u6001\u3002 "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u90e8\u5206\u63d0\u4ea4\u7684"),"(partially committed) \uff1a\u5f53\u4e8b\u52a1\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u64cd\u4f5c\u6267\u884c\u5b8c\u6210\uff0c\u4f46\u7531\u4e8e\u64cd\u4f5c\u90fd\u5728\u5185\u5b58\u4e2d\u6267\u884c\uff0c\u6240\u9020\u6210\u7684\u5f71\u54cd\u5e76\u6ca1\u6709\u5229\u65b0\u5230\u611f\u76d8\u65f6\uff0c\u6211\u4eec\u5c31\u8bf4\u8be5\u4e8b\u52a1\u5904\u5728\u90e8\u5206\u63d0\u4ea4\u7684\u72b6\u6001\u3002 "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u5931\u8d25\u7684"),"(failed)\uff1a\u5f53\u4e8b\u52a1\u5904\u5728\u6d3b\u52a8\u7684\u6216\u8005\u90e8\u5206\u63d0\u4ea4\u7684\u72b6\u6001\u65f6\uff0c\u53ef\u80fd\u9047\u5230\u4e86\u67d0\u4e9b\u9519\u8bef(\u6570\u636e\u5e93\u81ea\u8eab\u7684\u9519\u8bef\u3001\u64cd\u4f5c\u7cfb\u7edf\u9519\u8bef\u6216\u8005\u76f4\u63a5\u65ad\u7535\u7b49)\u800c\u65e0\u6cd5\u7ee7\u7eed\u6267\u884c\uff0c\u6216\u8005\u4eba\u4e3a\u7684\u505c\u6b62\u5f53\u524d\u4e8b\u52a1\u7684\u6267\u884c\uff0c\u6211\u4eec\u5c31\u8bf4\u8be5\u4e8b\u52a1\u5904\u5728\u5931\u8d25\u7684\u72b6\u6001\u3002 "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u4e2d\u6b62\u7684"),"(aborted)\uff1a\u5982\u679c\u4e8b\u52a1\u6267\u884c\u4e86\u4e00\u90e8\u5206\u800c\u53d8\u4e3a\u5931\u8d25\u7684\u72b6\u6001\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u628a\u5df2\u7ecf\u4fee\u6539\u7684\u4e8b\u52a1\u4e2d\u7684\u64cd\u4f5c\u8fd8\u539f\u5230\u4e8b\u52a1\u6267\u884c\u524d\u7684\u72b6\u6001\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5c31\u662f\u8981\u64a4\u9500\u5931\u8d25\u4e8b\u52a1\u5bf9\u5f53\u524d\u6570\u636e\u5e93\u9020\u6210\u7684\u5f71\u54cd\u3002\u6211\u4eec\u628a\u8fd9\u4e2a\u64a4\u9500\u7684\u8fc7\u7a0b\u79f0\u4e4b\u4e3a\u56de\u6eda\u3002\u5f53\u56de\u6eda\u7684\u64cd\u4f5c\u6267\u884c\u5b8c\u6bd5\u65f6\uff0c\u4e5f\u5c31\u662f\u6570\u636e\u5e93\u6062\u590d\u5230\u4e86\u6267\u884c\u4e8b\u52a1\u4e4b\u524d\u7684\u72b6\u6001\uff0c\u6211\u4eec\u5c31\u8bf4\u8be5\u4e8b\u52a1\u5904\u5728\u4e86\u4e2d\u6b62\u7684\u72b6\u6001\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u63d0\u4ea4\u7684"),"(comitted)\uff1a\u5f53\u4e00\u4e2a\u5904\u5728\u90e8\u5206\u63d0\u4ea4\u7684\u72b6\u6001\u7684\u4e8b\u52a1\u5c06\u4fee\u6539\u8fc7\u7684\u6570\u636e\u90fd\u540c\u6b65\u5230\u78c1\u76d8\u4e0a\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8bf4\u8be5\u4e8b\u52a1\u5904\u5728\u4e86\u63d0\u4ea4\u7684\u72b6\u6001\u3002"))))),(0,l.kt)("h3",{id:"2\u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b"},"2.\u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u6570\u636e\u7684\u5e76\u53d1\u95ee\u9898"),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("ol",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"\u810f\u5199(Dirty Write)")," \uff1a\u5bf9\u4e8e\u4e24\u4e2a\u4e8b\u52a1Session A\u3001Session B,\u5982\u679c\u4e8b\u52a1Session A\u4fee\u6539\u4e86\u53e6\u4e00\u4e2a\u672a\u63d0\u4ea4\u4e8b\u52a1Session B\u4fee\u6539\u8fc7\u7684\u6570\u636e\uff0c\u90a3\u5c31\u610f\u5473\u7740\u53d1\u751f\u4e86\u810f\u5199,\u793a\u610f\u56fe\u5982\u4e0b:"))),(0,l.kt)("p",{parentName:"li"},"  ",(0,l.kt)("img",{alt:"dirty_write",src:a(1868).Z,width:"621",height:"313"})),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("ol",{parentName:"blockquote",start:2},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"\u810f\u8bfb(Dirty Read)")," \uff1a\u5bf9\u4e8e\u4e24\u4e2a\u4e8b\u52a1Session A\u3001Session B\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"Session A\u8bfb\u53d6\u4e86\u5df2\u7ecf\u88abSessionB\u66f4\u65b0\u4f46\u8fd8\u6ca1\u6709\u88ab\u63d0\u6587\u7684\u5b57\u6bb5\u3002"),"\u4e4b\u540e\u82e5Session B\u56de\u6eda\uff0cSession A\u8bfb\u6536\u7684\u5185\u5bb9\u5c31\u662f\u4e34\u65f6\u4e14\u65e0\u6548\u7684\u3002"))),(0,l.kt)("p",{parentName:"li"}," ",(0,l.kt)("img",{alt:"dirty_read",src:a(8201).Z,width:"604",height:"320"})),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("ol",{parentName:"blockquote",start:3},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"\u4e0d\u53ef\u91cd\u590d\u8bfb( Non-Repeatable Read )"),"\uff1a\u5bf9\u4e8e\u4e24\u4e2a\u4e8b\u52a1Session A\u3001Session B, Session A \u8bfb\u53d6\u4e86\u4e00\u4e2a\u5b57\u6bb5\uff0c\u7136\u540eSession B\u66f4\u65b0\u4e86\u8be5\u5b57\u6bb5\u3002\u4e4b\u540eSession A\u518d\u6b21\u8bfb\u53d6\u540c\u4e00\u4e2a\u5b57\u6bb5\uff0c\u503c\u5c31\u4e0d\u540c\u4e86\u3002\u90a3\u5c31\u610f\u5473\u7740\u53d1\u751f\u4e86\u4e0d\u53ef\u91cd\u590d\u8bfb\uff0c\u56e0\u4e3a\u6211\u4eec\u5728Session A\u9700\u8981\u8bfb\u53d6\u540c\u4e00\u4e2a\u503c\uff0c\u800c\u4e0d\u5e94\u8bfb\u53d6Session B\u66f4\u65b0\u540e\u7684\u503c\u3002\n\u4f8b\uff1a",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4e8b\u52a1\u4e00\u4e2d\u5148\u8bfb\u53d6 a=100\uff0cb=50\uff0c\u6c42\u548c=150\uff0c\u4e8b\u52a1\u4e00\u8fd8\u672a\u63d0\u4ea4\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u7136\u540e\u4e8b\u52a1\u4e8c\u4fee\u6539a=50\uff0c\u5e76\u4e14\u63d0\u4ea4\u4e8b\u52a1\u4e8c\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u8fd9\u662f\u4e8b\u52a1\u4e00\u5728\u6b21\u8bfb\u53d6a=50\uff08\u6b64\u65f6a=50\uff0c\u800c\u4e0d\u662f\u521a\u8fdb\u4e8b\u52a1\u4e00\u65f6\u7684a=100\u4e86\uff09\uff0cc=50\uff0c\u6c42\u548c=100\u3002\u8fd9\u91cc\u5c31\u53d1\u751f\u4e86a\u4e0d\u53ef\u91cd\u590d\u8bfb\uff0c\u56e0\u4e3a\u4e8b\u52a1\u4e00\u8981\u5b8c\u6210\u7684\u662fa+c=150\uff0c\u800c\u4e0d\u662f100\uff0c\u8981\u8bfb\u53d6\u7684a\u4e0d\u662f\u4fee\u6539\u540e\u7684a\u3002"))))),(0,l.kt)("p",{parentName:"li"},"  ",(0,l.kt)("img",{alt:"non_repeatable_read",src:a(6570).Z,width:"1168",height:"796"})),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("ol",{parentName:"blockquote",start:4},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"\u5e7b\u8bfb(Phantom)"),"\uff1a\u5bf9\u4e8e\u4e24\u4e2a\u4e8b\u52a1Session A. Session B, Session A\u4ece\u4e00\u4e2a\u8868\u4e2d\u8bfb\u53d6\u4e86\u4e00\u4e2a\u5b57\u6bb5\uff0c\u7136\u540eSession B\u5728\u8be5\u8868\u4e2d",(0,l.kt)("inlineCode",{parentName:"li"},"\u63d2\u5165\u4e86\u4e00\u4e9b\u65b0\u7684\u884c"),"\u3002\u4e4b\u540e\uff0c \u5982\u679cSession A\u518d\u6b21\u8bfb\u53d6\u540c\u4e00\u4e2a\u8868\u5c31\u4f1a\u591a\u51fa\u51e0\u884c\u3002\u90a3\u5c31\u610f\u5473\u82e5\u53d1\u751f\u4e86\u5e7b\u8bfb\u3002"))),(0,l.kt)("p",{parentName:"li"},"  ",(0,l.kt)("img",{alt:"phantom",src:a(6841).Z,width:"1276",height:"595"})),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"\u6ce8\u610f1:\n\u5982\u679cSession B\u4e2d\u5220\u9664\u4e86\u4e00\u4e9b\u7b26\u5408studentno > 0 \u7684\u8bb0\u5f55\u800c\u4e0d\u662f\u63d2\u5165\u65b0\u8bb0\u5f55\uff0c\u90a3Session A\u4e4b\u540e\u518d\u6839\u636estudentno>0 \u7684\u6761\u4ef6\u8bfb\u53d6\u7684\u8bb0\u5f55\u53d8\u5c11\u4e86\uff0c\u8fd9\u79cd\u73b0\u8c61\u7b97\u4e0d\u7b97\u5e7b\u8bfb\u5462?\n\u8fd9\u79cd\u73b0\u8c61\u4e0d\u5c5e\u4e8e\u5e7b\u8bfb,",(0,l.kt)("inlineCode",{parentName:"li"},"\u5e7b\u8bfb\u5f3a\u8c03\u7684\u662f\u4e00\u4e2a\u4e8b\u52a1\u6309\u7167\u67d0\u4e2a\u76f8\u540c\u6761\u4ef6\u591a\u6b21\u8bfb\u53d6\u8bb0\u5f55\u65f6\uff0c\u540e\u8bfb\u53d6\u65f6\u8bfb\u5230\u4e86\u4e4b\u524d\u6ca1\u6709\u8bfb\u5230\u7684\u8bb0\u5f55"),"\u3002 "),(0,l.kt)("li",{parentName:"ul"},"\u6ce8\u610f2:\n\u5bf9\u4e8e\u5148\u524d\u5df2\u7ecf\u8bfb\u5230\u7684\u8bb0\u5f55\uff0c\u4e4b\u540e\u53c8\u8bfb\u53d6\u4e0d\u5230\u8fd9\u79cd\u60c5\u51b5\uff0c\u7b97\u5565\u5462?\n\u8fd9\u76f8\u5f53\u4e8e\u5bf9\u6bcf\u4e00\u6761\u8bb0\u5f55\u90fd\u53d1\u751f\u4e86\u4e0d\u53ef\u91cd\u590d\u8bfb\u7684\u73b0\u8c61\u3002\u5e7b\u8bfb\u53ea\u662f\u66f4\u70b9\u5f3a\u8c03\u4e86\u8bfb\u53d6\u5230\u4e86\u4e4b\u524d\u8bfb\u53d6\u6ca1\u6709\u83b7\u53d6\u5230\u7684\u8bb0\u5f55\u3002")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"SQL \u6807\u51c6\u7684\u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b"),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("p",{parentName:"blockquote"},"\u6211\u4eec\u613f\u610f\u820d\u5f03\u4e00\u90e8\u5206\u9694\u79bb\u6027\u6765\u6362\u53d6\u4e00\u90e8\u5206\u6027\u80fd\u5c31\u4f53\u73b0\u5728:\u8bbe\u7acb\u4e00\u4e9b\u9694\u79bb\u7ea7\u522b\uff0c\u9694\u79bb\u7ea7\u522b\u8d8a\u4f4e\uff0c\u5e76\u53d1\u95ee\u9898\u53d1\u751f\u7684\u5c31\u8d8a\u591a\u3002\nSQL\u6807\u51c6\u4e2d\u8bbe\u7acb\u4e864\u4e2a\u9694\u79bb\u7ea7\u522b: "),(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"READ UNCOMMITTED"),": \u8bfb\u672a\u63d0\u4ea4\uff0c\u5728\u8be5\u9694\u79bb\u7ea7\u522b\uff0c\u6240\u6709\u4e8b\u52a1\u90fd\u53ef\u4ee5\u770b\u5230\u5176\u4ed6\u672a\u63d0\u4ea4\u4e8b\u52a1\u7684\u6267\u884c\u7ed3\u679c\u3002",(0,l.kt)("inlineCode",{parentName:"li"},"\u4e0d\u80fd\u907f\u514d\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb"),"\u3002 "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"READ COMMITTED"),": \u8bfb\u5df2\u63d0\u4ea4\uff0c\u5b83\u6ee1\u8db3\u4e86\u9694\u79bb\u7684\u7b80\u5355\u5b9a\u4e49: \u4e00\u4e2a\u4e8b\u52a1\u53ea\u80fd\u770b\u89c1\u7ecf\u63d0\u4ea4\u4e8b\u52a1\u6240\u505a\u7684\u6539\u53d8\u3002\u8fd9\u662f\u5927\u591a\u6570\u6570\u636e\u5e93\u7cfb\u7edf\u7684\u9ed8\u8ba4\u9694\u79bb\u7ea7\u522b(\u4f46\u4e0d\u662fMySQL\u9ed8\u8ba4\u7684)\u3002",(0,l.kt)("inlineCode",{parentName:"li"},"\u53ef\u4ee5\u907f\u514d\u810f\u8bfb\uff0c\u4f46\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb\u95ee\u9898\u4ecd\u7136\u5b58\u5728\u3002")," "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"REPEATABLE READ"),": \u53ef\u91cd\u590d\u8bfb\uff0c\u4e8b\u52a1A\u5728\u8bfb\u5230\u4e00\u6761\u6570\u636e\u4e4b\u540e\uff0c\u6b64\u65f6\u4e8b\u52a1B\u5bf9\u8be5\u6570\u636e\u8fdb\u884c\u4e86\u4fee\u6539\u5e76\u63d0\u4ea4\uff0c\u90a3\u4e48\u4e8b\u52a1A\u518d\u8bfb\u8be5\u6570\u636e\uff0c\u8bfb\u5230\u7684\u8fd8\u662f\u539f\u6765\u7684\u5185\u5bb9\u3002",(0,l.kt)("inlineCode",{parentName:"li"},"\u53ef\u4ee5\u907f\u514d\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\uff0c\u4f46\u5e7b\u8bfb\u95ee\u9898\u4ecd\u7136\u5b58\u5728"),"\u3002\u8fd9\u662fMySQL\u7684 \u9ed8\u8ba4\u9694\u79bb\u7ea7\u522b\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"SERIALIZABLE"),":\u53ef\u4e32\u884c\u5316\uff0c\u786e\u4fdd\u4e8b\u52a1\u53ef\u4ee5\u4ece\u4e00\u4e2a\u8868\u4e2d\u8bfb\u53d6\u76f8\u540c\u7684\u884c\u3002\u5728\u8fd9\u4e2a\u4e8b\u52a1\u6301\u7eed\u671f\u95f4\uff0c\u7981\u6b62\u5176\u4ed6\u4e8b\u52a1\u5bf9\u8be5\u8868\u6267\u884c\u63d2\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u64cd\u4f5c\u3002",(0,l.kt)("inlineCode",{parentName:"li"},"\u6240\u6709\u7684\u5e76\u53d1\u95ee\u9898\u90fd\u53ef\u4ee5\u907f\u514d\uff0c\u4f46\u6027\u80fd\u5341\u5206\u4f4e\u4e0b\u3002\u80fd\u907f\u514d\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u548c\u5e7b\u8bfb\u3002")))),(0,l.kt)("p",{parentName:"li"},"  ",(0,l.kt)("img",{alt:"isolation",src:a(3701).Z,width:"472",height:"296"}))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"MySQL\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b"),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("p",{parentName:"blockquote"},"MySQL\u652f\u6301\u4e0a\u9762\u56db\u79cd\u9694\u79bb\u7ea7\u522b"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u67e5\u770b\u9694\u79bb\u7ea7\u522b"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"#5.7.20\u7248\u672c\u524d\u67e5\u770b\nshow variables like 'tx_isolation';\n#\u6216\nSELECT @@tx_isolation; \n\n#5.7.20\u7248\u672c\u540e\u67e5\u770b\nshow variables like 'transaction_isolation';\n#\u6216\nSELECT @@transaction_isolation;\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u8bbe\u7f6e\u9694\u79bb\u7ea7\u522b"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"#\u5185\u5b58\u7ea7\u522b\u7684\u8bbe\u7f6e\uff0c\u91cd\u542f\u670d\u52a1\u540e\u5931\u6548 \n# SET [GLOBAL|SESSION] TRANSACTION ISOLATION LEVEL \u9694\u79bb\u7ea7\u522b; \n#\u4f8b\uff1a\nSET TRANSACTION ISOLATION LEVEL READ COMMITTED; \n\n#\u6216\uff1aSET [GLOBAL|SESSION] TRANSACTION_ISOLATION =' \u9694\u79bb\u7ea7\u522b ';\n#\u4f8b\uff1a\nSET TRANSACTION_ISOLATION ='READ-COMMITTED';\n")))),(0,l.kt)("h2",{id:"\u4e8c\u4e8b\u52a1\u65e5\u5fd7"},"\u4e8c\u3001\u4e8b\u52a1\u65e5\u5fd7"),(0,l.kt)("blockquote",null,(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"\u4e8b\u52a1\u7684\u9694\u79bb\u6027\u7531\u9501\u673a\u5236\u5b9e\u73b0\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u800c\u4e8b\u52a1\u7684\u539f\u5b50\u6027\u3001\u4e00\u81f4\u6027\u548c\u6301\u4e45\u6027\u7531\u4e8b\u52a1\u7684redo\u65e5\u5fd7\u548cundo\u65e5\u5fd7\u6765\u4fdd\u8bc1\u3002\nREDOLOG\u79f0\u4e3a\u91cd\u505a\u65e5\u5fd7,\u63d0\u4f9b\u518d\u5199\u5165\u64cd\u4f5c\uff0c\u6062\u590d\u63d0\u4ea4\u4e8b\u52a1\u4fee\u6539\u7684\u9875\u64cd\u4f5c\uff0c\u7528\u6765\u4fdd\u8bc1\u4e8b\u52a1\u7684\u6301\u4e45\u6027\u3002\nUNDOLOG\u79f0\u4e3a\u56de\u6eda\u65e5\u5fd7\uff0c\u56de\u6eda\u884c\u8bb0\u5f55\u5230\u67d0\u4e2a\u7279\u5b9a\u7248\u672c\uff0c\u7528\u6765\u4fdd\u8bc1\u4e8b\u52a1\u7684\u539f\u5b50\u6027\u3001\u4e00\u81f4\u6027\u3002"))),(0,l.kt)("blockquote",null,(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"redo log"),': \u662f\u5b58\u50a8\u5f15\u64ce\u5c42(innodb)\u751f\u6210\u7684\u65e5\u5fd7\uff0c\u8bb0\u5f55\u7684\u662f"',(0,l.kt)("inlineCode",{parentName:"li"},"\u7269\u7406\u7ea7\u522b"),"\u201d\u4e0a\u7684\u9875\u4fee\u6539\u64cd\u4f5c\uff0c\u6bd4\u5982\u9875\u53f7xxx\u3001 \u504f\u79fb\u91cfyy\u5199\u5165\u4e86'xxx'\u6570\u636e\u3002\u4e3b\u8981\u4e3a\u4e86\u4fdd\u8bc1\u6570\u636e\u7684\u53ef\u9760\u6027; "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"undo log"),": \u662f\u5b58\u50a8\u5f15\u64ce\u5c42(innodb)\u751f\u6210\u7684\u65e5\u5fd7\uff0c\u8bb0\u5f55\u7684\u662f",(0,l.kt)("inlineCode",{parentName:"li"},"\u903b\u8f91\u64cd\u4f5c"),"\u65e5\u5fd7\uff0c\u6bd4\u5982\u5bf9\u67d0\u4e00\u884c\u6570\u636e\u8fdb\u884c\u4e86INSERT\u8bed\u53e5\u64cd\u4f5c\uff0c\u90a3\u4e48undo log\u5c31\u8bb0\u5f55\u4e00\u6761\u4e0e\u4e4b\u76f8\u53cd\u7684DELETE\u64cd\u4f5c\u3002\n\u4e3b\u8981\u7528\u4e8e",(0,l.kt)("inlineCode",{parentName:"li"},"\u4e8b\u52a1\u7684\u56de\u6eda"),"(undo log\u8bb0\u5f55\u7684\u662f\u6bcf\u4e2a\u4fee\u6539\u64cd\u4f5c\u7684\u9006\u64cd\u4f5c)\u548c",(0,l.kt)("inlineCode",{parentName:"li"},"\u4e00\u81f4\u6027\u975e\u9501\u5b9a\u8bfb"),"(undo log\u56de\u6eda\u884c\u8bb0\u5f55\u5230\u67d0\u79cd\u7279\u5b9a\u7684\u7248\u672c\u2014\u2014MVCC.\u5373\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236)\u3002"))),(0,l.kt)("h3",{id:"1redo-log"},"1.redo log"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"REDO\u65e5\u5fd7\u7684\u597d\u5904\u3001\u7279\u70b9",(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("ol",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ol"},"\u597d\u5904 ",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"redo\u65e5\u5fd7\u964d\u4f4e\u4e86\u5237\u76d8\u9891\u7387 "),(0,l.kt)("li",{parentName:"ul"},"redo\u65e5\u5fd7\u5360\u7528\u7684\u7a7a\u95f4\u975e\u5e38\u5c0f\n\u5b58\u50a8\u8868\u7a7a\u95f4ID\u3001\u9875\u53f7\u3001\u504f\u79fb\u91cf\u4ee5\u53ca\u9700\u8981\u66f4\u65b0\u7684\u503c\uff0c\u6240\u9700\u7684\u5b58\u50a8\u7a7a\u95f4\u662f\u5f88\u5c0f\u7684\uff0c\u5237\u76d8\u5feb\u3002"))),(0,l.kt)("li",{parentName:"ol"},"\u7279\u70b9 ",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"redo\u65e5\u5fd7\u662f\u987a\u5e8f\u5199\u5165\u78c1\u76d8\u7684\n\u5728\u6267\u884c\u4e8b\u52a1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6bcf\u6267\u884c\u4e00\u6761\u8bed\u53e5\uff0c \u5c31\u53ef\u80fd\u4ea7\u751f\u82e5\u5e72\u6761redo\u65e5\u5fd7\uff0c\u8fd9\u4e9b\u65e5\u5fd7\u662f\u6309\u7167\u4ea7\u751f\u7684\u987a\u5e8f\u5199\u5165\u78c1\u76d8\u7684, \u4e5f\u5c31\u662f\u4f7f\u7528\u987a\u5e8fI0,\u6548\u7387\u6bd4\u968f\u673aI0\u5feb\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0credo log\u4e0d\u65ad\u8bb0\u5f55\nredo log\u8ddfbin log\u7684\u533a\u522b\uff0credo log\u662f\u5b58\u50a8\u5f15\u64ce\u5c42\u4ea7\u751f\u7684\uff0c\u800cbin log\u662f\u6570\u636e\u5e93\u5c42\u4ea7\u751f\u7684\u3002\u5047\u8bbe\u4e00\u4e2a\u4e8b\u52a1\uff0c\u5bf9\u8868\u505a10\u4e07\u884c\u7684\u8bb0\u5f55\u63d2\u5165\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u76f4\u4e0d\u65ad\u7684\u5f80redo log\u987a\u5e8f\u8bb0\u5f55,\u800cbin log\u4e0d\u4f1a\u8bb0\u5f55\uff0c\u76f4\u5230\u8fd9\u4e2a\u4e8b\u52a1\u63d0\u4ea4\uff0c\u624d\u4f1a\u4e00\u6b21\u5199\u5165\u5230bin log\u6587\u4ef6\u4e2d\u3002 "))))))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"redo log\u7684\u7ec4\u6210"),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u91cd\u505a\u65e5\u5fd7\u7684\u7f13\u51b2(redo log buffer)"),"\u3002\u4fdd\u5b58\u5728\u5185\u5b58\u4e2d\uff0c\u662f\u6613\u5931\u7684\u3002",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5728\u670d\u52a1\u5668\u542f\u52a8\u65f6\u5c31\u5411\u64cd\u4f5c\u7cfb\u7edf\u7533\u8bf7\u4e86\u4e00\u5927\u7247\u79f0\u4e4b\u4e3a redo log buffer \u7684\u8fde\u7eed\u5185\u5b58\u7a7a\u95f4\uff0c\u7ffb\u8bd1\u6210\u4e2d\u6587\u5c31\u662f",(0,l.kt)("inlineCode",{parentName:"li"},"redo\u65e5\u5fd7\u7f13\u51b2\u533a"),"\u3002\u8fd9\u7247\u5185\u5b58\u7a7a\u95f4\u88ab\u5212\u5206\u6210\u82e5\u5e72\u4e2a\u8fde\u7eed\u7684redo log block.\u3002\u4e00\u4e2aredo log block\u5360\u7528512\u5b57\u8282\u5927\u5c0f\u3002"))))),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"#\u53c2\u6570\u8bbe\u7f6einnodb_log_buffer_size\nshow variables like '%innodb_log_buffer_size%';\n")),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u91cd\u505a\u65e5\u5fd7\u6587\u4ef6(redo log file)")," ,\u4fdd\u5b58\u5728\u786c\u76d8\u4e2d\uff0c\u662f\u6301\u4e45\u7684"))),(0,l.kt)("p",{parentName:"li"},"  ",(0,l.kt)("img",{alt:"redo_log_file",src:a(6170).Z,width:"582",height:"44"})))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"redo log\u7684\u5237\u76d8\u7b56\u7565"),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("p",{parentName:"blockquote"},"InnoDB\u7ed9\u51fa",(0,l.kt)("inlineCode",{parentName:"p"},"innodb_flush_log_at_trx_commit"),"\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u63a7\u5236commit\u63d0\u4ea4\u4e8b\u52a1\u65f6\uff0c\u5982\u4f55 \u5c06redo log buffer\u4e2d\u7684\u65e5\u5fd7\u5237\u65b0\u5230redo log file\u4e2d\u3002\u5b83\u652f\u63013\u79cd\u7b56\u7565: "),(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"\u8bbe\u7f6e\u4e3a0 :\u8868\u793a\u6bcf\u6b21\u4e8b\u52a1\u63d0\u4ea4\u65f6\u4e0d\u8fdb\u884c\u5237\u76d8\u64cd\u4f5c\u3002(\u7cfb\u7edf\u9ed8\u8ba4master thread\u6bcf\u96941s\u8fdb\u884c\u4e00\u6b21\u91cd\u505a\u65e5\u5fd7\u7684\u540c\u6b65)"),(0,l.kt)("li",{parentName:"ul"},"\u8bbe\u7f6e\u4e3a1 :\u8868\u793a\u6bcf\u6b21\u4e8b\u52a1\u63d0\u4ea4\u65f6\u90fd\u5c06\u8fdb\u884c\u540c\u6b65\uff0c\u5237\u76d8\u64cd\u4f5c(\u9ed8\u8ba4\u503c) "),(0,l.kt)("li",{parentName:"ul"},"\u8bbe\u7f6e\u4e3a2 :\u8868\u793a\u6bcf\u6b21\u4e8b\u52a1\u63d0\u4ea4\u65f6\u90fd\u53ea\u628aredo log buffer\u5185\u5bb9\u5199\u5165page cache,\u4e0d\u8fdb\u884c\u540c\u6b65\u3002\u7531os\u81ea\u5df1\u51b3\u5b9a\u4ec0\u4e48\u65f6\u5019\u540c\u6b65\u5230\u78c1\u76d8\u6587\u4ef6\u3002"))),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"SHOW VARIABLES LIKE 'innodb_flush_log_at_trx_commit';\n")),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("p",{parentName:"blockquote"},"InnoDB \u7684\u66f4\u65b0\u64cd\u4f5c\u91c7\u7528\u7684\u662f Write Ahead Log (\u9884\u5148\u65e5\u5fd7\u6301\u4e45\u5316)\u7b56\u7565\uff0c\u5373\u5148\u5199\u65e5\u5fd7\uff0c\u518d\u5199\u5165\u78c1\u76d8\u3002")),(0,l.kt)("p",{parentName:"li"},"  ",(0,l.kt)("img",{alt:"write_ahead_log",src:a(2792).Z,width:"953",height:"385"})))),(0,l.kt)("h3",{id:"2undo-log"},"2.undo log"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Undo\u65e5\u5fd7\u7684\u4f5c\u7528",(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"\u4f5c\u75281:",(0,l.kt)("inlineCode",{parentName:"li"},"\u56de\u6eda\u6570\u636e"),"\n\u7528\u6237\u5bf9undo\u65e5\u5fd7\u53ef\u80fd\u6709\u8bef\u89e3: undo\u7528\u4e8e\u5c06\u6570\u636e\u5e93\u7269\u7406\u5730\u6062\u590d\u5230\u6267\u884c\u8bed\u53e5\u6216\u4e8b\u52a1\u4e4b\u524d\u7684\u6837\u5b50\u3002\u4f46\u4e8b\u5b9e\u5e76\u975e\u5982\u6b64\u3002 undo\u662f\u903b\u8f91\u65e5\u5fd7\uff0c\u56e0\u6b64\u53ea\u662f\u5c06\u6570\u636e\u5e93\u903b\u8f91\u5730\u6062\u590d\u5230\u539f\u6765\u7684\u6837\u5b50\u3002\u6240\u6709\u4fee\u6539\u90fd\u88ab\u903b\u8f91\u5730\u53d6\u6d88\u4e86\uff0c\u4f46\u662f\u6570\u636e\u7ed3\u6784\u548c\u9875\u672c\u8eab\u5728\u56de\u6eda\u4e4b\u540e\u53ef\u80fd\u5927\u4e0d\u76f8\u540c\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u4f5c\u75282: ",(0,l.kt)("inlineCode",{parentName:"li"},"MVCC"),"\nundo\u7684\u53e6\u4e00\u4e2a\u4f5c\u7528\u662fMVCC, \u5373\u5728InnoDB\u5b58\u50a8\u5f15\u64ce\u4e2dMVCC\u7684\u5b9e\u73b0\u662f\u901a\u8fc7undo\u6765\u5b8c\u6210\u3002\u5f53\u7528\u6237\u8bfb\u53d6\u4e00\u884c\u8bb0\u5f55\u65f6\uff0c\u82e5\u8be5\u8bb0\u5f55\u5df2\u7ecf\u88ab\u5176\u4ed6\u4e8b\u52a1\u5360\u7528\uff0c\u5f53\u524d\u4e8b\u52a1\u53ef\u4ee5\u901a\u8fc7undo\u8bfb\u53d6\u4e4b\u524d\u7684\u884c\u7248\u672c\u4fe1\u606f\uff0c\u4ee5\u6b64\u5b9e\u73b0\u975e\u9501\u5b9a\u8bfb\u53d6\u3002"))))))}s.isMDXComponent=!0},8201:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/dirty_read-f9c179982662d9c8c7239326f4edc4b2.png"},1868:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/dirty_write-77077372cd1ec38b2602c84002694418.png"},3701:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/isolation-8fa46c597a23e1fca93667e4c1326f89.png"},6570:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/non_repeatable_read-50de1aa477abdb3b03bb6693bd655b84.png"},6841:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/phantom-43c17db0b9a65f5ccc37e4aed9c65624.png"},6170:(e,t,a)=>{a.d(t,{Z:()=>n});const n="data:image/png;base64,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"},2792:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/write_ahead_log-b36689c742f1e4fdac8725a1907e95ab.png"}}]);