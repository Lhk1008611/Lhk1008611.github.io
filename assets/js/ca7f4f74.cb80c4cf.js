"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[490],{3905:(e,a,t)=>{t.d(a,{Zo:()=>s,kt:()=>o});var l=t(67294);function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);a&&(l=l.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,l)}return t}function r(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){n(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function p(e,a){if(null==e)return{};var t,l,n=function(e,a){if(null==e)return{};var t,l,n={},i=Object.keys(e);for(l=0;l<i.length;l++)t=i[l],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)t=i[l],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var m=l.createContext({}),k=function(e){var a=l.useContext(m),t=a;return e&&(t="function"==typeof e?e(a):r(r({},a),e)),t},s=function(e){var a=k(e.components);return l.createElement(m.Provider,{value:a},e.children)},N="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return l.createElement(l.Fragment,{},a)}},d=l.forwardRef((function(e,a){var t=e.components,n=e.mdxType,i=e.originalType,m=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),N=k(t),d=n,o=N["".concat(m,".").concat(d)]||N[d]||u[d]||i;return t?l.createElement(o,r(r({ref:a},s),{},{components:t})):l.createElement(o,r({ref:a},s))}));function o(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var i=t.length,r=new Array(i);r[0]=d;var p={};for(var m in a)hasOwnProperty.call(a,m)&&(p[m]=a[m]);p.originalType=e,p[N]="string"==typeof e?e:n,r[1]=p;for(var k=2;k<i;k++)r[k]=t[k];return l.createElement.apply(null,r)}return l.createElement.apply(null,t)}d.displayName="MDXCreateElement"},58585:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>m,contentTitle:()=>r,default:()=>N,frontMatter:()=>i,metadata:()=>p,toc:()=>k});var l=t(87462),n=(t(67294),t(3905));const i={sidebar_position:4},r="Redis \u9ad8\u7ea7",p={unversionedId:"Redis/RedisSenior",id:"Redis/RedisSenior",title:"Redis \u9ad8\u7ea7",description:"\u4e00\u3001\u5206\u5e03\u5f0f\u7f13\u5b58",source:"@site/docs/Redis/RedisSenior.md",sourceDirName:"Redis",slug:"/Redis/RedisSenior",permalink:"/docs/Redis/RedisSenior",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"\u57fa\u4e8e Redis \u7684\u4e1a\u52a1\u573a\u666f",permalink:"/docs/Redis/RedisBusinessScenarios"},next:{title:"Dubbo",permalink:"/docs/category/dubbo"}},m={},k=[{value:"\u4e00\u3001\u5206\u5e03\u5f0f\u7f13\u5b58",id:"\u4e00\u5206\u5e03\u5f0f\u7f13\u5b58",level:2},{value:"1. Redis \u6301\u4e45\u5316",id:"1-redis-\u6301\u4e45\u5316",level:3},{value:"RDB \u6301\u4e45\u5316",id:"rdb-\u6301\u4e45\u5316",level:4},{value:"bgsave \u7684\u6d41\u7a0b",id:"bgsave-\u7684\u6d41\u7a0b",level:5},{value:"AOF \u6301\u4e45\u5316",id:"aof-\u6301\u4e45\u5316",level:4},{value:"RDB \u4e0e AOF \u7684\u533a\u522b",id:"rdb-\u4e0e-aof-\u7684\u533a\u522b",level:4},{value:"2. Redis \u4e3b\u4ece",id:"2-redis-\u4e3b\u4ece",level:3},{value:"1. \u96c6\u7fa4\u642d\u5efa",id:"1-\u96c6\u7fa4\u642d\u5efa",level:4},{value:"2. \u542f\u52a8",id:"2-\u542f\u52a8",level:4},{value:"3. \u5f00\u542f\u4e3b\u4ece\u5173\u7cfb",id:"3-\u5f00\u542f\u4e3b\u4ece\u5173\u7cfb",level:4},{value:"4. \u4e3b\u4ece\u6570\u636e\u540c\u6b65\u539f\u7406\uff08\u4e3b\u4ece\u590d\u5236\uff09",id:"4-\u4e3b\u4ece\u6570\u636e\u540c\u6b65\u539f\u7406\u4e3b\u4ece\u590d\u5236",level:4},{value:"5. \u4e3b\u4ece\u96c6\u7fa4\u4f18\u5316",id:"5-\u4e3b\u4ece\u96c6\u7fa4\u4f18\u5316",level:4},{value:"3. Redis \u54e8\u5175",id:"3-redis-\u54e8\u5175",level:3},{value:"1. \u54e8\u5175\u7684\u4f5c\u7528\u548c\u539f\u7406",id:"1-\u54e8\u5175\u7684\u4f5c\u7528\u548c\u539f\u7406",level:4},{value:"2. \u642d\u5efa\u54e8\u5175\uff08Sentinel\uff09\u96c6\u7fa4",id:"2-\u642d\u5efa\u54e8\u5175sentinel\u96c6\u7fa4",level:4},{value:"3. RedisTemplate \u7684\u54e8\u5175\u6a21\u5f0f",id:"3-redistemplate-\u7684\u54e8\u5175\u6a21\u5f0f",level:4},{value:"4. Redis \u5206\u7247\u96c6\u7fa4",id:"4-redis-\u5206\u7247\u96c6\u7fa4",level:3},{value:"1. \u642d\u5efa\u5206\u7247\u96c6\u7fa4",id:"1-\u642d\u5efa\u5206\u7247\u96c6\u7fa4",level:4},{value:"2. \u6563\u5217\u63d2\u69fd",id:"2-\u6563\u5217\u63d2\u69fd",level:4},{value:"3. \u96c6\u7fa4\u4f38\u7f29",id:"3-\u96c6\u7fa4\u4f38\u7f29",level:4},{value:"4. \u6545\u969c\u8f6c\u79fb",id:"4-\u6545\u969c\u8f6c\u79fb",level:4},{value:"5. RedisTemplate \u8bbf\u95ee\u5206\u7247\u96c6\u7fa4",id:"5-redistemplate-\u8bbf\u95ee\u5206\u7247\u96c6\u7fa4",level:4},{value:"\u4e8c\u3001\u591a\u7ea7\u7f13\u5b58",id:"\u4e8c\u591a\u7ea7\u7f13\u5b58",level:2},{value:"1.  JVM \u8fdb\u7a0b\u7f13\u5b58",id:"1--jvm-\u8fdb\u7a0b\u7f13\u5b58",level:3},{value:"2. Lua \u811a\u672c\u8bed\u8a00",id:"2-lua-\u811a\u672c\u8bed\u8a00",level:3},{value:"3. \u591a\u7ea7\u7f13\u5b58",id:"3-\u591a\u7ea7\u7f13\u5b58",level:3},{value:"OpenResty",id:"openresty",level:4},{value:"\u51b7\u542f\u52a8\u4e0e\u7f13\u5b58\u9884\u70ed",id:"\u51b7\u542f\u52a8\u4e0e\u7f13\u5b58\u9884\u70ed",level:4},{value:"NGINX \u672c\u5730\u7f13\u5b58",id:"nginx-\u672c\u5730\u7f13\u5b58",level:4},{value:"4. \u7f13\u5b58\u540c\u6b65\u7b56\u7565",id:"4-\u7f13\u5b58\u540c\u6b65\u7b56\u7565",level:3},{value:"\u6570\u636e\u540c\u6b65\u7b56\u7565",id:"\u6570\u636e\u540c\u6b65\u7b56\u7565",level:4},{value:"Canal",id:"canal",level:4},{value:"\u5de5\u4f5c\u539f\u7406",id:"\u5de5\u4f5c\u539f\u7406",level:5},{value:"\u5b89\u88c5 Canal",id:"\u5b89\u88c5-canal",level:5},{value:"Canal \u5ba2\u6237\u7aef",id:"canal-\u5ba2\u6237\u7aef",level:5},{value:"\u4e09\u3001Redis \u6700\u4f73\u5b9e\u8df5\uff08\u4f7f\u7528\u7ecf\u9a8c\uff09",id:"\u4e09redis-\u6700\u4f73\u5b9e\u8df5\u4f7f\u7528\u7ecf\u9a8c",level:2},{value:"Redis \u952e\u503c\u8bbe\u8ba1",id:"redis-\u952e\u503c\u8bbe\u8ba1",level:3},{value:"\u4f18\u96c5\u7684key\u7ed3\u6784",id:"\u4f18\u96c5\u7684key\u7ed3\u6784",level:4},{value:"\u62d2\u7edd BigKey",id:"\u62d2\u7edd-bigkey",level:4},{value:"\u6070\u5f53\u7684\u6570\u636e\u7c7b\u578b",id:"\u6070\u5f53\u7684\u6570\u636e\u7c7b\u578b",level:4},{value:"\u6279\u5904\u7406\u4f18\u5316",id:"\u6279\u5904\u7406\u4f18\u5316",level:3},{value:"Redis \u539f\u751f\u6279\u5904\u7406\uff08MSET \u7b49\uff09",id:"redis-\u539f\u751f\u6279\u5904\u7406mset-\u7b49",level:5},{value:"Pipeline",id:"pipeline",level:5},{value:"\u96c6\u7fa4\u4e0b\u7684\u6279\u5904\u7406",id:"\u96c6\u7fa4\u4e0b\u7684\u6279\u5904\u7406",level:5},{value:"\u670d\u52a1\u7aef\u4f18\u5316",id:"\u670d\u52a1\u7aef\u4f18\u5316",level:3},{value:"\u6301\u4e45\u5316\u914d\u7f6e",id:"\u6301\u4e45\u5316\u914d\u7f6e",level:4},{value:"\u6162\u67e5\u8be2",id:"\u6162\u67e5\u8be2",level:4},{value:"\u547d\u4ee4\u53ca\u5b89\u5168\u914d\u7f6e",id:"\u547d\u4ee4\u53ca\u5b89\u5168\u914d\u7f6e",level:4},{value:"\u5185\u5b58\u914d\u7f6e",id:"\u5185\u5b58\u914d\u7f6e",level:4},{value:"\u96c6\u7fa4\u6700\u4f73\u5b9e\u8df5",id:"\u96c6\u7fa4\u6700\u4f73\u5b9e\u8df5",level:3}],s={toc:k};function N(e){let{components:a,...i}=e;return(0,n.kt)("wrapper",(0,l.Z)({},s,i,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"redis-\u9ad8\u7ea7"},"Redis \u9ad8\u7ea7"),(0,n.kt)("h2",{id:"\u4e00\u5206\u5e03\u5f0f\u7f13\u5b58"},"\u4e00\u3001\u5206\u5e03\u5f0f\u7f13\u5b58"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5355\u8282\u70b9\u95ee\u9898",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"\u6570\u636e\u4e22\u5931\u95ee\u9898",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Redis\u662f\u5185\u5b58\u5b58\u50a8\uff0c\u670d\u52a1\u91cd\u8651\u53ef\u80fd\u4f1a\u4e22\u5931\u6570\u636e"))),(0,n.kt)("li",{parentName:"ol"},"\u5e76\u53d1\u80fd\u529b\u95ee\u9898",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5355\u8282\u70b9 Redis \u5e76\u53d1\u80fd\u529b\u867d\u7136\u4e0d\u9519\uff0c\u4f46\u4e5f\u65e0\u6cd5\u6ee1\u8db3\u5982 618 \u8fd9\u6837\u7684\u9ad8\u5e76\u53d1\u573a\u666f"))),(0,n.kt)("li",{parentName:"ol"},"\u6545\u969c\u6062\u590d\u95ee\u9898",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5982\u679c Redis \u5b95\u673a\uff0c\u5219\u670d\u52a1\u4e0d\u53ef\u7528\uff0c\u9700\u8981\u4e00\u79cd\u81ea\u52a8\u7684\u6545\u969c\u6062\u590d\u624b\u6bb5"))),(0,n.kt)("li",{parentName:"ol"},"\u5b58\u50a8\u80fd\u529b\u95ee\u9898",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Redis \u57fa\u4e8e\u5185\u5b58\uff0c\u5355\u8282\u70b9\u80fd\u5b58\u50a8\u7684\u6570\u636e\u91cf\u96be\u4ee5\u6ee1\u8db3\u6d77\u91cf\u6570\u636e\u9700\u6c42"))))),(0,n.kt)("li",{parentName:"ul"},"\u4e0a\u8ff0\u95ee\u9898\u53ef\u4ee5\u901a\u8fc7 Redis \u96c6\u7fa4\u8fdb\u884c\u89e3\u51b3",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u95ee\u98981\uff1a\u5b9e\u73b0 Redis \u6570\u636e\u6301\u4e45\u5316"),(0,n.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u95ee\u98982\uff1a\u642d\u5efa\u4e3b\u4ece\u96c6\u7fa4\uff0c\u5b9e\u73b0\u8bfb\u5199\u5206\u79bb"),(0,n.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u95ee\u98983\uff1a\u5229\u7528 Redis \u54e8\u5175\uff0c\u5b9e\u73b0\u5065\u5eb7\u68c0\u6d4b\u548c\u81ea\u52a8\u6062\u590d"),(0,n.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u95ee\u98984\uff1a\u642d\u5efa\u5206\u7247\u96c6\u7fa4\uff0c\u5229\u7528\u63d2\u69fd\u673a\u5236\u5b9e\u73b0\u52a8\u6001\u6269\u5bb9")))),(0,n.kt)("h3",{id:"1-redis-\u6301\u4e45\u5316"},"1. Redis \u6301\u4e45\u5316"),(0,n.kt)("h4",{id:"rdb-\u6301\u4e45\u5316"},"RDB \u6301\u4e45\u5316"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"RDB \u5168\u79f0 Redis Database Backup file( Redis \u6570\u636e\u5907\u4efd\u6587\u4ef6)\uff0c\u4e5f\u88ab\u53eb\u505a Redis \u6570\u636e\u5feb\u7167\u3002\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u628a\u5185\u5b58\u4e2d\u7684\u6240\u6709\u6570\u636e\u90fd\u8bb0\u5f55\u5230\u78c1\u76d8\u4e2d\u3002\u5f53 Redis \u5b9e\u4f8b\u6545\u969c\u91cd\u542f\u540e\uff0c\u4ece",(0,n.kt)("strong",{parentName:"p"},"\u78c1\u76d8"),"\u8bfb\u53d6\u5feb\u7167\u6587\u4ef6\uff0c\u6062\u590d\u6570\u636e")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5feb\u7167\u6587\u4ef6\u79f0\u4e3a RDB \u6587\u4ef6\uff0c\u9ed8\u8ba4\u662f\u4fdd\u5b58\u5728\u5f53\u524d\u8fd0\u884c\u76ee\u5f55"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u901a\u8fc7 ",(0,n.kt)("inlineCode",{parentName:"li"},"save")," \u547d\u4ee4\u5f00\u542f RDB \u6301\u4e45\u5316\uff0c\u4e14\u7531 Redis \u4e3b\u8fdb\u7a0b\u6765\u6267\u884c RDB\uff0c\u4f1a\u963b\u585e\u6240\u6709\u547d\u4ee4"),(0,n.kt)("li",{parentName:"ul"},"\u901a\u8fc7",(0,n.kt)("inlineCode",{parentName:"li"},"bgsave"),"\u547d\u4ee4\u5f00\u542f\u5b50\u8fdb\u7a0b\u6267\u884c RDB\uff0c\u907f\u514d\u4e3b\u8fdb\u7a0b\u53d7\u5230\u5f71\u54cd\uff0c\u5c5e\u4e8e\u5f02\u6b65\u6301\u4e45\u5316"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Redis \u9ed8\u8ba4\u5f00\u542f RDB\uff1aRedis \u505c\u673a\u65f6\u4f1a\u6267\u884c\u4e00\u6b21 RDB"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u53ef\u4ee5\u5728 redis.conf \u6587\u4ef6\u4e2d\u914d\u7f6e\u89e6\u53d1 RDB \u7684\u673a\u5236"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'# 900 \u79d2\u5185\uff0c\u5982\u679c\u81f3\u5c11\u6709 1 \u4e2a key \u88ab\u4fee\u6539\uff0c\u5219\u6267\u884c bgsave\uff0c\u5982\u679c\u914d\u7f6e\u4e3a save "" \u5219\u8868\u793a\u7981\u7528 RDB\nsave 900 1\n')),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240715054703022",src:t(93828).Z,width:"1422",height:"599"}))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5176\u4ed6\u76f8\u5173\u914d\u7f6e\uff0c\u5177\u4f53\u67e5\u770b redis.conf \u6587\u4ef6"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# \u662f\u5426\u538b\u7f29 ,\u5efa\u8bae\u4e0d\u5f00\u542f\uff0c\u538b\u7f29\u4e5f\u4f1a\u6d88\u8017 cpu\uff0c\u78c1\u76d8\u7684\u8bdd\u4e0d\u503c\u94b1\nrdbcompression yes\n# RDB\u6587\u4ef6\u540d\u79f0\ndbfilename dump.rdb\n#\u6587\u4ef6\u4fdd\u5b58\u7684\u8def\u5f84\u76ee\u5f55\ndir ./\n")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240715055003315",src:t(74417).Z,width:"1422",height:"161"})),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240715055116484",src:t(4056).Z,width:"1422",height:"69"})),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240715055215350",src:t(6422).Z,width:"1422",height:"237"})))))),(0,n.kt)("h5",{id:"bgsave-\u7684\u6d41\u7a0b"},"bgsave \u7684\u6d41\u7a0b"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"bgsave \u5f00\u59cb\u65f6\u4f1a\u5148 fork \u4e3b\u8fdb\u7a0b\u5f97\u5230\u5b50\u8fdb\u7a0b\uff0c\u5b50\u8fdb\u7a0b\u5171\u4eab\u4e3b\u8fdb\u7a0b\u7684\u5185\u5b58\u6570\u636e\u3002\u5b8c\u6210 fork \u540e\u8bfb\u53d6\u5185\u5b58\u6570\u636e\u5e76\u5199\u5165\u65b0\u7684 RDB \u6587\u4ef6\uff0c\u7528\u65b0 RDB \u6587\u4ef6\u66ff\u6362\u65e7\u7684 RDB \u6587\u4ef6")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"fork \u7684\u539f\u7406"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5728 Linux \u7cfb\u7edf\u4e2d\uff0c\u8fdb\u7a0b\u4e0d\u80fd\u76f4\u63a5\u64cd\u4f5c\u7269\u7406\u5185\u5b58\uff0c\u800c\u662f\u901a\u8fc7\u7ef4\u62a4\u4e00\u5f20\u9875\u8868\u5b9e\u73b0\u5bf9\u7269\u7406\u5185\u5b58\u4e2d\u6570\u636e\u7684\u6620\u5c04\uff0c\u76f8\u5f53\u4e8e\u901a\u8fc7\u9875\u8868\u53ef\u4ee5\u95f4\u63a5\u64cd\u4f5c\u7269\u7406\u5185\u5b58"),(0,n.kt)("li",{parentName:"ul"},"\u5728 fork \u65f6\uff0c\u662f\u5c06\u4e3b\u8fdb\u7a0b\u7684\u9875\u8868\u62f7\u8d1d\u5230\u5b50\u8fdb\u7a0b\uff0c\u4fdd\u8bc1\u5b50\u8fdb\u7a0b\u4e5f\u53ef\u4ee5\u64cd\u4f5c\u4e3b\u8fdb\u7a0b\u7684\u6570\u636e\uff0c\u5b9e\u73b0\u5185\u5b58\u6570\u636e\u7684\u5171\u4eab"),(0,n.kt)("li",{parentName:"ul"},"\u4e14 fork \u91c7\u7528 copy-on-write \u6280\u672f",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5f53\u4e3b\u8fdb\u7a0b\u6267\u884c\u8bfb\u64cd\u4f5c\u65f6\uff0c\u8bbf\u95ee\u5171\u4eab\u5185\u5b58\uff0c\u5f53\u4e3b\u8fdb\u7a0b\u6267\u884c\u5199\u64cd\u4f5c\u65f6\uff0c\u5219\u4f1a\u62f7\u8d1d\u4e00\u4efd\u6570\u636e\uff0c\u6267\u884c\u5199\u64cd\u4f5c")))),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240715060654524",src:t(62251).Z,width:"1287",height:"462"}))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"RDB \u7684 \u7f3a\u70b9"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"\u4e24\u6b21 RDB \u6267\u884c\u95f4\u9694\u65f6\u95f4\u957f\uff0c\u5bfc\u81f4\u4e24\u6b21 RDB \u4e4b\u95f4\u5199\u5165\u6570\u636e\u6709\u4e22\u5931\u7684\u98ce\u9669"),(0,n.kt)("li",{parentName:"ol"},"fork \u5b50\u8fdb\u7a0b\u3001\u538b\u7f29\u3001\u5199\u51fa RDB \u6587\u4ef6\u90fd\u6bd4\u8f83\u8017\u65f6")))),(0,n.kt)("h4",{id:"aof-\u6301\u4e45\u5316"},"AOF \u6301\u4e45\u5316"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"AOF \u5168\u79f0\u4e3a Append OnlyFile (\u8ffd\u52a0\u6587\u4ef6)\u3002\u5c06 Redis \u5904\u7406\u7684\u6bcf\u4e00\u4e2a",(0,n.kt)("strong",{parentName:"p"},"\u5199\u547d\u4ee4"),"\u90fd\u4f1a\u8bb0\u5f55\u5728AOF\u6587\u4ef6\uff0c\u53ef\u4ee5\u770b\u505a\u662f\u547d\u4ee4\u65e5\u5fd7\u6587\u4ef6")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"AOF \u9ed8\u8ba4\u662f\u5173\u95ed\u7684\uff0c\u9700\u8981\u4fee\u6539 redis.conf \u914d\u7f6e\u6587\u4ef6\u6765\u5f00\u542f AOF"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'#\u662f\u5426\u5f00\u542fAOF\u529f\u80fd\uff0c\u9ed8\u8ba4\u662fno\nappendonly yes\n#AOF\u6587\u4ef6\u7684\u540d\u79f0 \nappendfilename:"appendonly.aof\n')),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240715061918592",src:t(73871).Z,width:"1422",height:"546"})),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240715062011162",src:t(14596).Z,width:"1422",height:"634"}))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5237\u76d8\u7b56\u7565\uff1aAOF \u7684",(0,n.kt)("strong",{parentName:"p"},"\u547d\u4ee4\u8bb0\u5f55\u7684\u9891\u7387"),"\u4e5f\u53ef\u4ee5\u901a\u8fc7 redis.conf \u6587\u4ef6\u8fdb\u884c\u914d\u7f6e"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"#\u8868\u793a\u6bcf\u6267\u884c\u4e00\u6b21\u5199\u547d\u4ee4\uff0c\u7acb\u5373\u8bb0\u5f55\u5230 A0F \u6587\u4ef6\nappendfsync always\n#\u5199\u547d\u4ee4\u6267\u884c\u5b8c\u5148\u653e\u5165 AOF \u7f13\u51b2\u533a\uff0c\u7136\u540e\u8868\u793a\u6bcf\u9694 1 \u79d2\u5c06\u7f13\u51b2\u533a\u6570\u636e\u5199\u5230 A0F \u6587\u4ef6\uff0c\u662f\u9ed8\u8ba4\u65b9\u6848\nappendfsync everysec\n#\u5199\u547d\u4ee4\u6267\u884c\u5b8c\u5148\u653e\u5165 AOF \u7f13\u51b2\u533a\uff0c\u7531\u64cd\u4f5c\u7cfb\u7edf\u51b3\u5b9a\u4f55\u65f6\u5c06\u7f13\u51b2\u533a\u5185\u5bb9\u5199\u56de\u78c1\u76d8\nappendfsync no\n")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240715062251901",src:t(25123).Z,width:"1422",height:"649"})),(0,n.kt)("table",{parentName:"li"},(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"\u914d\u7f6e\u9879"),(0,n.kt)("th",{parentName:"tr",align:null},"\u5237\u76d8\u65f6\u673a"),(0,n.kt)("th",{parentName:"tr",align:null},"\u4f18\u70b9"),(0,n.kt)("th",{parentName:"tr",align:null},"\u7f3a\u70b9"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Always"),(0,n.kt)("td",{parentName:"tr",align:null},"\u540c\u6b65\u5237\u76d8"),(0,n.kt)("td",{parentName:"tr",align:null},"\u53ef\u9760\u6027\u9ad8\uff0c\u51e0\u4e4e\u4e0d\u4e22\u6570\u636e"),(0,n.kt)("td",{parentName:"tr",align:null},"\u6027\u80fd\u5f71\u54cd\u5927")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"everysec"),(0,n.kt)("td",{parentName:"tr",align:null},"\u6bcf\u79d2\u5237\u76d8"),(0,n.kt)("td",{parentName:"tr",align:null},"\u6027\u80fd\u9002\u4e2d"),(0,n.kt)("td",{parentName:"tr",align:null},"\u6700\u591a\u4e22\u5931 1 \u79d2\u6570\u636e")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"no"),(0,n.kt)("td",{parentName:"tr",align:null},"\u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236"),(0,n.kt)("td",{parentName:"tr",align:null},"\u6027\u80fd\u6700\u597d"),(0,n.kt)("td",{parentName:"tr",align:null},"\u53ef\u9760\u6027\u8f83\u5dee\uff0c\u53ef\u80fd\u4e22\u5931\u5927\u91cf\u6570\u636e"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u56e0\u4e3a\u662f\u8bb0\u5f55\u547d\u4ee4\uff0cAOF \u6587\u4ef6\u4f1a\u6bd4 RDB \u6587\u4ef6\u5927\u7684\u591a\u3002\u800c\u4e14 AOF \u4f1a\u8bb0\u5f55\u5bf9\u540c\u4e00\u4e2a key \u7684\u591a\u6b21\u5199\u64cd\u4f5c\uff0c\u4f46\u53ea\u6709\u6700\u540e\u4e00\u6b21\u5199\u64cd\u4f5c\u624d\u6709\u610f\u4e49"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u53ef\u4ee5\u901a\u8fc7\u6267\u884c ",(0,n.kt)("inlineCode",{parentName:"p"},"bgrewriteaof")," \u547d\u4ee4\uff0c\u53ef\u4ee5\u8ba9 A0F \u6587\u4ef6\u6267\u884c",(0,n.kt)("strong",{parentName:"p"},"\u91cd\u5199"),"\u529f\u80fd\uff0c\u7528\u6700\u5c11\u7684\u547d\u4ee4\u8fbe\u5230\u76f8\u540c\u6548\u679c"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240715063431699",src:t(30232).Z,width:"1206",height:"161"}))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4e5f\u53ef\u4ee5\u5728 redis.conf \u4e2d\u914d\u7f6e\u81ea\u52a8\u53bb\u91cd\u5199 AOF \u6587\u4ef6"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# AOF\u6587\u4ef6\u6bd4\u4e0a\u6b21\u6587\u4ef6\u589e\u957f\u8d85\u8fc7\u591a\u5c11\u767e\u5206\u6bd4\u5219\u89e6\u53d1\u91cd\u5199\nauto-aof-rewrite-percentage 100\n# AOF\u6587\u4ef6\u4f53\u79ef\u6700\u5c0f\u591a\u5927\u4ee5\u4e0a\u624d\u89e6\u53d1\u91cd\u5199\nauto-aof-rewrite-min-size 64mb\n")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240715063810279",src:t(7183).Z,width:"1422",height:"475"})))))),(0,n.kt)("h4",{id:"rdb-\u4e0e-aof-\u7684\u533a\u522b"},"RDB \u4e0e AOF \u7684\u533a\u522b"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"RDB \u548c AOF \u5404\u6709\u81ea\u5df1\u7684\u4f18\u7f3a\u70b9\uff0c\u5982\u679c\u5bf9\u6570\u636e\u5b89\u5168\u6027\u8981\u6c42\u8f83\u9ad8\uff0c\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\u5f80\u5f80\u4f1a\u7ed3\u5408\u4e24\u8005\u6765\u4f7f\u7528"),(0,n.kt)("table",{parentName:"li"},(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null}),(0,n.kt)("th",{parentName:"tr",align:null},"RDB"),(0,n.kt)("th",{parentName:"tr",align:null},"AOF"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u6301\u4e45\u5316\u65b9\u5f0f"),(0,n.kt)("td",{parentName:"tr",align:null},"\u5b9a\u65f6\u5bf9\u6574\u4e2a\u5185\u5b58\u505a\u5feb\u7167"),(0,n.kt)("td",{parentName:"tr",align:null},"\u8bb0\u5f55\u6bcf\u4e00\u6b21\u6267\u884c\u7684\u547d\u4ee4")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u6570\u636e\u5b8c\u6574\u6027"),(0,n.kt)("td",{parentName:"tr",align:null},"\u4e0d\u5b8c\u6574\uff0c\u4e24\u6b21\u5907\u4efd\u4e4b\u95f4\u4f1a\u4e22\u5931"),(0,n.kt)("td",{parentName:"tr",align:null},"\u76f8\u5bf9\u5b8c\u6574\uff0c\u53d6\u51b3\u4e8e\u5237\u76d8\u7b56\u7565")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u6587\u4ef6\u5927\u5c0f"),(0,n.kt)("td",{parentName:"tr",align:null},"\u4f1a\u6709\u538b\u7f29\uff0c\u6587\u4ef6\u4f53\u79ef\u5c0f"),(0,n.kt)("td",{parentName:"tr",align:null},"\u8bb0\u5f55\u547d\u4ee4\uff0c\u6587\u4ef6\u4f53\u79ef\u5f88\u5927")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u5b95\u673a\u6062\u590d\u901f\u5ea6"),(0,n.kt)("td",{parentName:"tr",align:null},"\u5f88\u5feb"),(0,n.kt)("td",{parentName:"tr",align:null},"\u6162")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u6570\u636e\u6062\u590d\u4f18\u5148\u7ea7"),(0,n.kt)("td",{parentName:"tr",align:null},"\u4f4e\uff0c\u56e0\u4e3a\u6570\u636e\u5b8c\u6574\u6027\u4e0d\u5982AOF"),(0,n.kt)("td",{parentName:"tr",align:null},"\u9ad8\uff0c\u56e0\u4e3a\u6570\u636e\u5b8c\u6574\u6027\u66f4\u9ad8")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u7cfb\u7edf\u8d44\u6e90\u5360\u7528"),(0,n.kt)("td",{parentName:"tr",align:null},"\u9ad8\uff0c\u5927\u91cfCPU\u548c\u5185\u5b58\u6d88\u8017"),(0,n.kt)("td",{parentName:"tr",align:null},"\u4f4e\uff0c\u4e3b\u8981\u662f\u78c1\u76d8 I0 \u8d44\u6e90\u4f46 AOF \u91cd\u5199\u65f6\u4f1a\u5360\u7528\u5927\u91cf CPU \u548c\u5185\u5b58\u8d44\u6e90")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u4f7f\u7528\u573a\u666f"),(0,n.kt)("td",{parentName:"tr",align:null},"\u53ef\u4ee5\u5bb9\u5fcd\u6570\u5206\u949f\u7684\u6570\u636e\u4e22\u5931\uff0c\u8ffd\u6c42\u66f4\u5feb\u7684\u542f\u52a8\u901f\u5ea6"),(0,n.kt)("td",{parentName:"tr",align:null},"\u5bf9\u6570\u636e\u5b89\u5168\u6027\u8981\u6c42\u8f83\u9ad8\u5e38\u89c1")))))),(0,n.kt)("h3",{id:"2-redis-\u4e3b\u4ece"},"2. Redis \u4e3b\u4ece"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5355\u8282\u70b9 Redis \u7684\u5e76\u53d1\u80fd\u529b\u662f\u6709\u4e0a\u9650\u7684\uff0c\u8981\u8fdb\u4e00\u6b65\u63d0\u9ad8 Redis \u7684\u5e76\u53d1\u80fd\u529b\uff0c\u5c31\u9700\u8981\u642d\u5efa\u4e3b\u4ece\u96c6\u7fa4\uff0c\u5b9e\u73b0\u8bfb\u5199\u5206\u79bb"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240715231608313",src:t(7684).Z,width:"1235",height:"577"})))),(0,n.kt)("h4",{id:"1-\u96c6\u7fa4\u642d\u5efa"},"1. \u96c6\u7fa4\u642d\u5efa"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u8981\u5728\u540c\u4e00\u53f0\u865a\u62df\u673a\u5f00\u542f3\u4e2a\u5b9e\u4f8b\uff0c\u5fc5\u987b\u51c6\u5907\u4e09\u4efd\u4e0d\u540c\u7684\u914d\u7f6e\u6587\u4ef6\u548c\u76ee\u5f55\uff0c\u914d\u7f6e\u6587\u4ef6\u6240\u5728\u76ee\u5f55\u4e5f\u5c31\u662f\u5de5\u4f5c\u76ee\u5f55"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# 1.\u521b\u5efa\u76ee\u5f55\nmkdir redis1 redis2 redis3 \n\n# 2.\u62f7\u8d1d redis.conf\necho redis1 redis2 reids3 | xargs -t -n 1 cp redis-6.2.14/redis.conf\n\n# 3. \u4fee\u6539\u6bcf\u4e2a\u5b9e\u4f8b\u7684\u7aef\u53e3\u3001\u5de5\u4f5c\u76ee\u5f55\nsed -i -e 's/6379/7001/g' -e 's/dir .\\//dir \\/opt\\/redis1\\//g' redis1/redis.conf\nsed -i -e 's/6379/7002/g' -e 's/dir .\\//dir \\/opt\\/redis2\\//g' redis2/redis.conf \nsed -i -e 's/6379/7003/g' -e 's/dir .\\//dir \\/opt\\/redis3\\//g' redis3/redis.conf\n\n# 4. \u4fee\u6539\u6bcf\u4e2a\u5b9e\u4f8b\u7684\u58f0\u660e IP\uff0c\u5728 redis.conf \u6587\u4ef6\u4e2d\u6307\u5b9a\u6bcf\u4e00\u4e2a\u5b9e\u4f8b\u7684\u7ed1\u5b9a ip \u4fe1\u606f\nsed -i '1a replica-announce-ip 192.168.136.131' redis1/redis.conf\nsed -i '1a replica-announce-ip 192.168.136.131' redis2/redis.conf\nsed -i '1a replica-announce-ip 192.168.136.131' redis3/redis.conf\n\n# 5. \u82e5\u4e3b\u8282\u70b9\u6709\u5bc6\u7801\uff0c\u5728\u6bcf\u4e2a\u4ece\u8282\u70b9\u4e2d\u914d\u7f6e\u4e3b\u8282\u70b9\u7684\u5bc6\u7801\nsed -i '1a masterauth 222333' redis2/redis.conf\nsed -i '1a masterauth 222333' redis3/redis.conf\n\n\n")))),(0,n.kt)("h4",{id:"2-\u542f\u52a8"},"2. \u542f\u52a8"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"redis-server redis1/redis.conf \nredis-server redis2/redis.conf \nredis-server redis3/redis.conf \n")),(0,n.kt)("h4",{id:"3-\u5f00\u542f\u4e3b\u4ece\u5173\u7cfb"},"3. \u5f00\u542f\u4e3b\u4ece\u5173\u7cfb"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u914d\u7f6e\u8282\u70b9\u7684\u4e3b\u4ece\u53ef\u4ee5\u4f7f\u7528 ",(0,n.kt)("inlineCode",{parentName:"p"},"replicaof")," \u6216\u8005 ",(0,n.kt)("inlineCode",{parentName:"p"},"slaveof"),"(5.0\u4ee5\u524d)\u547d\u4ee4")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6709\u4e34\u65f6\u548c\u6c38\u4e45\u4e24\u79cd\u6a21\u5f0f:"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6(\u6c38\u4e45\u751f\u6548)"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5728 redis.conf \u4e2d\u6dfb\u52a0\u4e00\u884c\u914d\u7f6e: ",(0,n.kt)("inlineCode",{parentName:"li"},"slaveof <masterip><masterport>")))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u4f7f\u7528 redis-cli \u5ba2\u6237\u7aef\u8fde\u63a5\u5230 redis \u670d\u52a1\uff0c\u6267\u884c ",(0,n.kt)("inlineCode",{parentName:"p"},"slaveof")," \u547d\u4ee4(\u91cd\u542f\u540e\u5931\u6548) ",(0,n.kt)("inlineCode",{parentName:"p"},"slaveof <masterip><masterport>")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# 1. \u542f\u52a8\u5404\u8282\u70b9 redis \u670d\u52a1\nredis-server redis1/redis.conf\nredis-server redis2/redis.conf\nredis-server redis3/redis.conf\n\n# 2. \u914d\u7f6e\u8282\u70b9\u4e3b\u4ece\u5173\u7cfb\uff0c\u4ee5 7001 \u7aef\u53e3\u7684 redis \u8282\u70b9\u4e3a\u4e3b\u8282\u70b9\nredis-cli -p 7002\nSLAVEOF 192.168.136.131 7001\n# \u67e5\u770b\u8282\u70b9\u4fe1\u606f\nINFO replication\n\nredis-cli -p 7003\nSLAVEOF 192.168.136.131 7001\n# \u67e5\u770b\u8282\u70b9\u4fe1\u606f\nINFO replication\n\n")))))),(0,n.kt)("h4",{id:"4-\u4e3b\u4ece\u6570\u636e\u540c\u6b65\u539f\u7406\u4e3b\u4ece\u590d\u5236"},"4. \u4e3b\u4ece\u6570\u636e\u540c\u6b65\u539f\u7406\uff08\u4e3b\u4ece\u590d\u5236\uff09"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4e3b\u4ece\u96c6\u7fa4\u642d\u5efa\u597d\u540e\uff0c\u53ef\u4ee5\u5728\u4e3b\u8282\u70b9\u8fdb\u884c\u5199\u64cd\u4f5c\uff0c\u4ece\u8282\u70b9\u4f1a\u540c\u6b65\u4e3b\u8282\u70b9\u7684\u6570\u636e")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4e3b\u4ece\u7b2c\u4e00\u6b21\u540c\u6b65\u662f\u5168\u91cf\u540c\u6b65"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Replication ld: \u7b80\u79f0 replid\uff0c\u662f\u6570\u636e\u96c6\u7684\u6807\u8bb0\uff0cid\u4e00\u81f4\u5219\u8bf4\u660e\u662f\u540c\u4e00\u6570\u636e\u96c6\u3002\u6bcf\u4e00\u4e2a master \u90fd\u6709\u552f\u4e00\u7684 replid\uff0cslave \u5219\u4f1a\u7ee7\u627fmaster \u8282\u70b9\u7684 replid"),(0,n.kt)("li",{parentName:"ul"},"offset: \u504f\u79fb\u91cf\uff0c\u968f\u7740\u8bb0\u5f55\u5728 repl_baklog \u4e2d\u7684\u6570\u636e\u589e\u591a\u800c\u9010\u6e10\u589e\u5927\u3002slave \u5b8c\u6210\u540c\u6b65\u65f6\u4e5f\u4f1a\u8bb0\u5f55\u5f53\u524d\u540c\u6b65\u7684 offset.\n\u5982\u679c slave \u7684 offset \u5c0f\u4e8e master \u7684offset\uff0c\u8bf4\u660e slave \u6570\u636e\u843d\u540e\u4e8e master\uff0c\u9700\u8981\u66f4\u65b0\u3002")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240716005749680",src:t(62419).Z,width:"1176",height:"641"})),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u5168\u91cf\u540c\u6b65\u7684\u6d41\u7a0b"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"slave \u8282\u70b9\u8bf7\u6c42\u589e\u91cf\u540c\u6b65"),(0,n.kt)("li",{parentName:"ul"},"master \u8282\u70b9\u5224\u65ad replid\uff0c\u53d1\u73b0\u4e0d\u4e00\u81f4\uff08\u8bf4\u660e\u662f\u7b2c\u4e00\u6b21\uff09\uff0c\u62d2\u7edd\u589e\u91cf\u540c\u6b65\uff0c\u5f00\u59cb\u5168\u91cf\u540c\u6b65"),(0,n.kt)("li",{parentName:"ul"},"master \u5c06\u5b8c\u6574\u5185\u5b58\u6570\u636e\u751f\u6210 RDB\uff0c\u53d1\u9001 RDB \u5230 slave"),(0,n.kt)("li",{parentName:"ul"},"slave \u6e05\u7a7a\u672c\u5730\u6570\u636e\uff0c\u52a0\u8f7d master \u7684 RDB"),(0,n.kt)("li",{parentName:"ul"},"master \u5c06 RDB \u671f\u95f4\u7684\u547d\u4ee4\u8bb0\u5f55\u5728 repl_baklog\uff0c\u5e76\u6301\u7eed\u5c06 repl_baklog\u4e2d\u7684\u547d\u4ee4\u53d1\u9001\u7ed9 slave"),(0,n.kt)("li",{parentName:"ul"},"slave \u6267\u884c\u63a5\u6536\u5230\u7684\u547d\u4ee4\uff0c\u4fdd\u6301\u4e0e master \u4e4b\u95f4\u7684\u540c\u6b65"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5982\u679c slave \u91cd\u542f\u540e\u540c\u6b65\uff0c\u5219\u6267\u884c",(0,n.kt)("strong",{parentName:"p"},"\u589e\u91cf\u540c\u6b65")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240716010924975",src:t(51294).Z,width:"1202",height:"504"})),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"repl_baklog \u5927\u5c0f\u6709\u4e0a\u9650\uff0c\u5199\u6ee1\u540e\u4f1a\u8986\u76d6\u6700\u65e9\u7684\u6570\u636e\u3002\u5982\u679c slave \u65ad\u5f00\u65f6\u95f4\u8fc7\u4e45\uff0c\u5bfc\u81f4",(0,n.kt)("strong",{parentName:"li"},"\u6570\u636e\u88ab\u8986\u76d6"),"\uff0c\u5219\u65e0\u6cd5\u5b9e\u73b0\u589e\u91cf\u540c\u6b65\uff0c",(0,n.kt)("strong",{parentName:"li"},"\u53ea\u80fd\u518d\u6b21\u5168\u91cf\u540c\u6b65")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5168\u91cf\u540c\u6b65\u548c\u589e\u91cf\u540c\u6b65\u533a\u522b"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u5168\u91cf\u540c\u6b65"),": master \u5c06\u5b8c\u6574\u5185\u5b58\u6570\u636e\u751f\u6210 RDB\uff0c\u53d1\u9001 RDB \u5230 slave\u3002\u540e\u7eed\u547d\u4ee4\u5219\u8bb0\u5f55\u5728 repl_baklog\uff0c\u9010\u4e2a\u53d1\u9001\u7ed9slave")))),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"slave \u8282\u70b9\u7b2c\u4e00\u6b21\u8fde\u63a5 master \u8282\u70b9\u65f6\u4f1a\u6267\u884c\u5168\u91cf\u540c\u6b65")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"slave \u8282\u70b9\u65ad\u5f00\u65f6\u95f4\u592a\u4e45\uff0crepl_baklog \u4e2d\u7684 offset \u5df2\u7ecf\u88ab\u8986\u76d6\u65f6\u4e5f\u4f1a\u6267\u884c\u5168\u91cf\u540c\u6b65"))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u589e\u91cf\u540c\u6b65"),": slave\u63d0\u4ea4\u81ea\u5df1\u7684 offset \u5230 master\uff0cmaster \u83b7\u53d6 repl_baklog \u4e2d\u4ece offset \u4e4b\u540e\u7684\u547d\u4ee4\u7ed9 slave",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"slave \u8282\u70b9\u65ad\u5f00\u53c8\u6062\u590d\uff0c\u5e76\u4e14\u5728 repl_baklog \u4e2d\u80fd\u627e\u5230 offset \u65f6\u6267\u884c\u589e\u91cf\u540c\u6b65")))),(0,n.kt)("h4",{id:"5-\u4e3b\u4ece\u96c6\u7fa4\u4f18\u5316"},"5. \u4e3b\u4ece\u96c6\u7fa4\u4f18\u5316"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5728 master \u4e2d\u914d\u7f6e ",(0,n.kt)("inlineCode",{parentName:"p"},"repl-diskless-syncyes")," \u542f\u7528\u65e0\u78c1\u76d8\u590d\u5236\uff0c\u907f\u514d\u5168\u91cf\u540c\u6b65\u65f6\u7684\u78c1\u76d8 I0")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Redis \u5355\u8282\u70b9\u4e0a\u7684\u5185\u5b58\u5360\u7528\u4e0d\u8981\u592a\u5927\uff0c\u51cf\u5c11 RDB \u5bfc\u81f4\u7684\u8fc7\u591a\u78c1\u76d8 I0")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u9002\u5f53\u63d0\u9ad8 repl_baklog \u7684\u5927\u5c0f\uff0c\u53d1\u73b0 slave \u5b95\u673a\u65f6\u5c3d\u5feb\u5b9e\u73b0\u6545\u969c\u6062\u590d\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u5168\u91cf\u540c\u6b65")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u9650\u5236\u4e00\u4e2a master \u4e0a\u7684 slave \u8282\u70b9\u6570\u91cf\uff0c\u5982\u679c\u5b9e\u5728\u662f\u592a\u591a slave\uff0c\u5219\u53ef\u4ee5\u91c7\u7528",(0,n.kt)("inlineCode",{parentName:"p"},"\u4e3b-\u4ece-\u4ece"),"\u94fe\u5f0f\u7ed3\u6784\uff0c\u51cf\u5c11 master \u538b\u529b"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240716011627204",src:t(7912).Z,width:"1360",height:"407"})))),(0,n.kt)("h3",{id:"3-redis-\u54e8\u5175"},"3. Redis \u54e8\u5175"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"slave \u8282\u70b9\u5b95\u673a\u6062\u590d\u540e\u53ef\u4ee5\u627e master \u8282\u70b9\u540c\u6b65\u6570\u636e\uff0c\u90a3 master \u8282\u70b9\u5b95\u673a\u600e\u4e48\u529e?",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Redis \u63d0\u4f9b\u4e86\u54e8\u5175( Sentinel ) \u673a\u5236\u6765\u5b9e\u73b0\u4e3b\u4ece\u96c6\u7fa4\u7684\u81ea\u52a8\u6545\u969c\u6062\u590d")))),(0,n.kt)("h4",{id:"1-\u54e8\u5175\u7684\u4f5c\u7528\u548c\u539f\u7406"},"1. \u54e8\u5175\u7684\u4f5c\u7528\u548c\u539f\u7406"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4f5c\u7528"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u76d1\u63a7"),": Sentinel \u4f1a\u4e0d\u65ad\u68c0\u67e5\u60a8\u7684 master \u548c slave \u662f\u5426\u6309\u9884\u671f\u5de5\u4f5c"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u81ea\u52a8\u6545\u969c\u6062\u590d"),": \u5982\u679c master \u6545\u969c\uff0cSentinel \u4f1a\u5c06\u4e00\u4e2a slave \u63d0\u5347\u4e3a master\u3002\u5f53\u6545\u969c\u5b9e\u4f8b\u6062\u590d\u540e\u4e5f\u4ee5\u65b0\u7684 master \u4e3a\u4e3b"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u901a\u77e5"),": Sentinel \u5145\u5f53 Redis \u5ba2\u6237\u7aef\u7684",(0,n.kt)("strong",{parentName:"li"},"\u670d\u52a1\u53d1\u73b0"),"\u6765\u6e90\uff0c\u5f53\u96c6\u7fa4\u53d1\u751f\u6545\u969c\u8f6c\u79fb\u65f6\uff0c\u4f1a\u5c06\u6700\u65b0\u4fe1\u606f\u63a8\u9001\u7ed9 Redis \u7684\u5ba2\u6237\u7aef")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240716022801022",src:t(53976).Z,width:"687",height:"554"}))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u670d\u52a1\u72b6\u6001\u76d1\u63a7"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Sentinel \u57fa\u4e8e",(0,n.kt)("strong",{parentName:"li"},"\u5fc3\u8df3\u673a\u5236"),"\u76d1\u6d4b\u670d\u52a1\u72b6\u6001\uff0c\u6bcf\u9694 1 \u79d2\u5411\u96c6\u7fa4\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u53d1\u9001 ",(0,n.kt)("inlineCode",{parentName:"li"},"ping")," \u547d\u4ee4:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u4e3b\u89c2\u4e0b\u7ebf: \u5982\u679c\u67d0 sentinel \u8282\u70b9\u53d1\u73b0\u67d0\u5b9e\u4f8b\u672a\u5728\u89c4\u5b9a\u65f6\u95f4\u54cd\u5e94\uff0c\u5219\u8ba4\u4e3a\u8be5\u5b9e\u4f8b\u4e3b\u89c2\u4e0b\u7ebf\u3002(\u6709\u53ef\u80fd\u662f\u56e0\u4e3a\u7f51\u7edc\u95ee\u9898\u54cd\u5e94\u8d85\u65f6)"),(0,n.kt)("li",{parentName:"ul"},"\u5ba2\u89c2\u4e0b\u7ebf: \u82e5\u8d85\u8fc7\u6307\u5b9a\u6570\u91cf(quorum)\u7684 sentinel \u90fd\u8ba4\u4e3a\u8be5\u5b9e\u4f8b\u4e3b\u89c2\u4e0b\u7ebf\uff0c\u5219\u8be5\u5b9e\u4f8b\u5ba2\u89c2\u4e0b\u7ebf\u3002",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"quorum \u503c\u6700\u597d\u8d85\u8fc7 Sentinel \u5b9e\u4f8b\u6570\u91cf\u7684\u4e00\u534a")))))),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240716032515528",src:t(92212).Z,width:"761",height:"442"}))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u9009\u4e3e\u65b0\u7684 master"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u4e00\u65e6\u53d1\u73b0 master \u6545\u969c\uff0csentinel \u9700\u8981\u5728 salve \u4e2d\u9009\u62e9\u4e00\u4e2a\u4f5c\u4e3a\u65b0\u7684 master"),(0,n.kt)("li",{parentName:"ul"},"\u9009\u4e3e\u89c4\u5219",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u9996\u5148\u4f1a\u5224\u65ad slave \u8282\u70b9\u4e0e master \u8282\u70b9",(0,n.kt)("strong",{parentName:"li"},"\u65ad\u5f00\u65f6\u95f4\u957f\u77ed"),"\uff0c\u5982\u679c\u8d85\u8fc7\u6307\u5b9a\u503c(",(0,n.kt)("inlineCode",{parentName:"li"},"down-after-miliseconds*10"),")\u5219\u4f1a\u6392\u9664\u8be5\nslave \u8282\u70b9"),(0,n.kt)("li",{parentName:"ul"},"\u7136\u540e\u5224\u65ad slave \u8282\u70b9\u7684\u4f18\u5148\u7ea7 ",(0,n.kt)("inlineCode",{parentName:"li"},"slave-priority")," \u503c\uff0c\u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u5982\u679c\u662f 0 \u5219\u6c38\u4e0d\u53c2\u4e0e\u9009\u4e3e"),(0,n.kt)("li",{parentName:"ul"},"\u5982\u679c ",(0,n.kt)("inlineCode",{parentName:"li"},"slave-prority")," \u4e00\u6837\uff0c\u5219\u5224\u65ad slave \u8282\u70b9\u7684 offset \u503c\uff0c\u8d8a\u5927\u8bf4\u660e\u6570\u636e\u8d8a\u65b0\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8"),(0,n.kt)("li",{parentName:"ul"},"\u6700\u540e\u662f\u5224\u65ad slave \u8282\u70b9\u7684\u8fd0\u884c id \u5927\u5c0f\uff0c\u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6545\u969c\u8f6c\u79fb"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5f53\u9009\u4e2d\u4e86\u5176\u4e2d\u4e00\u4e2a slave \u4e3a\u65b0\u7684 master \u540e",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"sentinel \u7ed9\u5907\u9009\u7684 slave \u8282\u70b9\u53d1\u9001 ",(0,n.kt)("inlineCode",{parentName:"li"},"slaveof no one"),"\u547d\u4ee4\uff0c\u8ba9\u8be5\u8282\u70b9\u6210\u4e3a\u65b0\u7684 master"),(0,n.kt)("li",{parentName:"ol"},"sentinel \u7ed9\u6240\u6709\u5176\u5b83 slave \u53d1\u9001 ",(0,n.kt)("inlineCode",{parentName:"li"},"slaveof ip port"),"\u547d\u4ee4\uff0c\u8ba9\u8fd9\u4e9b slave \u6210\u4e3a\u65b0 master \u7684\u4ece\u8282\u70b9\uff0c\u5f00\u59cb\u4ece\u65b0\u7684 mastel \u4e0a\u540c\u6b65\u6570\u636e"),(0,n.kt)("li",{parentName:"ol"},"\u6700\u540e\uff0csentinel \u5c06\u6545\u969c\u8282\u70b9\u6807\u8bb0\u4e3a slave\uff08 ",(0,n.kt)("inlineCode",{parentName:"li"},"slaveof ip port")," \u547d\u4ee4\uff09\uff0c\u5f53\u6545\u969c\u8282\u70b9\u6062\u590d\u540e\u4f1a\u81ea\u52a8\u6210\u4e3a\u65b0\u7684 master \u7684 slave \u8282\u70b9")))))),(0,n.kt)("h4",{id:"2-\u642d\u5efa\u54e8\u5175sentinel\u96c6\u7fa4"},"2. \u642d\u5efa\u54e8\u5175\uff08Sentinel\uff09\u96c6\u7fa4"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u521b\u5efa\u76ee\u5f55"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir sentinel1 sentinel2 sentinel3\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u5728\u6bcf\u4e2a\u76ee\u5f55\u4e0b\u521b\u5efa sentinel.conf  \u6587\u4ef6\uff0credis \u76ee\u5f55\u4e0b\u6709 sentinel.conf \u6a21\u677f"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"echo sentinel1 sentinel2 sentinel3 | xargs -t -n 1 cp redis-6.2.14/sentinel.conf\n")),(0,n.kt)("p",{parentName:"li"},"\u4fee\u6539\u4ee5\u4e0b\u914d\u7f6e"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'# sentinel1 \u5b9e\u4f8b\u7684\u7aef\u53e3\nport 27001\n# \u58f0\u660e sentinel ip \u5730\u5740\nsentinel announce-ip 192.168.136.131\n# \u6307\u5b9a\u4e3b\u8282\u70b9\u4fe1\u606f\uff0cquorum \u4e3a 2\nsentinel monitor mymaster 192.168.136.131 8001 2\n#slave \u8282\u70b9\u4e0e master \u8282\u70b9\u65ad\u5f00\u8d85\u65f6\u65f6\u95f4\nsentinel down-after-milliseconds mymaster 5000\n# \u6545\u969c\u6062\u590d\u8d85\u65f6\u65f6\u95f4\nsentinel failover-timeout mymaster 6000\n#\u5de5\u4f5c\u76ee\u5f55\ndir "/opt/sentinel1"\n\n# sentinel2 \u5b9e\u4f8b\u7684\u7aef\u53e3\nport 27002\n# \u58f0\u660e sentinel ip \u5730\u5740\nsentinel announce-ip 192.168.136.131\n# \u6307\u5b9a\u4e3b\u8282\u70b9\u4fe1\u606f\uff0cquorum \u4e3a 2\nsentinel monitor mymaster 192.168.136.131 8001 2\n#slave \u8282\u70b9\u4e0e master \u8282\u70b9\u65ad\u5f00\u8d85\u65f6\u65f6\u95f4\nsentinel down-after-milliseconds mymaster 5000\n# \u6545\u969c\u6062\u590d\u8d85\u65f6\u65f6\u95f4\nsentinel failover-timeout mymaster 6000\n#\u5de5\u4f5c\u76ee\u5f55\ndir "/opt/sentinel2"\n\n# sentinel3 \u5b9e\u4f8b\u7684\u7aef\u53e3\nport 27003\n# \u58f0\u660e sentinel ip \u5730\u5740\nsentinel announce-ip 192.168.136.131\n# \u6307\u5b9a\u4e3b\u8282\u70b9\u4fe1\u606f\uff0cquorum \u4e3a 2\nsentinel monitor mymaster 192.168.136.131 8001 2\n#slave \u8282\u70b9\u4e0e master \u8282\u70b9\u65ad\u5f00\u8d85\u65f6\u65f6\u95f4\nsentinel down-after-milliseconds mymaster 5000\n# \u6545\u969c\u6062\u590d\u8d85\u65f6\u65f6\u95f4\nsentinel failover-timeout mymaster 6000\n#\u5de5\u4f5c\u76ee\u5f55\ndir "/opt/sentinel2"\n'))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u542f\u52a8"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"redis-sentinel sentinel1/sentinel.conf \nredis-sentinel sentinel2/sentinel.conf \nredis-sentinel sentinel3/sentinel.conf\n")))),(0,n.kt)("h4",{id:"3-redistemplate-\u7684\u54e8\u5175\u6a21\u5f0f"},"3. RedisTemplate \u7684\u54e8\u5175\u6a21\u5f0f"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5728 Sentinel \u96c6\u7fa4\u76d1\u7ba1\u4e0b\u7684 Redis \u4e3b\u4ece\u96c6\u7fa4\uff0c\u5176\u8282\u70b9\u4f1a\u56e0\u4e3a\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u800c\u53d1\u751f\u53d8\u5316\uff0cRedis \u7684\u5ba2\u6237\u7aef\u5fc5\u987b\u611f\u77e5\u8fd9\u79cd\u53d8\u5316\u53ca\u65f6\u66f4\u65b0\u8fde\u63a5\u4fe1\u606f\u3002Spring \u7684 RedisTemplate \u5e95\u5c42\u5229\u7528 lettuce \u5b9e\u73b0\u4e86\u8282\u70b9\u7684\u611f\u77e5\u548c\u81ea\u52a8\u5207\u6362")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5f15\u5165\u4f9d\u8d56"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-xml"},"        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-data-redis</artifactId>\n        </dependency>\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u914d\u7f6e Sentinel \u8282\u70b9\u4fe1\u606f"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-yaml"},"spring:\n  data:\n    redis:\n      sentinel:\n        master: mymaster\n        nodes:\n          - 192.168.136.131:27001\n          - 192.168.136.131:27002\n          - 192.168.136.131:27003\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u914d\u7f6e\u8bfb\u5199\u5206\u79bb"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-java"},"    @Bean\n    public LettuceClientConfigurationBuilderCustomizer lettuceClientConfigurationBuilderCustomizer() {\n        return clientConfigurationBuilder -> clientConfigurationBuilder.readFrom(ReadFrom.REPLICA_PREFERRED)\n    }\n")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u8fd9\u91cc\u7684 ",(0,n.kt)("inlineCode",{parentName:"li"},"ReadFrom")," \u662f\u914d\u7f6e Redis \u7684\u8bfb\u53d6\u7b56\u7565\uff0c\u662f\u4e00\u4e2a\u679a\u4e3e\uff0c\u5305\u62ec\u4e0b\u9762\u9009\u62e9:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"MASTER: \u4ece\u4e3b\u8282\u70b9\u8bfb\u53d6"),(0,n.kt)("li",{parentName:"ul"},"MASTER_PREFERRED: \u4f18\u5148\u4ecemaster\u8282\u70b9\u8bfb\u53d6\uff0cmaster\u4e0d\u53ef\u7528\u624d\u8bfb\u53d6replica"),(0,n.kt)("li",{parentName:"ul"},"REPLICA: \u4ece slave(replica) \u8282\u70b9\u8bfb\u53d6"),(0,n.kt)("li",{parentName:"ul"},"REPLICA_PREFERRED: \u4f18\u5148\u4ece slave(replica) \u8282\u70b9\u8bfb\u53d6\uff0c\u6240\u6709\u7684 slave \u90fd\u4e0d\u53ef\u7528\u624d\u8bfb\u53d6 master")))))),(0,n.kt)("h3",{id:"4-redis-\u5206\u7247\u96c6\u7fa4"},"4. Redis \u5206\u7247\u96c6\u7fa4"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4e3b\u4ece\u548c\u54e8\u5175\u53ef\u4ee5\u89e3\u51b3\u9ad8\u53ef\u7528\u3001\u9ad8\u5e76\u53d1\u8bfb\u7684\u95ee\u9898\u3002\u4f46\u662f\u4f9d\u7136\u6709\u4e24\u4e2a\u95ee\u9898\u6ca1\u6709\u89e3\u51b3"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"\u6d77\u91cf\u6570\u636e\u5b58\u50a8\u95ee\u9898"),(0,n.kt)("li",{parentName:"ol"},"\u9ad8\u5e76\u53d1\u5199\u7684\u95ee\u9898"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4f7f\u7528",(0,n.kt)("strong",{parentName:"p"},"\u5206\u7247\u96c6\u7fa4"),"\u53ef\u4ee5\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\uff0c\u5206\u7247\u96c6\u7fa4\u7279\u5f81:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u96c6\u7fa4\u4e2d\u6709\u591a\u4e2a master\uff0c\u6bcf\u4e2a master \u4fdd\u5b58\u4e0d\u540c\u6570\u636e"),(0,n.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a master \u90fd\u53ef\u4ee5\u6709\u591a\u4e2a slave \u8282\u70b9"),(0,n.kt)("li",{parentName:"ul"},"master \u4e4b\u95f4\u901a\u8fc7 ",(0,n.kt)("inlineCode",{parentName:"li"},"ping")," \u76d1\u6d4b\u5f7c\u6b64\u5065\u5eb7\u72b6\u6001"),(0,n.kt)("li",{parentName:"ul"},"\u5ba2\u6237\u7aef\u8bf7\u6c42\u53ef\u4ee5\u8bbf\u95ee\u96c6\u7fa4\u4efb\u610f\u8282\u70b9\uff0c\u6700\u7ec8\u90fd\u4f1a\u88ab\u8f6c\u53d1\u5230\u6b63\u786e\u8282\u70b9")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240716054142239",src:t(47471).Z,width:"637",height:"629"})))),(0,n.kt)("h4",{id:"1-\u642d\u5efa\u5206\u7247\u96c6\u7fa4"},"1. \u642d\u5efa\u5206\u7247\u96c6\u7fa4"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u521b\u5efa\u76ee\u5f55"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir cluster-master1 cluster-master2 cluster-master3 cluster-slave1 cluster-slave2 cluster-slave3\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4e3a\u6bcf\u4e2a\u8282\u70b9\u7f16\u5199 redis.conf \u914d\u7f6e\u6587\u4ef6"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4f8b\uff1a"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"port 8001\n# \u5f00\u542f\u96c6\u7fa4\u529f\u80fd\ncluster-enabled yes\n#\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u540d\u79f0\uff0c\u4e0d\u9700\u8981\u6211\u4eec\u521b\u5efa\uff0c\u7531redis\u81ea\u5df1\u7ef4\u62a4\ncluster-config-file /opt/cluster-master1/nodes.conf\n#\u8282\u70b9\u5fc3\u8df3\u5931\u8d25\u7684\u8d85\u65f6\u53ef\ncluster-node-timeout 5000\n#\u6301\u4e45\u5316\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\ndir /opt/cluster-master1\n# \u7ed1\u5b9a\u5730\u5740\nbind 0.0.0.0\n# \u8ba9redis\u540e\u53f0\u8fd0\u884c\ndaemonize yes\n#\u6ce8\u6d32\u7684\u5b9e\u4f8bip\nreplica-announce-ip 192.168.136.131\n#\u4fdd\u62a4\u6a21\u5f0f\nprotected-mode no\n#\u6570\u636e\u5e93\u6570\u91cf\ndatabases 1\n#\u65e5\u5fd7\nlogfile /opt/cluster-master1/run.log\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6bcf\u4e2a\u8282\u70b9\u4fee\u6539\u7aef\u53e3\u548c\u76ee\u5f55\u4f4d\u7f6e\u5373\u53ef")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u542f\u52a8"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# \u4e00\u952e\u542f\u52a8\nprintf '%s\\n' cluster-master1 cluster-master2 cluster-master3 cluster-slave1 cluster-slave2 cluster-slave3 | xargs -I{} -t redis-server {}/redis.conf\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u521b\u5efa\u96c6\u7fa4"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"redis-cli --cluster create --cluster-replicas 1 192.168.136.131:8001 192.168.136.131:8002 192.168.136.131:8003 192.168.136.131:8004 192.168.136.131:8005 192.168.136.131:8006\n")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u547d\u4ee4\u8bf4\u660e:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"redis-cli --cluster")," : \u4ee3\u8868\u96c6\u7fa4\u64cd\u4f5c\u547d\u4ee4"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"create"),": \u4ee3\u8868\u662f\u521b\u5efa\u96c6\u7fa4"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"--replicas 1"),"\u6216\u8005 ",(0,n.kt)("inlineCode",{parentName:"li"},"--cluster-replicas 1"),": \u6307\u5b9a\u96c6\u7fa4\u4e2d\u6bcf\u4e2a master \u7684\u526f\u672c\u4e2a\u6570\u4e3a 1\uff0c\u6b64\u65f6",(0,n.kt)("inlineCode",{parentName:"li"},"n = \u8282\u70b9\u603b\u6570 \xf7 (replicas +1)"),"\u5f97\u5230\u7684\u5c31\u662f master \u7684\u6570\u91cf\u3002\u56e0\u6b64\u8282\u70b9\u5217\u8868\u4e2d\u7684\u524d n \u4e2a\u5c31\u662fmaster\uff0c\u5176\u5b83\u8282\u70b9\u90fd\u662f slave \u8282\u70b9\uff0c\u968f\u673a\u5206\u914d\u5230\u4e0d\u540c master"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u67e5\u770b\u96c6\u7fa4\u72b6\u6001"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"redis-cli -p 8001 cluster nodes\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u96c6\u7fa4\u6a21\u5f0f\u8fdb\u5165 redis-cli"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"}," redis-cli -c -p port\n")))),(0,n.kt)("h4",{id:"2-\u6563\u5217\u63d2\u69fd"},"2. \u6563\u5217\u63d2\u69fd"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Redis \u4f1a\u628a\u6bcf\u4e00\u4e2a master \u8282\u70b9\u6620\u5c04\u5230 0~16383 \u5171 16384 \u4e2a\u63d2\u69fd (hashslot) \u4e0a"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240716093526112",src:t(74631).Z,width:"659",height:"169"}))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6570\u636e key \u4e0d\u662f\u4e0e\u8282\u70b9\u7ed1\u5b9a\uff0c\u800c\u662f\u4e0e\u63d2\u69fd\u7ed1\u5b9a\u3002redis \u4f1a\u6839\u636e key \u7684",(0,n.kt)("strong",{parentName:"p"},"\u6709\u6548\u90e8\u5206"),"\u8ba1\u7b97\u63d2\u69fd\u503c\uff0c\u5206\u4e24\u79cd\u60c5\u51b5:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},'key \u4e2d\u5305\u542b "{}"\uff0c\u4e14 "{}" \u4e2d\u81f3\u5c11\u5305\u542b 1 \u4e2a\u5b57\u7b26\uff0c ',(0,n.kt)("strong",{parentName:"li"},'"{}"  \u4e2d\u7684\u90e8\u5206\u662f\u6709\u6548\u90e8\u5206'),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u53ef\u4ee5\u5c06\u540c\u4e00\u7c7b\u7684\u6570\u636e\u4f7f\u7528\u76f8\u540c\u7684\u6709\u6548\u90e8\u5206\uff0c\u4ece\u800c\u5c06\u540c\u4e00\u7c7b\u6570\u636e\u56fa\u5b9a\u7684\u4fdd\u5b58\u5728\u540c\u4e00\u4e2a Redis \u5b9e\u4f8b"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},'key \u4e2d\u4e0d\u5305\u542b "{}"\uff0c\u6574\u4e2a key \u90fd\u662f\u6709\u6548\u90e8\u5206')),(0,n.kt)("li",{parentName:"ul"},"\u4f8b\u5982: key \u662f num\uff0c\u90a3\u4e48\u5c31\u6839\u636e num \u8ba1\u7b97\u63d2\u69fd\u503c\uff0ckey \u5982\u679c\u662f {itcast}num\uff0c\u5219\u6839\u636e itcast \u8ba1\u7b97\u63d2\u69fd\u503c\u3002\u8ba1\u7b97\u65b9\u5f0f\u662f\u5229\u7528 ",(0,n.kt)("strong",{parentName:"li"},"CRC16\u7b97\u6cd5"),"\u5f97\u5230\u4e00\u4e2a hash \u503c\uff0c\u7136\u540e\u5bf9 16384 \u53d6\u4f59\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u5c31\u662f slot \u503c")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240716094811565",src:t(64698).Z,width:"845",height:"275"})))),(0,n.kt)("h4",{id:"3-\u96c6\u7fa4\u4f38\u7f29"},"3. \u96c6\u7fa4\u4f38\u7f29"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"redis-cli --cluster"),"\u63d0\u4f9b\u4e86\u5f88\u591a\u64cd\u4f5c\u96c6\u7fa4\u7684\u547d\u4ee4,\uff0c\u6bd4\u5982\u6dfb\u52a0\u8282\u70b9\u3001\u5220\u9664\u8282\u70b9"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# \u67e5\u770b redis-cli --cluster \u76f8\u5173\u547d\u4ee4\nredis-cli --cluster help\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7ed9\u96c6\u7fa4\u6dfb\u52a0\u4e00\u4e2a\u8282\u70b9"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u65b0\u5efa\u4e00\u4e2a\u8282\u70b9"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir cluster-node1\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"redis.conf \u914d\u7f6e\u6587\u4ef6"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"port 8007\n# \u5f00\u542f\u96c6\u7fa4\u529f\u80fd\ncluster-enabled yes\n#\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u540d\u79f0\uff0c\u4e0d\u9700\u8981\u6211\u4eec\u521b\u5efa\uff0c\u7531redis\u81ea\u5df1\u7ef4\u62a4\ncluster-config-file /opt/cluster-node1/nodes.conf\n#\u8282\u70b9\u5fc3\u8df3\u5931\u8d25\u7684\u8d85\u65f6\u53ef\ncluster-node-timeout 5000\n#\u6301\u4e45\u5316\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\ndir /opt/cluster-node1\n# \u7ed1\u5b9a\u5730\u5740\nbind 0.0.0.0\n# \u8ba9redis\u540e\u53f0\u8fd0\u884c\ndaemonize yes\n#\u6ce8\u6d32\u7684\u5b9e\u4f8bip\nreplica-announce-ip 192.168.136.131\n#\u4fdd\u62a4\u6a21\u5f0f\nprotected-mode no\n#\u6570\u636e\u5e93\u6570\u91cf\ndatabases 1\n#\u65e5\u5fd7\nlogfile /opt/cluster-node1/run.log\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u542f\u52a8"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"redis-server cluster-node1/redis.conf\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u65b0\u8282\u70b9\u52a0\u5165\u96c6\u7fa4"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"redis-cli --cluster add-node 192.168.136.131:8007 192.168.136.131:8001\n\n# \u67e5\u770b\u96c6\u7fa4\u72b6\u6001\nredis-cli -p 8001 cluster nodes\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7ed9\u65b0\u8282\u70b9\u5206\u914d\u63d2\u69fd"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"redis-cli --cluster reshard 192.168.136.131:8001\n")))))),(0,n.kt)("h4",{id:"4-\u6545\u969c\u8f6c\u79fb"},"4. \u6545\u969c\u8f6c\u79fb"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# \u76d1\u63a7\u96c6\u7fa4\nwatch redis-cli -p 8001 cluster nodes\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5f53\u96c6\u7fa4\u4e2d\u6709\u4e00\u4e2a master \u5b95\u673a\u65f6\uff0credis \u96c6\u7fa4\u4f1a\u81ea\u52a8\u6545\u969c\u8f6c\u79fb"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"\u9996\u5148\u662f\u8be5\u5b9e\u4f8b\u4e0e\u5176\u5b83\u5b9e\u4f8b\u5931\u53bb\u8fde\u63a5"),(0,n.kt)("li",{parentName:"ol"},"\u7136\u540e\u662f\u7591\u4f3c\u5b95\u673a"),(0,n.kt)("li",{parentName:"ol"},"\u6700\u540e\u662f\u786e\u5b9a\u4e0b\u7ebf\uff0c\u81ea\u52a8\u63d0\u5347\u4e00\u4e2aslave\u4e3a\u65b0\u7684master")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240716130353734",src:t(4626).Z,width:"1460",height:"186"}))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6570\u636e\u8fc1\u79fb\uff08\u624b\u52a8\u6545\u969c\u8f6c\u79fb\uff09"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5728 slave \u8282\u70b9\u4e2d\u6267\u884c ",(0,n.kt)("inlineCode",{parentName:"p"},"cluster failover")," \u547d\u4ee4\uff0c\u53ef\u4ee5\u624b\u52a8\u8ba9\u96c6\u7fa4\u4e2d\u7684\u67d0\u4e2a master \u5b95\u673a\uff0c slave \u8282\u70b9\u5207\u6362\u4e3a master \u8282\u70b9\uff0c\u5b9e\u73b0\u65e0\u611f\u77e5\u7684\u6570\u636e\u8fc1\u79fb"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240716131234525",src:t(79067).Z,width:"609",height:"539"}))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u624b\u52a8\u7684 ",(0,n.kt)("inlineCode",{parentName:"p"},"Failover")," \u652f\u6301\u4e09\u79cd\u4e0d\u540c\u6a21\u5f0f"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"\u7f3a\u7701: \u9ed8\u8ba4\u7684\u6d41\u7a0b\uff0c\u5982\u56fe1~6\u6b65"),(0,n.kt)("li",{parentName:"ol"},"force: \u7701\u7565\u4e86\u5bf9 offset \u7684\u4e00\u81f4\u6027\u6821\u9a8c"),(0,n.kt)("li",{parentName:"ol"},"takeover: \u76f4\u63a5\u6267\u884c\u7b2c 5 \u6b65\uff0c\u5ffd\u7565\u6570\u636e\u4e00\u81f4\u6027\u3001\u5ffd\u7565 master \u72b6\u6001\u548c\u5176\u5b83 master \u7684\u610f\u89c1")))))),(0,n.kt)("h4",{id:"5-redistemplate-\u8bbf\u95ee\u5206\u7247\u96c6\u7fa4"},"5. RedisTemplate \u8bbf\u95ee\u5206\u7247\u96c6\u7fa4"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"RedisTemplate \u5e95\u5c42\u540c\u6837\u57fa\u4e8e lettuce \u5b9e\u73b0\u4e86\u5206\u7247\u96c6\u7fa4\u7684\u652f\u6301\uff0c\u800c\u4f7f\u7528\u7684\u6b65\u9aa4\u4e0e\u54e8\u5175\u6a21\u5f0f\u57fa\u672c\u4e00\u81f4"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5f15\u5165\u4f9d\u8d56"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-xml"},"        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-data-redis</artifactId>\n        </dependency>\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u914d\u7f6e\u5206\u7247\u96c6\u7fa4\u5730\u5740"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-yaml"},"spring:\n  data:\n    redis:\n      cluster:\n        nodes:\n          - 192.168.136.131:8001\n          - 192.168.136.131:8002\n          - 192.168.136.131:8003\n          - 192.168.136.131:8004\n          - 192.168.136.131:8005\n          - 192.168.136.131:8006\n          - 192.168.136.131:8007\n")))))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u914d\u7f6e\u8bfb\u5199\u5206\u79bb"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-java"},"    @Bean\n    public LettuceClientConfigurationBuilderCustomizer lettuceClientConfigurationBuilderCustomizer() {\n        return clientConfigurationBuilder -> clientConfigurationBuilder.readFrom(ReadFrom.REPLICA_PREFERRED)\n    }\n")))),(0,n.kt)("h2",{id:"\u4e8c\u591a\u7ea7\u7f13\u5b58"},"\u4e8c\u3001\u591a\u7ea7\u7f13\u5b58"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4f20\u7edf\u7684\u7f13\u5b58\u7b56\u7565\u4e00\u822c\u662f\u8bf7\u6c42\u5230\u8fbe Tomcat \u540e\uff0c\u5148\u67e5\u8be2 Redis\uff0c\u5982\u679c\u672a\u547d\u4e2d\u5219\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u5b58\u5728\u4e0b\u9762\u7684\u95ee\u9898"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u8bf7\u6c42\u8981\u7ecf\u8fc7 Tomcat \u5904\u7406\uff0cTomcat \u7684\u6027\u80fd\u6210\u4e3a\u6574\u4e2a\u7cfb\u7edf\u7684\u74f6\u9888"),(0,n.kt)("li",{parentName:"ul"},"Redis \u7f13\u5b58\u5931\u6548\u65f6\uff0c\u4f1a\u5bf9\u6570\u636e\u5e93\u4ea7\u751f\u51b2\u51fb")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240716134021495",src:t(38381).Z,width:"1060",height:"341"}))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u591a\u7ea7\u7f13\u5b58\u5c31\u662f\u5145\u5206\u5229\u7528\u8bf7\u6c42\u5904\u7406\u7684\u6bcf\u4e2a\u73af\u8282\uff0c\u5206\u522b\u6dfb\u52a0\u7f13\u5b58\uff0c\u51cf\u8f7b Tomcat \u538b\u529b\uff0c\u63d0\u5347\u670d\u52a1\u6027\u80fd"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240716134304829",src:t(41530).Z,width:"1346",height:"346"})))),(0,n.kt)("h3",{id:"1--jvm-\u8fdb\u7a0b\u7f13\u5b58"},"1.  JVM \u8fdb\u7a0b\u7f13\u5b58"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7f13\u5b58\u5728\u65e5\u5e38\u5f00\u53d1\u4e2d\u542f\u52a8\u81f3\u5173\u91cd\u8981\u7684\u4f5c\u7528\uff0c\u7531\u4e8e\u662f",(0,n.kt)("strong",{parentName:"p"},"\u5b58\u50a8\u5728\u5185\u5b58"),"\u4e2d\uff0c\u6570\u636e\u7684\u8bfb\u53d6\u901f\u5ea6\u662f\u975e\u5e38\u5feb\u7684\uff0c\u80fd\u5927\u91cf\u51cf\u5c11\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u51cf\u5c11\u6570\u636e\u5e93\u7684\u538b\u529b\u3002\u6211\u4eec\u628a\u7f13\u5b58\u5206\u4e3a\u4e24\u7c7b:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5206\u5e03\u5f0f\u7f13\u5b58\uff0c\u4f8b\u5982 Redis",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u4f18\u70b9: \u5b58\u50a8\u5bb9\u91cf\u66f4\u5927\u3001\u53ef\u9760\u6027\u66f4\u597d\u3001\u53ef\u4ee5\u5728\u96c6\u7fa4\u95f4\u5171\u4eab"),(0,n.kt)("li",{parentName:"ul"},"\u7f3a\u70b9: \u8bbf\u95ee\u7f13\u5b58\u6709\u7f51\u7edc\u5f00\u9500"),(0,n.kt)("li",{parentName:"ul"},"\u573a\u666f: \u7f13\u5b58\u6570\u636e\u91cf\u8f83\u5927\u3001\u53ef\u9760\u6027\u8981\u6c42\u8f83\u9ad8\u3001\u9700\u8981\u5728\u96c6\u7fa4\u95f4\u5171\u4eab"))),(0,n.kt)("li",{parentName:"ul"},"\u8fdb\u7a0b\u672c\u5730\u7f13\u5b58\uff0c\u4f8b\u5982 HashMap\u3001GuavaCache",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u4f18\u70b9: \u8bfb\u53d6\u672c\u5730\u5185\u5b58\uff0c\u6ca1\u6709\u7f51\u7edc\u5f00\u9500\uff0c\u901f\u5ea6\u66f4\u5feb"),(0,n.kt)("li",{parentName:"ul"},"\u7f3a\u70b9: \u5b58\u50a8\u5bb9\u91cf\u6709\u9650\u3001\u53ef\u9760\u6027\u8f83\u4f4e\u3001\u65e0\u6cd5\u5171\u4eab"),(0,n.kt)("li",{parentName:"ul"},"\u573a\u666f: \u6027\u80fd\u8981\u6c42\u8f83\u9ad8\uff0c\u7f13\u5b58\u6570\u636e\u91cf\u8f83\u5c0f"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Caffeine \u662f\u4e00\u4e2a\u57fa\u4e8e Java8 \u5f00\u53d1\u7684\uff0c\u63d0\u4f9b\u4e86\u8fd1\u4e4e\u6700\u4f73\u547d\u4e2d\u7387\u7684\u9ad8\u6027\u80fd\u7684\u672c\u5730\u7f13\u5b58\u5e93\u3002\u76ee\u524d Spring \u5185\u90e8\u7684\u7f13\u5b58\u4f7f\u7528\u7684\u5c31\u662f Caffeine"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"GitHub\u5730\u5740: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/ben-manes/caffeine"},"ben-manes/caffeine: A high performance caching library for Java (github.com)"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5f15\u5165\u4f9d\u8d56"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-xml"},"        <dependency>\n            <groupId>com.github.ben-manes.caffeine</groupId>\n            <artifactId>caffeine</artifactId>\n            <version>3.1.8</version>\n        </dependency>\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u914d\u7f6e Caffeine"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Caffeine \u63d0\u4f9b\u4e86\u4e09\u79cd\u7f13\u5b58\u9a71\u9010\u7b56\u7565\uff0c\u6587\u6863\uff1a",(0,n.kt)("a",{parentName:"li",href:"https://github.com/ben-manes/caffeine/wiki/Eviction-zh-CN"},"Eviction zh CN \xb7 ben-manes/caffeine Wiki (github.com)"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"\u57fa\u4e8e\u5bb9\u91cf: \u8bbe\u7f6e\u7f13\u5b58\u7684\u6570\u91cf\u4e0a\u9650"),(0,n.kt)("li",{parentName:"ol"},"\u57fa\u4e8e\u65f6\u95f4: \u8bbe\u7f6e\u7f13\u5b58\u7684\u6709\u6548\u65f6\u95f4"),(0,n.kt)("li",{parentName:"ol"},"\u57fa\u4e8e\u5f15\u7528: \u8bbe\u7f6e\u7f13\u5b58\u4e3a\u8f6f\u5f15\u7528\u6216\u5f31\u5f15\u7528\uff0c\u5229\u7528GC\u6765\u56de\u6536\u7f13\u5b58\u6570\u636e\u3002\u6027\u80fd\u8f83\u5dee\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528"))),(0,n.kt)("li",{parentName:"ul"},"\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5f53\u4e00\u4e2a\u7f13\u5b58\u5143\u7d20\u8fc7\u671f\u7684\u65f6\u5019\uff0cCaffeine \u4e0d\u4f1a\u81ea\u52a8\u7acb\u5373\u5c06\u5176\u6e05\u7406\u548c\u9a71\u9010\u3002\u800c\u662f\u5728\u4e00\u6b21\u8bfb\u6216\u5199\u64cd\u4f5c\u540e\uff0c\u6216\u8005\u5728\n\u7a7a\u95f2\u65f6\u95f4\u5b8c\u6210\u5bf9\u5931\u6548\u6570\u636e\u7684\u9a71\u9010")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-java"},"@Configuration\npublic class CaffeineConfig {\n\n    @Bean\n    public Cache<String, Object> caffeineCache()\n    {\n        return Caffeine.newBuilder() \n            .expireAfterWrite(10, TimeUnit.MINUTES) //\u8bbe\u7f6e\u7f13\u5b58\u6709\u6548\u671f\uff0c\u4ece\u6700\u540e\u4e00\u6b21\u5199\u5165\u5f00\u59cb\u8ba1\u65f6\n            .maximumSize(10_000) //\u8bbe\u7f6e\u7f13\u5b58\u5927\u5c0f\u4e0a\u9650\n            .build();\n    }\n}\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6d4b\u8bd5"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-java"},'    @Autowired\n    private Cache caffeineCache;\n\n    @Test\n    void testCaffeine(){\n        // \u5b58\u6570\u636e\n        caffeineCache.put("key", "value");\n        //\u53d6\u6570\u636e\n        System.out.println(caffeineCache.getIfPresent("key"));\n\n        // \u5982\u679c\u7f13\u5b58\u4e2d\u6ca1\u6709 key \u5bf9\u5e94\u7684\u6570\u636e\uff0c\u5219\u8c03\u7528\u56de\u8c03\u51fd\u6570\u83b7\u53d6\u6570\u636e\uff08\u53ef\u4ee5\u4ece\u6570\u636e\u5e93\u67e5\u8be2\uff09\n        Object object = caffeineCache.get("key1", k -> "dbValue");\n        System.out.println(object);\n    }\n')))))),(0,n.kt)("h3",{id:"2-lua-\u811a\u672c\u8bed\u8a00"},"2. Lua \u811a\u672c\u8bed\u8a00"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5728 NGINX \u4e2d\u53ef\u4ee5\u4f7f\u7528 Lua \u811a\u672c\u8bed\u8a00\u7f16\u5199\u4e1a\u52a1\u4ee3\u7801\u8fdb\u884c\u5f00\u53d1")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Lua \u662f\u4e00\u79cd\u8f7b\u91cf\u5c0f\u5de7\u7684\u811a\u672c\u8bed\u8a00\uff0c\u7528\u6807\u51c6C\u8bed\u8a00\u7f16\u5199\u5e76\u4ee5\u6e90\u4ee3\u7801\u5f62\u5f0f\u5f00\u653e\uff0c\u5176\u8bbe\u8ba1\u76ee\u7684\u662f\u4e3a\u4e86\u5d4c\u5165\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u4ece\u800c\u4e3a\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u7075\u6d3b\u7684\u6269\u5c55\u548c\u5b9a\u5236\u529f\u80fd\u3002\u5b98\u7f51: ",(0,n.kt)("a",{parentName:"p",href:"https://www.lua.org/"},"The Programming Language Lua"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"centos \u4e2d\u81ea\u5e26 lua \u8fd0\u884c\u73af\u5883"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u521b\u5efa hello.lua"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-lua"},'print("hello,lua")\n'))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u8fd0\u884c hello.lua"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"lua hello.lua\n"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Lua \u5165\u95e8 \uff1a",(0,n.kt)("a",{parentName:"p",href:"https://www.runoob.com/lua/lua-tutorial.html"},"Lua \u6559\u7a0b | \u83dc\u9e1f\u6559\u7a0b (runoob.com)")))),(0,n.kt)("h3",{id:"3-\u591a\u7ea7\u7f13\u5b58"},"3. \u591a\u7ea7\u7f13\u5b58"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image-20240717163913445",src:t(84125).Z,width:"1557",height:"739"})),(0,n.kt)("h4",{id:"openresty"},"OpenResty"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"OpenResty \u662f\u4e00\u4e2a\u57fa\u4e8e Nginx \u7684\u9ad8\u6027\u80fd Web \u5e73\u53f0\uff0c\u7528\u4e8e\u65b9\u4fbf\u5730\u642d\u5efa\u80fd\u591f\u5904\u7406\u8d85\u9ad8\u5e76\u53d1\u3001\u6269\u5c55\u6027\u6781\u9ad8\u7684\u52a8\u6001 Web \u5e94\u7528 Web \u670d\u52a1\u548c\u52a8\u6001\u7f51\u5173\u3002\u5177\u5907\u4e0b\u5217\u7279\u70b9:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5177\u5907 Nginx \u7684\u5b8c\u6574\u529f\u80fd"),(0,n.kt)("li",{parentName:"ul"},"\u57fa\u4e8e Lua \u8bed\u8a00\u8fdb\u884c\u6269\u5c55\uff0c\u96c6\u6210\u4e86\u5927\u91cf\u7cbe\u826f\u7684 Lua \u5e93\u3001\u7b2c\u4e09\u65b9\u6a21\u5757"),(0,n.kt)("li",{parentName:"ul"},"\u5141\u8bb8\u4f7f\u7528Lua\u81ea\u5b9a\u4e49\u4e1a\u52a1\u903b\u8f91\u3001\u81ea\u5b9a\u4e49\u5e93"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5b98\u65b9\u7f51\u7ad9: ",(0,n.kt)("a",{parentName:"p",href:"https://openresty.org/cn/"},"OpenResty\xae - \u5f00\u6e90\u5b98\u65b9\u7ad9"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u53ef\u4ee5\u4f7f\u7528 OpenResty + lua \u5b9e\u73b0\u5bf9\u8bf7\u6c42\u7684\u5904\u7406\u53ca\u4e1a\u52a1\u7684\u5f00\u53d1\uff0c\u5982\u67e5 Redis\u3001\u67e5\u6570\u636e\u5e93\u3001\u67e5 Tomcat\u7b49"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"OpenResty \u63d0\u4f9b\u4e86\u5404\u79cd API \u7528\u6765\u83b7\u53d6\u4e0d\u540c\u7c7b\u578b\u7684\u8bf7\u6c42\u53c2\u6570"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-lua"},"-- \u5728 lua \u811a\u672c\u4e2d\u4f7f\u7528 NGINX \u53d1\u8bf7\u6c42\u7684 api\nngx.local.captuer()\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"OpenResty \u76ee\u5f55\u4e0b\u7684 lualib \u76ee\u5f55\u5b58\u653e\u4e86\u76f8\u5173\u7684\u5e93\uff0c\u9700\u8981\u5728 nginx.conf  \u7684 http \u914d\u7f6e\u5feb\u4e0b\u914d\u7f6e\u5305\u8def\u5f84"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-nginx"},'#lua \u6a21\u5757\nlua_package_path "/usr/local/openresty/lualib/?.lua;;"\n#c\u6a21\u5757\nlua_package_cpath "/usr/local/openresty/lualib/?.so;;";\n')),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u64cd\u4f5c Redis \u7684\u6a21\u5757",(0,n.kt)("inlineCode",{parentName:"li"},"lualib/resty/redis.lua"),"\uff0c"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"NGINX \u652f\u6301\u7684\u8d1f\u8f7d\u5747\u8861\u7b97\u6cd5"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"\u8f6e\u8be2\uff08Round Robin\uff09"),"\uff1a"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u7b97\u6cd5\uff0c\u6309\u7167\u987a\u5e8f\u5c06\u8bf7\u6c42\u9010\u4e2a\u5206\u914d\u7ed9\u4e0d\u540c\u7684\u540e\u7aef\u670d\u52a1\u5668\u3002\u6bcf\u4e2a\u670d\u52a1\u5668\u7684\u8bf7\u6c42\u91cf\u5927\u81f4\u76f8\u540c\u3002")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"\u6743\u91cd\u8f6e\u8be2\uff08Weighted Round Robin\uff09"),"\uff1a"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5728\u8f6e\u8be2\u7684\u57fa\u7840\u4e0a\uff0c\u4e3a\u6bcf\u4e2a\u540e\u7aef\u670d\u52a1\u5668\u5206\u914d\u6743\u91cd\u3002\u6743\u91cd\u8d8a\u9ad8\uff0c\u63a5\u6536\u5230\u7684\u8bf7\u6c42\u6570\u8d8a\u591a\u3002\u9002\u7528\u4e8e\u540e\u7aef\u670d\u52a1\u5668\u6027\u80fd\u4e0d\u5747\u7684\u60c5\u51b5\u3002"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-nginx"},"upstream backend {\n    server backend1.example.com weight=3;\n    server backend2.example.com weight=1;\n}\n")))),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"\u6700\u5c11\u8fde\u63a5\uff08Least Connections\uff09"),"\uff1a"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5c06\u65b0\u8bf7\u6c42\u5206\u914d\u7ed9\u5f53\u524d\u8fde\u63a5\u6570\u6700\u5c11\u7684\u670d\u52a1\u5668\uff0c\u9002\u7528\u4e8e\u5904\u7406\u65f6\u95f4\u957f\u77ed\u4e0d\u4e00\u7684\u8bf7\u6c42\u3002"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-nginx"},"upstream backend {\n    least_conn;\n    server backend1.example.com;\n    server backend2.example.com;\n}\n")))),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"\u6700\u5c11\u65f6\u95f4\uff08Least Time\uff09"),"\uff1a"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5c06\u65b0\u8bf7\u6c42\u5206\u914d\u7ed9\u5e73\u5747\u54cd\u5e94\u65f6\u95f4\u6700\u77ed\u4e14\u6d3b\u52a8\u8fde\u63a5\u6570\u6700\u5c11\u7684\u670d\u52a1\u5668\u3002\u9002\u7528\u4e8e\u9700\u8981\u8003\u8651\u670d\u52a1\u5668\u54cd\u5e94\u65f6\u95f4\u7684\u573a\u666f\u3002")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"IP\u54c8\u5e0c\uff08IP Hash\uff09"),"\uff1a"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6839\u636e\u5ba2\u6237\u7aef IP \u5730\u5740\u7684\u54c8\u5e0c\u503c\u5206\u914d\u8bf7\u6c42\uff0c\u4f7f\u540c\u4e00\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u603b\u662f\u8f6c\u53d1\u5230\u540c\u4e00\u53f0\u540e\u7aef\u670d\u52a1\u5668\u3002\u9002\u7528\u4e8e\u9700\u8981\u4f1a\u8bdd\u4fdd\u6301\u7684\u60c5\u51b5\u3002"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-nginx"},"upstream backend {\n    ip_hash;\n    server backend1.example.com;\n    server backend2.example.com;\n}\n")))),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"URI\u54c8\u5e0c\uff08URI Hash\uff09"),"\uff1a"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6839\u636e\u8bf7\u6c42 URI \u7684\u54c8\u5e0c\u503c\u5206\u914d\u8bf7\u6c42\uff0c\u4f7f\u76f8\u540c URI \u7684\u8bf7\u6c42\u603b\u662f\u8f6c\u53d1\u5230\u540c\u4e00\u53f0\u540e\u7aef\u670d\u52a1\u5668\u3002\u9002\u7528\u4e8e\u9700\u8981\u5c06\u76f8\u540c\u8d44\u6e90\u8bf7\u6c42\u5206\u914d\u7ed9\u540c\u4e00\u670d\u52a1\u5668\u7684\u60c5\u51b5\u3002"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-nginx"},"upstream backend {\n    hash $request_uri;\n    server backend1.example.com;\n    server backend2.example.com;\n}\n")))),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"\u516c\u5e73\uff08Fair\uff09"),"\uff1a"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u6839\u636e\u540e\u7aef\u670d\u52a1\u5668\u7684\u54cd\u5e94\u65f6\u95f4\u6765\u5206\u914d\u8bf7\u6c42\uff0c\u54cd\u5e94\u65f6\u95f4\u77ed\u7684\u670d\u52a1\u5668\u5206\u914d\u66f4\u591a\u8bf7\u6c42\u3002\u9700\u8981\u7b2c\u4e09\u65b9\u6a21\u5757 ",(0,n.kt)("inlineCode",{parentName:"li"},"upstream_fair"),"\u3002")))),(0,n.kt)("h4",{id:"\u51b7\u542f\u52a8\u4e0e\u7f13\u5b58\u9884\u70ed"},"\u51b7\u542f\u52a8\u4e0e\u7f13\u5b58\u9884\u70ed"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"\u51b7\u542f\u52a8")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u670d\u52a1\u521a\u521a\u542f\u52a8\u65f6\uff0cRedis \u4e2d\u5e76\u6ca1\u6709\u7f13\u5b58\uff0c\u5982\u679c\u6240\u6709\u6570\u636e\u90fd\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u65f6\u6dfb\u52a0\u7f13\u5b58\uff0c\u53ef\u80fd\u4f1a\u7ed9\u6570\u636e\u5e93\u5e26\u6765\u8f83\u5927\u538b\u529b"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"\u7f13\u5b58\u9884\u70ed")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u5927\u6570\u636e\u7edf\u8ba1\u7528\u6237\u8bbf\u95ee\u7684\u70ed\u70b9\u6570\u636e\uff0c\u5728\u9879\u76ee\u542f\u52a8\u65f6\u5c06\u8fd9\u4e9b\u70ed\u70b9\u6570\u636e\u63d0\u524d\u67e5\u8be2\u5e76\u4fdd\u5b58\u5230 Redis \u4e2d")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5b9e\u73b0\u6570\u636e\u9884\u70ed"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5b9e\u73b0",(0,n.kt)("inlineCode",{parentName:"li"},"InitializingBean")," \u63a5\u53e3\u4e2d ",(0,n.kt)("inlineCode",{parentName:"li"},"afterPropertiesSet()"),"\uff0c\u5728\u5b9e\u73b0\u7c7b bean \u52a0\u8f7d\u5b8c\u4e14\u4f9d\u8d56\u6ce8\u5165\u5b8c\u6210\u540e\u5c31\u4f1a\u6267\u884c ",(0,n.kt)("inlineCode",{parentName:"li"},"afterPropertiesSet()"),"\u65b9\u6cd5\uff0c\u56e0\u6b64\u53ef\u4ee5\u5728\u8be5\u65b9\u6cd5\u4e2d\u7f16\u5199\u6570\u636e\u7f13\u5b58\u903b\u8f91\uff0c\u8fbe\u5230\u5728\u9879\u76ee\u542f\u52a8\u65f6\u5c06\u6570\u636e\u7f13\u5b58\u5230 Redis")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-java"},"@Component\npublic class RedisHandler implements InitializingBean {\n    @Autowired\n    private StringRedisTemplate stringRedisTemplate;\n    @Override\n    public void afterPropertiesSet() throws Exception {\n        //\u7f16\u5199\u6570\u636e\u9884\u70ed\u903b\u8f91\n    }\n}\n")))))),(0,n.kt)("h4",{id:"nginx-\u672c\u5730\u7f13\u5b58"},"NGINX \u672c\u5730\u7f13\u5b58"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"OpenResty \u4e3a Nginx \u63d0\u4f9b\u4e86shard dict \u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u5728 nginx \u7684\u591a\u4e2a worker \u4e4b\u95f4\u5171\u4eab\u6570\u636e\uff0c\u5b9e\u73b0\u7f13\u5b58\u529f\u80fd"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u9700\u8981\u5728 nginx.conf  \u7684 http \u914d\u7f6e\u5feb\u4e0b\u914d\u7f6e\u5f00\u542f shard dict \u529f\u80fd"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-nginx"},"# \u6dfb\u52a0\u5171\u4eab\u8bcd\u5178\uff0c\u672c\u5730\u7f13\u5b58,\u540d\u79f0\u53eb\u505a: item_cache\uff0c\u5927\u5c0f150m\nlua_shared_dict item_cache 150m;\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5728 lua \u811a\u672c\u4e2d\u4f7f\u7528\u5171\u4eab\u8bcd\u5178"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-lua"},"-- \u83b7\u53d6\u672c\u5730\u7f13\u5b58\u5bf9\u8c61\nlocal item_cache = ngx.shared.item_cache\n--\u5b58\u50a8\uff0c\u6307\u5b9akey\u3001value\u3001\u8fc7\u671f\u65f6\u95f4\uff0c\u5355\u4f4ds\uff0c\u9ed8\u8ba4\u4e3a\u4ee3\u8868\u6c38\u4e0d\u8fc7\u671f\nitem_cache:set('key','value'\uff0c1000)\n-- \u8bfb\u53d6\nlocal val=item_cache:get('key')\n")))))),(0,n.kt)("h3",{id:"4-\u7f13\u5b58\u540c\u6b65\u7b56\u7565"},"4. \u7f13\u5b58\u540c\u6b65\u7b56\u7565"),(0,n.kt)("h4",{id:"\u6570\u636e\u540c\u6b65\u7b56\u7565"},"\u6570\u636e\u540c\u6b65\u7b56\u7565"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7f13\u5b58\u6570\u636e\u540c\u6b65\u7684\u5e38\u89c1\u65b9\u5f0f\u6709\u4e09\u79cd"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u8bbe\u7f6e\u6709\u6548\u671f: \u7ed9\u7f13\u5b58\u8bbe\u7f6e\u6709\u6548\u671f\uff0c\u5230\u671f\u540e\u81ea\u52a8\u5220\u9664\u3002\u518d\u6b21\u67e5\u8be2\u65f6\u66f4\u65b0"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u4f18\u52bf: \u7b80\u5355\u3001\u65b9\u4fbf"),(0,n.kt)("li",{parentName:"ul"},"\u7f3a\u70b9: \u65f6\u6548\u6027\u5dee\uff0c\u7f13\u5b58\u8fc7\u671f\u4e4b\u524d\u53ef\u80fd\u4e0d\u4e00\u81f4\u573a\u666f:\u66f4\u65b0\u9891\u7387\u8f83\u4f4e\uff0c\u65f6\u6548\u6027\u8981\u6c42\u4f4e\u7684\u4e1a\u52a1"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u540c\u6b65\u53cc\u5199: \u5728\u4fee\u6539\u6570\u636e\u5e93\u7684\u540c\u65f6\uff0c\u76f4\u63a5\u4fee\u6539\u7f13\u5b58"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u4f18\u52bf: \u65f6\u6548\u6027\u5f3a\uff0c\u7f13\u5b58\u4e0e\u6570\u636e\u5e93\u5f3a\u4e00\u81f4"),(0,n.kt)("li",{parentName:"ul"},"\u7f3a\u70b9: \u6709\u4ee3\u7801\u4fb5\u5165\uff0c\u8026\u5408\u5ea6\u9ad8;\u573a\u666f:\u5bf9\u4e00\u81f4\u6027\u3001\u65f6\u6548\u6027\u8981\u6c42\u8f83\u9ad8\u7684\u7f13\u5b58\u6570\u636e"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u5f02\u6b65\u901a\u77e5: \u4fee\u6539\u6570\u636e\u5e93\u65f6\u53d1\u9001\u4e8b\u4ef6\u901a\u77e5\uff0c\u76f8\u5173\u670d\u52a1\u76d1\u542c\u5230\u901a\u77e5\u540e\u4fee\u6539\u7f13\u5b58\u6570\u636e\u4f18\u52bf:\u4f4e\u8026\u5408\uff0c\u53ef\u4ee5\u540c\u65f6\u901a\u77e5\u591a\u4e2a\u7f13\u5b58\u670d\u52a1"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7f3a\u70b9: \u65f6\u6548\u6027\u4e00\u822c\uff0c\u53ef\u80fd\u5b58\u5728\u4e2d\u95f4\u4e0d\u4e00\u81f4\u72b6\u6001")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u573a\u666f: \u65f6\u6548\u6027\u8981\u6c42\u4e00\u822c\uff0c\u6709\u591a\u4e2a\u670d\u52a1\u9700\u8981\u540c\u6b65")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u57fa\u4e8e MQ \u7684\u5f02\u6b65\u901a\u77e5"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240717152142349",src:t(15629).Z,width:"1355",height:"636"}))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u57fa\u4e8e Canal \u7684\u5f02\u6b65\u901a\u77e5"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240717152343368",src:t(29192).Z,width:"1222",height:"490"})))))))),(0,n.kt)("h4",{id:"canal"},"Canal"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Canal\uff0c\u8bd1\u610f\u4e3a\u6c34\u9053/\u7ba1\u9053/\u6c9f\u6e20\uff0ccanal \u662f\u963f\u91cc\u5df4\u5df4\u65d7\u4e0b\u7684\u4e00\u6b3e\u5f00\u6e90\u9879\u76ee\uff0c\u57fa\u4e8eJava \u5f00\u53d1\u3002"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u529f\u80fd\uff1a\u57fa\u4e8e\u6570\u636e\u5e93\u589e\u91cf\u65e5\u5fd7\u89e3\u6790\uff0c\u63d0\u4f9b\u589e\u91cf\u6570\u636e\u8ba2\u9605\u548c\u6d88\u8d39"),(0,n.kt)("li",{parentName:"ul"},"GitHub:",(0,n.kt)("a",{parentName:"li",href:"https://github.com/alibaba/canal"},"alibaba/canal: \u963f\u91cc\u5df4\u5df4 MySQL binlog \u589e\u91cf\u8ba2\u9605&\u6d88\u8d39\u7ec4\u4ef6 (github.com)"))),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"img",src:t(85889).Z,width:"1361",height:"717"})))),(0,n.kt)("h5",{id:"\u5de5\u4f5c\u539f\u7406"},"\u5de5\u4f5c\u539f\u7406"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"MySQL \u4e3b\u5907\u590d\u5236\u539f\u7406")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"MySQL master \u5c06\u6570\u636e\u53d8\u66f4\u5199\u5165\u4e8c\u8fdb\u5236\u65e5\u5fd7( binary log, \u5176\u4e2d\u8bb0\u5f55\u53eb\u505a\u4e8c\u8fdb\u5236\u65e5\u5fd7\u4e8b\u4ef6binary log events\uff0c\u53ef\u4ee5\u901a\u8fc7 show binlog events \u8fdb\u884c\u67e5\u770b)"),(0,n.kt)("li",{parentName:"ul"},"MySQL slave \u5c06 master \u7684 binary log events \u62f7\u8d1d\u5230\u5b83\u7684\u4e2d\u7ee7\u65e5\u5fd7(relay log)"),(0,n.kt)("li",{parentName:"ul"},"MySQL slave \u91cd\u653e relay log \u4e2d\u4e8b\u4ef6\uff0c\u5c06\u6570\u636e\u53d8\u66f4\u53cd\u6620\u5b83\u81ea\u5df1\u7684\u6570\u636e"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"canal \u5de5\u4f5c\u539f\u7406")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"canal \u6a21\u62df MySQL slave \u7684\u4ea4\u4e92\u534f\u8bae\uff0c\u4f2a\u88c5\u81ea\u5df1\u4e3a MySQL slave \uff0c\u5411 MySQL master \u53d1\u9001dump \u534f\u8bae"),(0,n.kt)("li",{parentName:"ul"},"MySQL master \u6536\u5230 dump \u8bf7\u6c42\uff0c\u5f00\u59cb\u63a8\u9001 binary log \u7ed9 slave (\u5373 canal )"),(0,n.kt)("li",{parentName:"ul"},"canal \u89e3\u6790 binary log \u5bf9\u8c61(\u539f\u59cb\u4e3a byte \u6d41)")))),(0,n.kt)("h5",{id:"\u5b89\u88c5-canal"},"\u5b89\u88c5 Canal"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5177\u4f53\u5b89\u88c5\u53ef\u53c2\u8003\uff1a",(0,n.kt)("a",{parentName:"li",href:"https://github.com/alibaba/canal/wiki/QuickStart"},"QuickStart \xb7 alibaba/canal Wiki (github.com)"))),(0,n.kt)("h5",{id:"canal-\u5ba2\u6237\u7aef"},"Canal \u5ba2\u6237\u7aef"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Canal \u63d0\u4f9b\u4e86\u5404\u79cd\u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u5f53 Canal \u76d1\u542c\u5230 binlog \u53d8\u5316\u65f6\uff0c\u4f1a\u901a\u77e5 Canal \u7684\u5ba2\u6237\u7aef"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240717155240894",src:t(55177).Z,width:"1472",height:"531"}))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7531\u4e8e Canal \u539f\u751f\u7684\u5ba2\u6237\u7aef api \u4f7f\u7528\u8d77\u6765\u4e0d\u65b9\u4fbf\uff0c\u53ef\u4ee5\u4f7f\u7528\u7b2c\u4e09\u65b9\u53ef\u4ee5\u7684 Canal \u5ba2\u6237\u7aef"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"canal-starter: ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/NormanGyllenhaal/canal-client"},"NormanGyllenhaal/canal-client: spring boot canal starter \u6613\u7528\u7684canal \u5ba2\u6237\u7aef canal client (github.com)")),(0,n.kt)("li",{parentName:"ul"},"\u5177\u4f53\u4f7f\u7528\u53ef\u53c2\u8003\uff1a",(0,n.kt)("a",{parentName:"li",href:"https://github.com/NormanGyllenhaal/canal-client/tree/master/canal-example/src"},"canal-client/canal-example/src at master \xb7 NormanGyllenhaal/canal-client (github.com)"))))),(0,n.kt)("h2",{id:"\u4e09redis-\u6700\u4f73\u5b9e\u8df5\u4f7f\u7528\u7ecf\u9a8c"},"\u4e09\u3001Redis \u6700\u4f73\u5b9e\u8df5\uff08\u4f7f\u7528\u7ecf\u9a8c\uff09"),(0,n.kt)("h3",{id:"redis-\u952e\u503c\u8bbe\u8ba1"},"Redis \u952e\u503c\u8bbe\u8ba1"),(0,n.kt)("h4",{id:"\u4f18\u96c5\u7684key\u7ed3\u6784"},"\u4f18\u96c5\u7684key\u7ed3\u6784"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Redis \u7684 Key \u867d\u7136\u53ef\u4ee5\u81ea\u5b9a\u4e49\uff0c\u4f46\u6700\u597d\u9075\u5faa\u4e0b\u9762\u7684\u51e0\u4e2a\u6700\u4f73\u5b9e\u8df5\u7ea6\u5b9a"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"\u9075\u5faa\u57fa\u672c\u683c\u5f0f: ",(0,n.kt)("inlineCode",{parentName:"li"},"[\u4e1a\u52a1\u540d\u79f0]:[\u6570\u636e\u540d]:[id]")),(0,n.kt)("li",{parentName:"ol"},"\u957f\u5ea6\u4e0d\u8d85\u8fc7 44 \u5b57\u8282"),(0,n.kt)("li",{parentName:"ol"},"\u4e0d\u5305\u542b\u7279\u6b8a\u5b57\u7b26"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4f18\u70b9:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u53ef\u8bfb\u6027\u5f3a")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u907f\u514d key \u51b2\u7a81")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u65b9\u4fbf\u7ba1\u7406")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u66f4\u8282\u7701\u5185\u5b58: key \u662f string \u7c7b\u578b\uff0c\u5e95\u5c42\u7f16\u7801\u5305\u542b int\u3001embstr \u548c raw \u4e09\u79cd\u3002embstr \u5728\u5c0f\u4e8e44\u5b57\u8282\u4f7f\u7528\uff0c\u4f1a\u91c7\u7528\u8fde\u7eed\u5185\u5b58\u7a7a\u95f4\uff0c\u5185\u5b58\u5360\u7528\u66f4\u5c0f\uff0c\u8d85\u8fc7 44 \u5b57\u8282\u5c31\u4f1a\u4f7f\u7528 raw \u7f16\u7801"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# \u67e5\u770b key \u7c7b\u578b\ntype key\n# \u67e5\u770b key \u5e95\u5c42\u7f16\u7801\nOBJECT encoding key\n")))))),(0,n.kt)("h4",{id:"\u62d2\u7edd-bigkey"},"\u62d2\u7edd BigKey"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"BigKey \u901a\u5e38\u4ee5 ",(0,n.kt)("strong",{parentName:"p"},"Key \u7684\u5927\u5c0f"),"\u548c ",(0,n.kt)("strong",{parentName:"p"},"Key \u4e2d\u6210\u5458\u7684\u6570\u91cf"),"\u6765\u7efc\u5408\u5224\u5b9a\uff0c\u4f8b\u5982:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Key \u672c\u8eab\u7684\u6570\u636e\u91cf\u8fc7\u5927: \u4e00\u4e2a String \u7c7b\u578b\u7684 Key\uff0c\u5b83\u7684\u503c\u4e3a 5 MB"),(0,n.kt)("li",{parentName:"ul"},"Key \u4e2d\u7684\u6210\u5458\u6570\u8fc7\u591a: \u4e00\u4e2a ZSET \u7c7b\u578b\u7684 Key\uff0c\u5b83\u7684\u6210\u5458\u6570\u91cf\u4e3a10,000\u4e2a"),(0,n.kt)("li",{parentName:"ul"},"Key \u4e2d\u6210\u5458\u7684\u6570\u636e\u91cf\u8fc7\u5927: \u4e00\u4e2a Hash \u7c7b\u578b\u7684 Key\uff0c\u5b83\u7684\u6210\u5458\u6570\u91cf\u867d\u7136\u53ea\u6709 1,000\u4e2a \u4f46\u8fd9\u4e9b\u6210\u5458\u7684 Value (\u503c)\u603b\u5927\u5c0f\u4e3a 100 MB"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u63a8\u8350\u503c:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5355\u4e2a key \u7684 value \u5c0f\u4e8e 10KB"),(0,n.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u96c6\u5408\u7c7b\u578b\u7684 key\uff0c\u5efa\u8bae\u5143\u7d20\u6570\u91cf\u5c0f\u4e8e 1000")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# \u67e5\u770b key \u5bf9\u5e94 value \u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f\uff0c\u6b64\u547d\u4ee4\u5bf9 cup \u5360\u7528\u9ad8\uff0c\u4e0d\u63a8\u8350\u4f7f\u7528\nmemory usege key\n\n# \u67e5\u770b key \u5bf9\u5e94 value \u7684\u957f\u5ea6\nSTRLEN key\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"BigKey \u7684\u5371\u5bb3")),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"\u7f51\u7edc\u963b\u585e",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5bf9BigKey\u6267\u884c\u8bfb\u8bf7\u6c42\u65f6\uff0c\u5c11\u91cf\u7684 QPS \u5c31\u53ef\u80fd\u5bfc\u81f4\u5e26\u5bbd\u4f7f\u7528\u7387\u88ab\u5360\u6ee1\uff0c\u5bfc\u81f4 Redis \u5b9e\u4f8b\uff0c\u4e43\u81f3\u6240\u5728\u7269\u7406\u673a\u53d8\u6162"))),(0,n.kt)("li",{parentName:"ol"},"\u6570\u636e\u503e\u659c",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"BigKey \u6240\u5728\u7684 Redis \u5b9e\u4f8b\u5185\u5b58\u4f7f\u7528\u7387\u8fdc\u8d85\u5176\u4ed6\u5b9e\u4f8b\uff0c\u65e0\u6cd5\u4f7f\u6570\u636e\u5206\u7247\u7684\u5185\u5b58\u8d44\u6e90\u8fbe\u5230\u5747\u8861"))),(0,n.kt)("li",{parentName:"ol"},"Redis \u963b\u585e",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5bf9\u5143\u7d20\u8f83\u591a\u7684 hash\u3001list\u3001zset \u7b49\u505a\u8fd0\u7b97\u4f1a\u8017\u65f6\u8f83\u65e7\uff0c\u4f7f\u4e3b\u7ebf\u7a0b\u88ab\u963b\u585e"))),(0,n.kt)("li",{parentName:"ol"},"CPU\u538b\u529b",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5bf9 BigKey \u7684\u6570\u636e\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u4f1a\u5bfc\u81f4 CPU \u7684\u4f7f\u7528\u7387\u98d9\u5347\uff0c\u5f71\u54cd Redis \u5b9e\u4f8b\u548c\u672c\u673a\u5176\u5b83\u5e94\u7528"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"\u5982\u4f55\u53d1\u73b0 BigKey")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"redis-cli --bigkeys")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5229\u7528 ",(0,n.kt)("inlineCode",{parentName:"p"},"redis-cli")," \u63d0\u4f9b\u7684 ",(0,n.kt)("inlineCode",{parentName:"p"},"--bigkeys")," \u53c2\u6570\uff0c\u53ef\u4ee5\u904d\u5386\u5206\u6790\u6240\u6709key\uff0c\u5e76\u8fd4\u56deKey\u7684\u6574\u4f53\u7edf\u8ba1\u4fe1\u606f\u4e0e\u6bcf\u4e2a\u6570\u636e\u7684Top1\u7684big key"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# \u4f8b\nredis-cli -a 222333 -p 7001 --bigkeys\n"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"scan")," \u626b\u63cf\uff0c\u8fd8\u6709 ",(0,n.kt)("inlineCode",{parentName:"p"},"hscan"),"\u3001",(0,n.kt)("inlineCode",{parentName:"p"},"sscan"),"\u3001",(0,n.kt)("inlineCode",{parentName:"p"},"zscan")," \u7b49"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u81ea\u5df1\u7f16\u7a0b\uff0c\u5229\u7528 ",(0,n.kt)("inlineCode",{parentName:"p"},"scan")," \u547d\u4ee4\u626b\u63cf Redis \u4e2d\u7684\u6240\u6709 key\uff0c\u5229\u7528 ",(0,n.kt)("inlineCode",{parentName:"p"},"strlen"),"\u3001",(0,n.kt)("inlineCode",{parentName:"p"},"hlen")," \u3001",(0,n.kt)("inlineCode",{parentName:"p"},"llen"),"\u3001",(0,n.kt)("inlineCode",{parentName:"p"},"scard"),"\u3001",(0,n.kt)("inlineCode",{parentName:"p"},"zcard"),"\u7b49\u547d\u4ee4\u5224\u65ad key \u7684\u957f\u5ea6(\u6b64\u5904\u4e0d\u5efa\u8bae\u4f7f\u7528 ",(0,n.kt)("inlineCode",{parentName:"p"},"MEMORY USAGE"),")"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"SCAN cursor [MATCH pattern] [COUNT count] [TYPE type]\n"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7b2c\u4e09\u65b9\u5de5\u5177"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5229\u7528\u7b2c\u4e09\u65b9\u5de5\u5177\uff0c\u5982 Redis-Rdb-Tools \u5206\u6790 RDB \u5feb\u7167\u6587\u4ef6\uff0c\u5168\u9762\u5206\u6790\u5185\u5b58\u4f7f\u7528\u60c5\u51b5",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/sripathikrishnan/redis-rdb-tools"},"sripathikrishnan/redis-rdb-tools: Parse Redis dump.rdb files, Analyze Memory, and Export Data to JSON (github.com)")))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7f51\u7edc\u76d1\u63a7"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u5de5\u5177\uff0c\u76d1\u63a7\u8fdb\u51fa Redis \u7684\u7f51\u7edc\u6570\u636e\uff0c\u8d85\u51fa\u9884\u8b66\u503c\u65f6\u4e3b\u52a8\u544a\u8b66"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"\u5982\u4f55\u5220\u9664 BigKey")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"BigKey \u5185\u5b58\u5360\u7528\u8f83\u591a\uff0c\u5373\u4fbf\u662f\u5220\u9664\u8fd9\u6837\u7684key\u4e5f\u9700\u8981\u8017\u8d39\u5f88\u957f\u65f6\u95f4\uff0c\u5bfc\u81f4 Redis \u4e3b\u7ebf\u7a0b\u963b\u585e\uff0c\u5f15\u53d1\u4e00\u7cfb\u5217\u95ee\u9898\u3002"),(0,n.kt)("li",{parentName:"ul"},"redis 3.0 \u53ca\u4ee5\u4e0b\u7248\u672c",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5982\u679c\u662f\u96c6\u5408\u7c7b\u578b\uff0c\u5219\u904d\u5386 BigKey \u7684\u5143\u7d20\uff0c\u5148\u9010\u4e2a\u5220\u9664\u5b50\u5143\u7d20\uff0c\u6700\u540e\u5220\u9664BigKey"))),(0,n.kt)("li",{parentName:"ul"},"Redis 4.0\u4ee5\u540e",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Redis \u5728 4.0 \u540e\u63d0\u4f9b\u4e86\u5f02\u6b65\u5220\u9664\u7684\u547d\u4ee4: ",(0,n.kt)("inlineCode",{parentName:"li"},"unlink"))))))),(0,n.kt)("h4",{id:"\u6070\u5f53\u7684\u6570\u636e\u7c7b\u578b"},"\u6070\u5f53\u7684\u6570\u636e\u7c7b\u578b"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5b58\u4e00\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u6709\u4e09\u79cd\u50a8\u5b58\u65b9\u5f0f",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"\u4ee5 json \u5b57\u7b26\u4e32\u65b9\u5f0f\u5b58\u50a8",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u4f18\u70b9: \u5b9e\u73b0\u7b80\u5355\u7c97\u66b4"),(0,n.kt)("li",{parentName:"ul"},"\u7f3a\u70b9: \u6570\u636e\u8026\u5408\uff0c\u4e0d\u591f\u7075\u6d3b"))),(0,n.kt)("li",{parentName:"ol"},"\u5c06\u5b57\u6bb5\u6253\u6563\uff0c\u4ee5 string \u65b9\u5f0f \u50a8\u5b58",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u4f18\u70b9: \u53ef\u4ee5\u7075\u6d3b\u8bbf\u95ee\u5bf9\u8c61\u4efb\u610f\u5b57\u6bb5"),(0,n.kt)("li",{parentName:"ul"},"\u7f3a\u70b9: \u5360\u7528\u7a7a\u95f4\u5927\u3001\u6ca1\u529e\u6cd5\u505a\u7edf\u4e00\u63a7\u5236"))),(0,n.kt)("li",{parentName:"ol"},"\u4ee5 hash \u65b9\u5f0f\u50a8\u5b58",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u4f18\u70b9: \u5e95\u5c42\u4f7f\u7528 ziplist\uff0c\u7a7a\u95f4\u5360\u7528\u5c0f\uff0c\u53ef\u4ee5\u7075\u6d3b\u8bbf\u95ee\u5bf9\u8c61\u7684\u4efb\u610f\u5b57\u6bb5"),(0,n.kt)("li",{parentName:"ul"},"\u7f3a\u70b9: \u4ee3\u7801\u76f8\u5bf9\u590d\u6742"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u5b58\u5728\u95ee\u9898"),"\uff1a\u5047\u5982\u6709 hash \u7c7b\u578b\u7684 key\uff0c\u5176\u4e2d\u6709 100 \u4e07\u5bf9 field \u548c value\uff0cfield \u662f\u81ea\u589e id\uff0c\u8fd9\u4e2a key \u5b58\u5728\u4ec0\u4e48\u95ee\u9898?\u5982\u4f55\u4f18\u5316?",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"hash \u7684 entry \u6570\u91cf\u8d85\u8fc7 500 \u65f6\uff0c\u4f1a\u4f7f\u7528\u54c8\u5e0c\u8868\u800c\u4e0d\u662f ZipList\uff0c\u5185\u5b58\u5360\u7528\u8f83\u591a"),(0,n.kt)("li",{parentName:"ul"},"\u4f18\u5316",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"\u53ef\u4ee5\u901a\u8fc7 ",(0,n.kt)("inlineCode",{parentName:"li"},"hash-max-ziplist-entries")," \u914d\u7f6eentry\u4e0a\u9650\u3002\u4f46\u662f\u5982\u679c entry \u8fc7\u591a\u5c31\u4f1a\u5bfc\u81f4 BigKey \u95ee\u9898"),(0,n.kt)("li",{parentName:"ol"},"\u5c06 hash \u62c6\u5206\u4e3a string \u7c7b\u578b\u8fdb\u884c\u5b58\u50a8\u3002\u53ef\u4ee5\u89e3\u51b3 BigKey\uff0c\u4f46\u662f string \u7ed3\u6784\u5e95\u5c42\u6ca1\u6709\u592a\u591a\u5185\u5b58\u4f18\u5316\uff0c\u5185\u5b58\u5360\u7528\u8f83\u591a\uff0c\u4e14\u60f3\u8981\u6279\u91cf\u83b7\u53d6\u8fd9\u4e9b\u6570\u636e\u6bd4\u8f83\u9ebb\u70e6"),(0,n.kt)("li",{parentName:"ol"},"\u62c6\u5206\u4e3a\u5c0f\u7684 hash\uff0c\u5c06 ",(0,n.kt)("inlineCode",{parentName:"li"},"id/100")," \u4f5c\u4e3akey\uff0c\u5c06 ",(0,n.kt)("inlineCode",{parentName:"li"},"id % 100")," \u4f5c\u4e3a field\uff0c\u8fd9\u6837\u6bcf100 \u4e2a\u5143\u7d20\u4e3a\u4e00\u4e2a Hash"))))))))),(0,n.kt)("li",{parentName:"ul"},"Value \u7684\u6700\u4f73\u5b9e\u8df5:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5408\u7406\u7684\u62c6\u5206\u6570\u636e\uff0c\u62d2\u7edd BigKey"),(0,n.kt)("li",{parentName:"ul"},"\u9009\u62e9\u5408\u9002\u6570\u636e\u7ed3\u6784"),(0,n.kt)("li",{parentName:"ul"},"Hash \u7ed3\u6784\u7684 entry \u6570\u91cf\u4e0d\u8981\u8d85\u8fc7 1000"),(0,n.kt)("li",{parentName:"ul"},"\u8bbe\u7f6e\u5408\u7406\u7684\u8d85\u65f6\u65f6\u95f4")))),(0,n.kt)("h3",{id:"\u6279\u5904\u7406\u4f18\u5316"},"\u6279\u5904\u7406\u4f18\u5316"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5355\u4e2a\u547d\u4ee4\u7684\u6267\u884c\u6d41\u7a0b"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4e00\u6b21\u547d\u4ee4\u7684\u54cd\u5e94\u65f6\u95f4 = 1\u6b21\u5f80\u8fd4\u7684\u7f51\u7edc\u4f20\u8f93\u8017\u65f6 + 1\u6b21Redis\u6267\u884c\u547d\u4ee4\u8017\u65f6")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7f51\u7edc\u4f20\u8f93\u8017\u65f6\u5f80\u5f80\u5927\u4e8e Redis \u6267\u884c\u547d\u4ee4\u8017\u65f6\uff0c\u751a\u81f3\u662f\u6570\u91cf\u7ea7\u7684\u5dee\u522b"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240718001857217",src:t(94422).Z,width:"841",height:"275"}))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"N\u6761\u547d\u4ee4\u4f9d\u6b21\u6267\u884c"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"N\u6b21\u547d\u4ee4\u7684\u54cd\u5e94\u65f6\u95f4= N\u6b21\u5f80\u8fd4\u7684\u7f51\u7edc\u4f20\u8f93\u8017\u65f6 + N\u6b21Redis\u6267\u884c\u547d\u4ee4\u8017\u65f6")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"N\u7f51\u7edc\u4f20\u8f93\u8017\u65f6\u5bfc\u81f4\u8017\u65f6\u5927\u5927\u589e\u52a0"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240718002849152",src:t(6787).Z,width:"836",height:"302"}))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"N\u6761\u547d\u4ee4\u6279\u91cf\u6267\u884c"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"N\u6b21\u547d\u4ee4\u7684\u54cd\u5e94\u65f6\u95f4 = 1\u6b21\u5f80\u8fd4\u7684\u7f51\u7edc\u4f20\u8f93\u8017\u65f6 + N\u6b21Redis\u6267\u884c\u547d\u4ee4\u8017\u65f6")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6279\u91cf\u6267\u884c\u6548\u7387\u4f1a\u5927\u5927\u589e\u52a0"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240718003008881",src:t(44691).Z,width:"847",height:"292"})))))),(0,n.kt)("h5",{id:"redis-\u539f\u751f\u6279\u5904\u7406mset-\u7b49"},"Redis \u539f\u751f\u6279\u5904\u7406\uff08MSET \u7b49\uff09"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Redis \u63d0\u4f9b\u4e86\u5f88\u591a ",(0,n.kt)("inlineCode",{parentName:"p"},"Mxxx")," \u8fd9\u6837\u7684\u547d\u4ee4\uff0c\u53ef\u4ee5\u5b9e\u73b0\u6279\u91cf\u63d2\u5165\u6570\u636e\uff0c\u4f8b\u5982: ",(0,n.kt)("inlineCode",{parentName:"p"},"mset"),"\u3001",(0,n.kt)("inlineCode",{parentName:"p"},"hmset")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u4e0d\u8981\u5728\u4e00\u6b21\u6279\u5904\u7406\u4e2d\u4f20\u8f93\u592a\u591a\u547d\u4ee4\uff0c\u5426\u5219\u5355\u6b21\u547d\u4ee4\u5360\u7528\u5e26\u5bbd\u8fc7\u591a\uff0c\u4f1a\u5bfc\u81f4\u7f51\u7edc\u963b\u585e\uff0c\u547d\u4ee4\u592a\u591a\u53ef\u4ee5\u5206\u591a\u6b21\u6279\u5904\u7406")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-java"},'    @Test\n    void testMset() {\n        stringRedisTemplate.opsForValue().multiSet(Map.of("key1", "value1", "key2", "value2"));\n    }\n')))),(0,n.kt)("h5",{id:"pipeline"},"Pipeline"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"MSET")," \u867d\u7136\u53ef\u4ee5\u6279\u5904\u7406\uff0c\u4f46\u662f\u5374\u53ea\u80fd\u64cd\u4f5c\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff0c\u56e0\u6b64\u5982\u679c\u6709\u5bf9\u590d\u6742\u6570\u636e\u7c7b\u578b\u7684\u6279\u5904\u7406\u9700\u8981\uff0c\u5efa\u8bae\u4f7f\u7528 Pipeline \u529f\u80fd"),(0,n.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u5c06\u591a\u6761\u547d\u4ee4\u653e\u5165 Pipeline \u4e2d\uff0c\u7136\u540e\u4e00\u6b21\u6027\u53d1\u9001\u5230 Redis \u6267\u884c")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java"},'    @Test\n    void testPipeline() {\n        stringRedisTemplate.executePipelined((RedisCallback<Object>) connection -> {\n            connection.openPipeline();\n            connection.stringCommands().set("key1".getBytes(), "value1".getBytes());\n            connection.hashCommands().hSet("hashKey".getBytes(), "hashKey1".getBytes(), "hashValue1".getBytes());\n            connection.setCommands().sAdd("setKey".getBytes(), "setValue1".getBytes(), "setValue2".getBytes());\n            connection.zSetCommands().zAdd("zsetKey".getBytes(), 1.0, "zsetValue1".getBytes());\n            connection.listCommands().lPush("listKey".getBytes(), "listValue1".getBytes());\n            connection.closePipeline();\n            return null;\n        })\n    }\n')),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6279\u91cf\u5904\u7406\u7684\u65b9\u6848:"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"\u539f\u751f\u7684M\u64cd\u4f5c"),(0,n.kt)("li",{parentName:"ol"},"Pipeline\u6279\u5904\u7406")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u6ce8\u610f\u4e8b\u9879:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u6279\u5904\u7406\u65f6\u4e0d\u5efa\u8bae\u4e00\u6b21\u643a\u5e26\u592a\u591a\u547d\u4ee4"),(0,n.kt)("li",{parentName:"ul"},"Pipeline\u7684\u591a\u4e2a\u547d\u4ee4\u4e4b\u95f4\u4e0d\u5177\u5907\u539f\u5b50\u6027")))))),(0,n.kt)("h5",{id:"\u96c6\u7fa4\u4e0b\u7684\u6279\u5904\u7406"},"\u96c6\u7fa4\u4e0b\u7684\u6279\u5904\u7406"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5982 ",(0,n.kt)("inlineCode",{parentName:"p"},"MSET")," \u6216 ",(0,n.kt)("inlineCode",{parentName:"p"},"Pipeline")," \u8fd9\u6837\u7684\u6279\u5904\u7406\u9700\u8981\u5728\u4e00\u6b21\u8bf7\u6c42\u4e2d\u643a\u5e26\u591a\u6761\u547d\u4ee4\uff0c\u800c\u6b64\u65f6\u5982\u679c Redis \u662f\u4e00\u4e2a\u96c6\u7fa4\uff0c\u90a3\u6279\u5904\u7406\u547d\u4ee4\u7684\u591a\u4e2a key \u5fc5\u987b\u843d\u5728\u4e00\u4e2a\u63d2\u69fd\u4e2d\uff0c\u5426\u5219\u5c31\u4f1a\u5bfc\u81f4\u6267\u884c\u5931\u8d25")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u89e3\u51b3\u65b9\u6848"),(0,n.kt)("table",{parentName:"li"},(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null}),(0,n.kt)("th",{parentName:"tr",align:null},"\u4e32\u884c\u547d\u4ee4"),(0,n.kt)("th",{parentName:"tr",align:null},"\u4e32\u884cslot"),(0,n.kt)("th",{parentName:"tr",align:null},"\u5e76\u884cslot"),(0,n.kt)("th",{parentName:"tr",align:null},"hash_tag"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u5b9e\u73b0\u601d\u8def"),(0,n.kt)("td",{parentName:"tr",align:null},"for\u5faa\u73af\u904d\u5386\uff0c\u4f9d\u6b21\u6267\u884c\u6bcf\u4e2a\u547d\u4ee4"),(0,n.kt)("td",{parentName:"tr",align:null},"\u5728\u5ba2\u6237\u7aef\u8ba1\u7b97\u6bcf\u4e2a key \u7684 slot\uff0c\u5c06 slot \u4e00\u81f4\u5206\u4e3a\u4e00\u7ec4\uff0c\u6bcf\u7ec4\u90fd\u5229\u7528 Pipeline \u6279\u5904\u7406\u3002",(0,n.kt)("strong",{parentName:"td"},"\u4e32\u884c\u6267\u884c\u5404\u7ec4\u547d\u4ee4")),(0,n.kt)("td",{parentName:"tr",align:null},"\u5728\u5ba2\u6237\u7aef\u8ba1\u7b97\u6bcf\u4e2a key \u7684 slot\uff0c\u5c06 slot \u4e00\u81f4\u5206\u4e3a\u4e00\u7ec4\uff0c\u6bcf\u7ec4\u90fd\u5229\u7528 Pipeline \u6279\u5904\u7406\u3002",(0,n.kt)("strong",{parentName:"td"},"\u5e76\u884c\u6267\u884c\u5404\u7ec4\u547d\u4ee4")),(0,n.kt)("td",{parentName:"tr",align:null},"\u5c06\u6240\u6709 key \u8bbe\u7f6e\u76f8\u540c\u7684 ",(0,n.kt)("strong",{parentName:"td"},"hash_tag"),"\uff0c\u5219\u6240\u6709 key \u7684 slot \u4e00\u5b9a\u76f8\u540c",(0,n.kt)("br",null),"**hash_tag\uff1akey \u7684 {} \u4e2d\u7684\u6709\u6548\u90e8\u5206")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u8017\u65f6"),(0,n.kt)("td",{parentName:"tr",align:null},"N\u6b21\u7f51\u7edc\u8017\u65f6+N\u6b21\u547d\u4ee4\u8017\u65f6"),(0,n.kt)("td",{parentName:"tr",align:null},"m\u6b21\u7f51\u7edc\u8017\u65f6 +N\u6b21\u547d\u4ee4\u8017\u65f6",(0,n.kt)("br",null),"m= key\u7684slot\u4e2a\u6570"),(0,n.kt)("td",{parentName:"tr",align:null},"1\u6b21\u7f51\u7edc\u8017\u65f6 + N\u6b21\u547d\u4ee4\u8017\u65f6"),(0,n.kt)("td",{parentName:"tr",align:null},"1\u6b21\u7f51\u7edc\u8017\u65f6 +N\u6b21\u547d\u4ee4\u8017\u65f6")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u4f18\u70b9"),(0,n.kt)("td",{parentName:"tr",align:null},"\u5b9e\u73b0\u7b80\u5355"),(0,n.kt)("td",{parentName:"tr",align:null},"\u8017\u65f6\u8f83\u77ed"),(0,n.kt)("td",{parentName:"tr",align:null},"\u8017\u65f6\u975e\u5e38\u77ed"),(0,n.kt)("td",{parentName:"tr",align:null},"\u8017\u65f6\u975e\u5e38\u77ed\u3001\u5b9e\u73b0\u7b80\u5355")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u7f3a\u70b9"),(0,n.kt)("td",{parentName:"tr",align:null},"\u8017\u65f6\u975e\u5e38\u4e45"),(0,n.kt)("td",{parentName:"tr",align:null},"\u5b9e\u73b0\u7a0d\u590d\u6742",(0,n.kt)("br",null),"slot\u8d8a\u591a\uff0c\u8017\u65f6\u8d8a\u4e45"),(0,n.kt)("td",{parentName:"tr",align:null},"\u5b9e\u73b0\u590d\u6742"),(0,n.kt)("td",{parentName:"tr",align:null},"\u5bb9\u6613\u51fa\u73b0\u6570\u636e\u503e\u659c\uff0c\u5373\u5927\u91cf key \u5b58\u50a8\u5728\u540c\u4e00\u4e2a\u63d2\u69fd"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"StringRedisTemplate")," \u5bf9\u96c6\u7fa4\u4e0b\u7684\u6279\u5904\u7406\u5931\u8d25\u95ee\u9898\u8fdb\u884c\u4e86\u89e3\u51b3\uff0c\u4e14\u4f7f\u7528\u7684 ",(0,n.kt)("strong",{parentName:"p"},"\u5e76\u884cslot")," \u7684\u89e3\u51b3\u65b9\u6848\uff0c\u56e0\u6b64\u63a8\u8350\u4f7f\u7528 ",(0,n.kt)("inlineCode",{parentName:"p"},"StringRedisTemplate"),"  \u6765\u505a\u96c6\u7fa4\u4e0b\u7684\u6279\u5904\u7406"))),(0,n.kt)("h3",{id:"\u670d\u52a1\u7aef\u4f18\u5316"},"\u670d\u52a1\u7aef\u4f18\u5316"),(0,n.kt)("h4",{id:"\u6301\u4e45\u5316\u914d\u7f6e"},"\u6301\u4e45\u5316\u914d\u7f6e"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Redis \u7684\u6301\u4e45\u5316\u867d\u7136\u53ef\u4ee5\u4fdd\u8bc1\u6570\u636e\u5b89\u5168\uff0c\u4f46\u4e5f\u4f1a\u5e26\u6765\u5f88\u591a\u989d\u5916\u7684\u5f00\u9500\uff0c\u56e0\u6b64\u6301\u4e45\u5316\u8bf7\u9075\u5faa\u4e0b\u5217\u5efa\u8bae:"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u7528\u6765\u505a\u7f13\u5b58\u7684 Redis \u5b9e\u4f8b\u5c3d\u91cf\u4e0d\u8981\u5f00\u542f\u6301\u4e45\u5316\u529f\u80fd")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u5efa\u8bae\u5173\u95ed RDB \u6301\u4e45\u5316\u529f\u80fd\uff0c\u4f7f\u7528 AOF \u6301\u4e45\u5316")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u5229\u7528\u811a\u672c\u5b9a\u671f\u5728 slave \u8282\u70b9\u505a RDB\uff0c\u5b9e\u73b0\u6570\u636e\u5907\u4efd")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u8bbe\u7f6e\u5408\u7406\u7684 AOF \u6587\u4ef6\u7684 rewrite \u9608\u503c\uff0c\u907f\u514d\u9891\u7e41\u7684 bgrewrite\uff08\u91cd\u5199\uff09")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u914d\u7f6e ",(0,n.kt)("inlineCode",{parentName:"p"},"no-appendfsync-on-rewrite=yes"),"\uff0c\u7981\u6b62\u5728 rewrite \u671f\u95f4\u505a AOF \uff0c\u907f\u514d\u56e0 AOF \u5f15\u8d77\u7684\u963b\u585e"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240718015832159",src:t(31907).Z,width:"434",height:"390"}))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u90e8\u7f72\u6709\u5173\u5efa\u8bae:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Redis\u5b9e\u4f8b\u7684\u7269\u7406\u673a\u8981\u9884\u7559\u8db3\u591f\u5185\u5b58\uff0c\u5e94\u5bf9 fork \u548c rewrite"),(0,n.kt)("li",{parentName:"ul"},"\u5355\u4e2aRedis\u5b9e\u4f8b\u5185\u5b58\u4e0a\u9650\u4e0d\u8981\u592a\u5927\uff0c\u4f8b\u59824G\u62168G\u3002\u53ef\u4ee5\u52a0\u5feb fork \u7684\u901f\u5ea6\u3001\u51cf\u5c11\u4e3b\u4ece\u540c\u6b65\u3001\u6570\u636e\u8fc1\u79fb\u538b\u529b"),(0,n.kt)("li",{parentName:"ul"},"\u4e0d\u8981\u4e0e CPU \u5bc6\u96c6\u578b\u5e94\u7528\u90e8\u7f72\u5728\u4e00\u8d77"),(0,n.kt)("li",{parentName:"ul"},"\u4e0d\u8981\u4e0e\u9ad8\u786c\u76d8\u8d1f\u8f7d\u5e94\u7528\u4e00\u8d77\u90e8\u7f72\u3002\u4f8b\u5982: \u6570\u636e\u5e93\u3001\u6d88\u606f\u961f\u5217")))),(0,n.kt)("h4",{id:"\u6162\u67e5\u8be2"},"\u6162\u67e5\u8be2"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6162\u67e5\u8be2: \u5728 Redis \u6267\u884c\u65f6\u8017\u65f6\u8d85\u8fc7\u67d0\u4e2a\u95ef\u503c\u7684\u547d\u4ee4\uff0c\u79f0\u4e3a\u6162\u67e5\u8be2")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6162\u67e5\u8be2\u7684\u9608\u503c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6307\u5b9a"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"slowlog-log-slower-than"),": \u6162\u67e5\u8be2\u9608\u503c\uff0c\u5355\u4f4d\u662f\u5fae\u79d2\u3002\u9ed8\u8ba4\u662f10000\uff0c\u5efa\u8bae1000"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6162\u67e5\u8be2\u4f1a\u88ab\u653e\u5165",(0,n.kt)("strong",{parentName:"p"},"\u6162\u67e5\u8be2\u65e5\u5fd7"),"\u4e2d\uff0c\u65e5\u5fd7\u7684\u957f\u5ea6\u6709\u4e0a\u9650\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6307\u5b9a"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"slowlog-max-len"),": \u6162\u67e5\u8be2\u65e5\u5fd7(\u672c\u8d28\u662f\u4e00\u4e2a\u961f\u5217)\u7684\u957f\u5ea6\u3002\u9ed8\u8ba4\u662f128\uff0c\u5efa\u8bae1000"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u53ef\u4ee5\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u8fbe\u5230\u6c38\u4e45\u751f\u6548\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u52a8\u6001\u4fee\u6539\u914d\u7f6e\uff08\u91cd\u542f\u4f1a\u5931\u6548\uff09"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"config set slowlog-log-slower-than 1000\nconfig set slowlog-max-len 1000\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u67e5\u770b\u6162\u67e5\u8be2\u65e5\u5fd7\u5217\u8868:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"slowlog len"),": \u67e5\u8be2\u6162\u67e5\u8be2\u65e5\u5fd7\u957f\u5ea6"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"slowlog get [n]"),": \u8bfb\u53d6 n \u6761\u6162\u67e5\u8be2\u65e5\u5fd7"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"slowlog reset"),": \u6e05\u7a7a\u6162\u67e5\u8be2\u5217\u8868"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4e5f\u53ef\u4ee5\u901a\u8fc7 Redis \u7684\u684c\u9762\u5ba2\u6237\u7aef RESP.app \u67e5\u770b"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240718021958161",src:t(16169).Z,width:"1315",height:"341"})))),(0,n.kt)("h4",{id:"\u547d\u4ee4\u53ca\u5b89\u5168\u914d\u7f6e"},"\u547d\u4ee4\u53ca\u5b89\u5168\u914d\u7f6e"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Redis \u4f1a\u7ed1\u5b9a\u5728 0.0.0.0:6379\uff0c\u8fd9\u6837\u5c06\u4f1a\u5c06 Redis \u670d\u52a1\u66b4\u9732\u5230\u516c\u7f51\u4e0a\uff0c\u800c Redis \u5982\u679c\u6ca1\u6709\u505a\u8eab\u4efd\u8ba4\u8bc1\uff0c\u4f1a\u51fa\u73b0\u4e25\u91cd\u7684\u5b89\u5168\u6f0f\u6d1e",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u6f0f\u6d1e\u91cd\u73b0\u65b9\u5f0f: ",(0,n.kt)("a",{parentName:"li",href:"https://cloud.tencent.com/developer/article/1039000"},"Redis\u672a\u6388\u6743\u8bbf\u95ee\u914d\u5408SSH key\u6587\u4ef6\u5229\u7528\u5206\u6790-\u817e\u8baf\u4e91\u5f00\u53d1\u8005\u793e\u533a-\u817e\u8baf\u4e91 (tencent.com)")),(0,n.kt)("li",{parentName:"ul"},"\u6f0f\u6d1e\u51fa\u73b0\u7684\u6838\u5fc3\u7684\u539f\u56e0\u6709\u4ee5\u4e0b\u51e0\u70b9:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Redis \u672a\u8bbe\u7f6e\u5bc6\u7801"),(0,n.kt)("li",{parentName:"ul"},"\u5229\u7528\u4e86 Redis \u7684 ",(0,n.kt)("inlineCode",{parentName:"li"},"config set")," \u547d\u4ee4\u52a8\u6001\u4fee\u6539Redis\u914d\u7f6e"),(0,n.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u4e86Root\u8d26\u53f7\u6743\u9650\u542f\u52a8Redis"))))),(0,n.kt)("li",{parentName:"ul"},"\u4e3a\u4e86\u907f\u514d\u8fd9\u6837\u7684\u6f0f\u6d1e\uff0c\u8fd9\u91cc\u7ed9\u51fa\u4e00\u4e9b\u5efa\u8bae:",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"Redis\u4e00\u5b9a\u8981\u8bbe\u7f6e\u5bc6\u7801"),(0,n.kt)("li",{parentName:"ol"},"\u7981\u6b62\u7ebf\u4e0a\u4f7f\u7528\u4e0b\u9762\u547d\u4ee4:",(0,n.kt)("inlineCode",{parentName:"li"},"keys"),"\u3001",(0,n.kt)("inlineCode",{parentName:"li"},"flushall")," \u3001",(0,n.kt)("inlineCode",{parentName:"li"},"flushdb"),"\u3001",(0,n.kt)("inlineCode",{parentName:"li"},"config set")," \u7b49\u547d\u4ee4\u3002\u53ef\u4ee5\u5229\u7528",(0,n.kt)("inlineCode",{parentName:"li"},"rename-command"),"\u4fee\u6539\u547d\u4ee4\u540d\u79f0\uff0c\u8fbe\u5230\u7981\u7528\u76ee\u7684"),(0,n.kt)("li",{parentName:"ol"},"bind: \u9650\u5236\u7f51\u5361\uff0c\u7981\u6b62\u5916\u7f51\u7f51\u5361\u8bbf\u95ee"),(0,n.kt)("li",{parentName:"ol"},"\u5f00\u542f\u9632\u706b\u5899"),(0,n.kt)("li",{parentName:"ol"},"\u4e0d\u8981\u4f7f\u7528 Root \u8d26\u6237\u542f\u52a8 Redis"),(0,n.kt)("li",{parentName:"ol"},"\u5c3d\u91cf\u4e0d\u662f\u6709\u9ed8\u8ba4\u7684\u7aef\u53e3")))),(0,n.kt)("h4",{id:"\u5185\u5b58\u914d\u7f6e"},"\u5185\u5b58\u914d\u7f6e"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5f53 Redis \u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u53ef\u80fd\u5bfc\u81f4 Key \u9891\u7e41\u88ab\u5220\u9664\u3001\u54cd\u5e94\u65f6\u95f4\u53d8\u957f\u3001QPS \u4e0d\u7a33\u5b9a\u7b49\u95ee\u9898\u3002\u5f53\u5185\u5b58\u4f7f\u7528\u7387\u8fbe\u5230 90% \u4ee5\u4e0a\u65f6\u5c31\u9700\u8981\u6211\u4eec\u8b66\u60d5\uff0c\u5e76\u5feb\u901f\u5b9a\u4f4d\u5230\u5185\u5b58\u5360\u7528\u7684\u539f\u56e0"),(0,n.kt)("table",{parentName:"li"},(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"center"},"\u5185\u5b58\u5360\u7528"),(0,n.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"\u6570\u636e\u5185\u5b58"),(0,n.kt)("td",{parentName:"tr",align:null},"\u662f Redis \u6700\u4e3b\u8981\u7684\u90e8\u5206\uff0c\u5b58\u50a8 Redis \u7684\u952e\u503c\u4fe1\u606f\u3002\u4e3b\u8981\u95ee\u9898\u662f BigKey \u95ee\u9898\u3001\u5185\u5b58\u788e\u7247\u95ee\u9898")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"\u8fdb\u7a0b\u5185\u5b58"),(0,n.kt)("td",{parentName:"tr",align:null},"Redis \u4e3b\u8fdb\u7a0b\u672c\u8eab\u8fd0\u884c\u80af\u5b9a\u9700\u8981\u5360\u7528\u5185\u5b58\uff0c\u5982\u4ee3\u7801\u3001\u5e38\u91cf\u6c60\u7b49\u7b49;\u8fd9\u90e8\u5206\u5185\u5b58\u5927\u7ea6\u51e0\u5146\uff0c\u5728\u5927\u591a\u6570\u751f\u4ea7\u73af\u5883\u4e2d\u4e0e Redis \u6570\u636e\u5360\u7528\u7684\u5185\u5b58\u76f8\u6bd4\u53ef\u4ee5\u5ffd\u7565")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"\u7f13\u51b2\u533a\u5185\u5b58"),(0,n.kt)("td",{parentName:"tr",align:null},"\u4e00\u822c\u5305\u62ec",(0,n.kt)("strong",{parentName:"td"},"\u5ba2\u6237\u7aef\u7f13\u51b2\u533a"),"\u3001",(0,n.kt)("strong",{parentName:"td"},"AOF \u7f13\u51b2\u533a"),"\u3001",(0,n.kt)("strong",{parentName:"td"},"\u590d\u5236\u7f13\u51b2\u533a\u7b49"),"\u3002\u5ba2\u6237\u7aef\u7f13\u51b2\u533a\u53c8\u5305\u62ec\u8f93\u5165\u7f13\u51b2\u533a\u548c\u8f93\u51fa\u7f13\u51b2\u533a\u4e24\u79cd\u3002\u8fd9\u90e8\u5206\u5185\u5b58\u5360\u7528\u6ce2\u52a8\u8f83\u5927\uff0c\u4e0d\u5f53\u4f7f\u7528 BigKey\uff0c\u53ef\u80fd\u5bfc\u81f4\u5185\u5b58\u6ea2\u51fa"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Redis \u63d0\u4f9b\u4e86\u4e00\u4e9b\u547d\u4ee4\uff0c\u53ef\u4ee5\u67e5\u770b\u5230 Redis \u76ee\u524d\u7684\u5185\u5b58\u5206\u914d\u72b6\u6001\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 Redis \u7684\u684c\u9762\u5ba2\u6237\u7aef RESP.app \u67e5\u770b"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"info memory\n\nmemory stats\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5185\u5b58\u7f13\u51b2\u533a\u5e38\u89c1\u7684\u6709\u4e09\u79cd:"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u590d\u5236\u7f13\u51b2\u533a: \u4e3b\u4ece\u590d\u5236\u7684repl_backlog_buf\uff0c\u5982\u679c\u592a\u5c0f\u53ef\u80fd\u5bfc\u81f4\u9891\u7e41\u7684\u5168\u91cf\u590d\u5236\uff0c\u5f71\u54cd\u6027\u80fd\u3002\u901a\u8fc7 ",(0,n.kt)("inlineCode",{parentName:"p"},"repl-backlogsize")," \u6765\u8bbe\u7f6e\uff0c\u9ed8\u8ba4 1mb")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"AOF \u7f13\u51b2\u533a: AOF \u5237\u76d8\u4e4b\u524d\u7684\u7f13\u5b58\u533a\u57df\uff0cAOF \u6267\u884c rewrite \u7684\u7f13\u51b2\u533a\u3002\u65e0\u6cd5\u8bbe\u7f6e\u5bb9\u91cf\u4e0a\u9650")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u5ba2\u6237\u7aef\u7f13\u51b2\u533a: \u5206\u4e3a",(0,n.kt)("strong",{parentName:"p"},"\u8f93\u5165\u7f13\u51b2\u533a"),"\u548c",(0,n.kt)("strong",{parentName:"p"},"\u8f93\u51fa\u7f13\u51b2\u533a"),"\uff0c\u8f93\u5165\u7f13\u51b2\u533a\u6700\u5927 1G \u4e14\u4e0d\u80fd\u8bbe\u7f6e\u3002\u8f93\u51fa\u7f13\u51b2\u533a\u53ef\u4ee5\u8bbe\u7f6e"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# \u8f93\u51fa\u7f13\u51b2\u533a\u914d\u7f6e\u9879\nclient-output-buffer-limit <class> <hard limit> <soft limit> <soft seconds>\n")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"<class>")," : \u5ba2\u6237\u7aef\u7c7b\u578b",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"normal\uff1a\u666e\u901a\u5ba2\u6237\u7aef"),(0,n.kt)("li",{parentName:"ul"},"replica\uff1a\u4e3b\u4ece\u590d\u5236\u5ba2\u6237\u7aef"),(0,n.kt)("li",{parentName:"ul"},"pubsub\uff1apubsub \u5ba2\u6237\u7aef"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"<hard limit>")," : \u7f13\u51b2\u533a\u4e0a\u9650\u5728\u8d85\u8fc7 limit \u540e\u65ad\u5f00\u5ba2\u6237\u7aef"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"<soft limit> <soft seconds>")," : \u7f13\u51b2\u533a\u4e0a\u9650\uff0c\u5728\u8d85\u8fc7 soft limit \u5e76\u4e14\u6301\u7eed\u4e86 soft seconds \u79d2\u540e\u65ad\u5f00\u5ba2\u6237\u7aef")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240718032035597",src:t(14236).Z,width:"1326",height:"882"})),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Reids \u63d0\u4f9b\u4e86\u67e5\u770b\u5ba2\u6237\u7aef\u4fe1\u606f\u547d\u4ee4\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 Redis \u7684\u684c\u9762\u5ba2\u6237\u7aef RESP.app \u67e5\u770b"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"info clients\n\nclient list\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u901a\u8fc7\u68c0\u6d4b\u5ba2\u6237\u7aef\u4fe1\u606f\uff0c\u5bf9\u5ba2\u6237\u7aef\u7f13\u51b2\u533a\u8fdb\u884c\u5224\u65ad\uff0c\u662f\u5426\u51fa\u73b0\u6545\u969c\uff0c\u4ee5\u53ca\u65f6\u5904\u7406"))))))),(0,n.kt)("h3",{id:"\u96c6\u7fa4\u6700\u4f73\u5b9e\u8df5"},"\u96c6\u7fa4\u6700\u4f73\u5b9e\u8df5"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u96c6\u7fa4\u867d\u7136\u5177\u5907\u9ad8\u53ef\u7528\u7279\u6027\uff0c\u80fd\u5b9e\u73b0\u81ea\u52a8\u6545\u969c\u6062\u590d\uff0c\u4f46\u662f\u5982\u679c\u4f7f\u7528\u4e0d\u5f53\uff0c\u4e5f\u4f1a\u5b58\u5728\u4e00\u4e9b\u95ee\u9898:",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"\u96c6\u7fa4\u5b8c\u6574\u6027\u95ee\u9898"),(0,n.kt)("li",{parentName:"ol"},"\u96c6\u7fa4\u5e26\u5bbd\u95ee\u9898"),(0,n.kt)("li",{parentName:"ol"},"\u6570\u636e\u503e\u659c\u95ee\u9898"),(0,n.kt)("li",{parentName:"ol"},"\u5ba2\u6237\u7aef\u6027\u80fd\u95ee\u9898"),(0,n.kt)("li",{parentName:"ol"},"\u547d\u4ee4\u7684\u96c6\u7fa4\u517c\u5bb9\u6027\u95ee\u9898"),(0,n.kt)("li",{parentName:"ol"},"lua \u548c\u4e8b\u52a1\u95ee\u9898")))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u96c6\u7fa4\u5b8c\u6574\u6027\u95ee\u9898")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5728 Redis \u7684\u9ed8\u8ba4\u914d\u7f6e\u4e2d\u6709\u4e00\u4e2a\u914d\u7f6e",(0,n.kt)("inlineCode",{parentName:"p"},"cluster-require-full-coverage"),"\uff0c\u5982\u679c\u53d1\u73b0\u4efb\u610f\u4e00\u4e2a\u63d2\u69fd\u4e0d\u53ef\u7528\uff0c\u5219\u6574\u4e2a\u96c6\u7fa4\u90fd\u4f1a\u505c\u6b62\u5bf9\u5916\u670d\u52a1:"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"image-20240718141258577",src:t(55441).Z,width:"1422",height:"306"}))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4e3a\u4e86\u4fdd\u8bc1\u9ad8\u53ef\u7528\u7279\u6027\uff0c\u5efa\u8bae\u5c06 ",(0,n.kt)("inlineCode",{parentName:"p"},"cluster-require-full-coverage")," \u914d\u7f6e\u4e3a false"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u8fd9\u6837\u5373\u4f7f\u6709\u8282\u70b9\u5b95\u673a\uff0c\u5b95\u673a\u8282\u70b9\u5bf9\u5e94\u7684\u63d2\u69fd\u65e0\u6cd5\u5b58\u6570\u636e\uff0c\u63d2\u69fd\u6b63\u5e38\u7684\u8282\u70b9\u4e0a\u4f9d\u7136\u5b58\u6570\u636e\uff0c\u4e0d\u4f1a\u505c\u6b62\u6574\u4e2a\u96c6\u7fa4\u670d\u52a1")))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u96c6\u7fa4\u5e26\u5bbd\u95ee\u9898")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u96c6\u7fa4\u8282\u70b9\u4e4b\u95f4\u4f1a\u4e0d\u65ad\u7684\u4e92\u76f8 ",(0,n.kt)("inlineCode",{parentName:"p"},"Ping")," \u6765\u786e\u5b9a\u96c6\u7fa4\u4e2d\u5176\u5b83\u8282\u70b9\u7684\u72b6\u6001\u3002\u6bcf\u6b21 ",(0,n.kt)("inlineCode",{parentName:"p"},"Ping")," \u643a\u5e26\u7684\u4fe1\u606f\u81f3\u5c11\u5305\u62ec:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u63d2\u69fd\u4fe1\u606f"),(0,n.kt)("li",{parentName:"ul"},"\u96c6\u7fa4\u72b6\u6001\u4fe1\u606f"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5f53\u96c6\u7fa4\u4e2d\u8282\u70b9\u8d8a\u591a\uff0c\u96c6\u7fa4\u72b6\u6001\u4fe1\u606f\u6570\u636e\u91cf\u4e5f\u8d8a\u5927\uff0c10 \u4e2a\u8282\u70b9\u7684\u76f8\u5173\u4fe1\u606f\u53ef\u80fd\u8fbe\u5230 1kb\uff0c\u6b64\u65f6\u6bcf\u6b21\u96c6\u7fa4\u4e92\u901a\u9700\u8981\u7684\u5e26\u5bbd\u4f1a\u975e\u5e38\u9ad8"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u89e3\u51b3\u5e26\u5bbd\u9ad8\u9014\u5f84",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"\u907f\u514d\u5927\u96c6\u7fa4\uff0c\u96c6\u7fa4\u8282\u70b9\u6570\u4e0d\u8981\u592a\u591a\uff0c\u6700\u597d\u5c11\u4e8e 1000\uff0c\u5982\u679c\u4e1a\u52a1\u5e9e\u5927\uff0c\u5219\u5efa\u7acb\u591a\u4e2a\u96c6\u7fa4"),(0,n.kt)("li",{parentName:"ol"},"\u907f\u514d\u5728\u5355\u4e2a\u7269\u7406\u673a\u4e2d\u8fd0\u884c\u592a\u591a Redis \u5b9e\u4f8b"),(0,n.kt)("li",{parentName:"ol"},"\u914d\u7f6e\u5408\u9002\u7684 ",(0,n.kt)("inlineCode",{parentName:"li"},"cluster-node-timeout")," \u503c")))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u9009\u62e9\u96c6\u7fa4\u8fd8\u662f\u4e3b\u4ece")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5355\u4f53 Redis (\u4e3b\u4ece Redis )\u5df2\u7ecf\u80fd\u8fbe\u5230\u4e07\u7ea7\u522b\u7684 QPS\uff0c\u5e76\u4e14\u4e5f\u5177\u5907\u5f88\u5f3a\u7684\u9ad8\u53ef\u7528\u7279\u6027\u3002\u5982\u679c\u4e3b\u4ece\u80fd\u6ee1\u8db3\u4e1a\u52a1\u9700\u6c42\u7684\u60c5\u51b5\u4e0b\uff0c\u5c3d\u91cf\u4e0d\u642d\u5efa Redis \u96c6\u7fa4")))}N.isMDXComponent=!0},85889:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f32303139313130343130313733353934372e706e67-9c8a4317ee72ce7622c7a28b8904b23b.bin"},93828:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240715054703022-391e859ada411fc2884aeb9459ba9704.png"},74417:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240715055003315-c214809804555a36ccaf89b0012129a4.png"},4056:(e,a,t)=>{t.d(a,{Z:()=>l});const l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABY4AAABFCAYAAADthXI9AAAOfElEQVR4nO3dvWrjaBvG8Wv2Ay0z7DFsoyUEQRp17hcEKZQuXUCdOzeDyhQpxdu4cydI584qAt4TcKfGYExA7AksewBqdt9Cli3Z8odsybFn/j8ITDzSo1vS4xSXH9/6lKbpfwIAAAAAAAAAfPP++ecf/fnnn/r777/1xx9/6Pfff9fPP/+8sd0PH1AbAAAAAAAAAOADGIahH3/8UZL0yy+/LP+9juAYAAAAAAAAAL4TX7580ZcvX/Trr7/q8+fP+uGH6oj4E60qAAAAAAAAAOD78ddffylNU/3222/6/Plz5TYExwAAAAAAAADwHfn3338laetqY0n66VzFAAAAAAAAAAA+3q7AeLnNGeoAAAAAAAAAAFwRgmMAAAAAAAAAQAnBMQAAAAAAAACghOAYAAAAAAAAAFBCcAwAAAAAAAAAKCE4BgAAAAAAAACUEBwDAAAAAAAAAEoIjgEAAAAAAAAAJQTHAAAAAAAAAIASgmMAAAAAAAAAQEnrwfG4a6jTT/JfZBhdjXfukajfMWQYe346fSWSkn5HhmGou3vQxoy7qxo6/WR5/OU5ZhudtaZv1bnv7dX6Dubb2eZC0ldn29+cXQdf3INtf6cAAAAAAACuTcvB8VijULq7MSVJyftUsm9l7tzHVG+SKk3zn5kCW5I8RWnh9UlvzzjNG3cNuaGtYJbVMOmduwJcsuxDhX0fjGCXS7mGdjAr/A3KfiK5mx8S7dwvkhf7si7gfAAAAAAAAOpqNzhO3jWVrdtFvprMY+nu5uyBbzMSvU8l2Y+6L5yA2ZsQIkPL+YETXPY1dAap0lkg+dbu1cerPTSIPEmhRiTHAAAAAADgyrQcHM8V607ZguMsFLJvCVgBXCmzp9fAlkL3m24NAgAAAAAA0EJwXOhR7IaSQrmGIcOw5MdS7Ft7v+59rGL/4V39UNe321dL1l81q1+xL8swZBgd9RPV7i+779jFXq4HnU9Fb9X17Q4Zs61rl22/uFarihZzZP31sbpbesk2Vt/yfhXm6Vof2pPmx3K+b+63Pu4xLRkOra36umvZw7e4XyPzY3FdO/2kYk7uP89Dr+FBtdS8VnWZvWd5ksIDlhEn2dcUxOdlAAAAAADg2rQQHK96FEdeoefnLJBd6FPcdGuH0DX0cjsr9UUO3fVQKQsm3WmgWd6HNPKyMHtH8pu1o1j0WrbzfSeqdwr1jh26hkYP6dr5rAWBSV+d0UO5D6tXsV3lmFEWfrlZqLZ57apD3brXznnwJMUavhUGS940jCUp1rx0Pu+aanNVehv3dvrypOHjbK1fdgPzo3KOL8YNi326ZwrsUG5VuFspC7qLPbbTNNXz3FLnpZn+DqfNj0zsWzJeblfXL43kaf957r+Gqxrbep8fztStLSkc7Q7Ex11Zfiw7eK35twIAAAAAAODjtdiqImtNkT8YT8lc8d4H453Aiwohk6nea6As21lFO+Ouq1CeouKD9ZyBsjakLwcGeMepfWwv0sDJf8nPJ5b/v0JUZfY0WW2UDfm1YrvKMR19zVI6yQ70unHtymHv0dfOeZAnKS4mxMlcsWzZdvn+JG9DxbL1eL82S1q4t7EeC+d84jnukY1rK5gNtLpbpnqTSJ5i+U/lFc9Vkv6T/FjyovIHFs4g1fNdfFxh606YH0t2oFnpwZWOBrMdc/KIGj/+fW7q5q76f/JvVCy/cVGqFwAAAAAA4Hq0GhzP49VXtMejsNUH43kP5QBV5o3uJGn6vgjlxhqFkrwHrW0p89bWxurXRtU/9tbz2SXpq2P52hYjro9pLtIv+/G+8r6swt5Trp2jh+x7/cvVmeNRKNmPen60S68n83jj4YNVdTdxbzfPua35kY/7XLHqdHFt4qGqMtiVRG/DWLIDfV0vTvmq7tMdPz9WKrc17/Voq3C/mqvxst7nhW9Y5Cuip26tVjYAAAAAAACX4qemB0z6HVl+Ibq0DPnLX1wZoZR9FX2wEey0atEGQWFew5Uee/quRE6htYKrxk9nEcYt7+KJ9WeBXajReCDHyYI9O7iXczOXNNV7Ijnm6vXaHy4cUd9yJfwJY9SpbdtDIbNrs3cQzWNJXnsfvNSyPj8KNq5rtkO2QjecK5HaPYezvM+zb1No7zcoslXlc8NV+NLXV6d3GfcPAAAAAADgAI2vOM56laaaBXahH3DWL9WL8pV4Zw6Ni7yo1BO4+DNou6hGj52o38lD42Lf2+xat+LI+s37R2ULTpNFsLdoR+E8yMtbHiwCv+rgsd36Gh8DaxZB6zm1eR/zHt0HfYMiX1U+P3m1NQAAAAAAwDm11qoimcerYCV511Se1r9lflYbX2m/8mPn4ZUXHfGgvppOrX/RqiAevmn8NlS8bEeRhWrL14+dI01c37bmR746d0t/hGQeS7rTQXn5ltqSs6ey203fKyvMVky32eM8d4b3ed6LO6jqGwIAAAAAAPCNaCk4zlYYLvuRtv1gvIMc2k/2yo89HjXfuuLk+k3dP9pSPNeo+IGCFq0a8tcr+tKep76mxtgxbuVD2bb34z28tkX/4zXb+vlmoWd74uHbZmC7mJPbeiU3q+X32rgry49lB68HflizuMcf/vcPAAAAAACgntaC4+KD8ZL3aasPxjuU8zWQrVi+1VXpWVXjroyWn17V+LHzB44VHi6npK+O205j11Przx60FioMyw84y9pYZK9v6wN8jvpOH2MRjivUaG1TZxDJ2xg3bzXiKTqgd8L2MSwNtdknOW8PEr70V0Fu0teT32ZsLCn2ZRWvVT4n7UCve5PW7dewjnbe54n6HUOGG8qLUk0OSo3ze2wreKW/MQAAAAAAuC4tBceOBoX2CWZvovQSGsSaPU3SSJ5CuYYhI/8ZPbRfX+PHzh68VRrPmuu5rR7Hp9bvPCzqWmtHkQfged/jj6qvgTHM3qsCWwrdbL/Ocomxo0E6U2AXx7XkK9Ds4H7fjgYbtVmaP6eaPN9Vn8sskB37svLtn6TXWVARMzfHDmaK5K6uneUr9iKlk8OC0+3XsIYG5kLsW6v98vt1F+3tkVzeL7/HLbeSAQAAAAAAaMGnNE3/++giAFy5cVeGG8oOZgeuxgUAAAAAAMAla+3heAAAAAAAAACA60RwDAAAAAAAAAAoITgGAAAAAAAAAJTQ4xgAAAAAAAAAUMKKYwAAAAAAAABACcExAAAAAAAAAKCE4BgAAAAAAAAAUEJwDAAAAAAAAAAoITgGAAAAAAAAAJScPzged2UYhrrjzdc6/aTmUIYMw1jum/Q7m+NUHQ/Vvvdr1eDcBAAAAAAAAK7Z1a44HncNuaGtYJYqTVNNeuZHlwQAAAAAAAAA34SfPrqA4yR6n0qyH3VfyIvN3kRp78OKAgAAAAAAAIBvwtWuOAYAAAAAAAAAtKPV4LjYg/jgPrGLnrKrn66KLWezPsaW/FhS7MsyDBlGR/1EtXv07qsv75ncHW9uW3mMjdo3tztkzIOOdUD9p5x7ebvF9S2fiDpr+zVybsWewnvmwo6TW4ydqN9Z7NvpKylt0vzcBAAAAAAAAL4VLQXHWWBX7EGcpqme55Y6L9Ote8W+JePlVrM03yeSp1BuIbg0exOl6UyBLckOFttOVK/F8Vhdw5A7DVbHirzs+BUpbegaGj3kNWXHDt21MDXpqzN6WJ5rmqaKvIrtKseM5C1eMwxDL7ez3ceqWX/ZcfemjtPOLXPIXNhn+vKk4ePieJOezBPOv4l6AAAAAAAAgGvRSnCc9J/kx5IXlQNdZ5Dq+S7evqMdaLYM+CTJ0WAWyFYs/3/Nre0cd12F8hQVj+UMFHmSwpfNINCLNHDyX0z1XitqMnuarDbKhvy6o/bSmI6+Bnb2TzvQ6/KirY41fFsVVbv+gqPvTR0nnNtSA3Mh1mPheJlLn5sAAAAAAADAJWghOE70NowlO9BXZ/N/nQdv65724702Fg6b93q0JYWjhtoCjDUKJXkPWi/PvLUlxZqv5Zjew9qW5o3u9h0m6atj+doWRa6Pad5kI1ZeA0nxsqj69ReKOvre1HH8ua3snAvTdx2yyHdzjEufmwAAAAAAAMBlaCU4nseS7m4qQ8Jd7m6q9jB1szelrSF511SSQnejH7Hl11xxWwows/YRy/F2hMa1rIfUJ9V//L1pxY4AfudciOcHBcebY1z43AQAAAAAAAAuRKsPx2tGovdmWu+WeVGpH3HxZ1CxGnVfjf2Oq1CSVOydm/X3bUWj9V+LlubC0S6tHgAAAAAAAKAZ7QXHW9oJJDuStul75R7ZKlH7tplVsvkq1wPbHRwkedMw1iLMrfugvpqaqP+Ie3Nurc6FS52bAAAAAAAAwIVoITh29OBJiofafObZosfsFvHwbTPQG48Uant/3Gbra9ii9madUn/9e7Otb3LyNmymFccW7cyFS5+bAAAAAAAAwGVoZcWxM4jkKZZvdQsPDUvU71gayt6+Y+zL6hYeM5b01XFDyQ702uAyXudrIHujPknjrozuEY85q3pIWl57C06pv+69Me8fZUsKX/qr4DTp66luP+i6DpoLifodQ4bRUf/AEP3S5yYAAAAAAABwCX5qZ1hHgzSSDFeusQpPvSjVRF0ZbnXoaAczPc8tGUbhRS9S2nTTXrOnSXqj7lp9xx/LVG8SaV4az1OURhoZbvOrjk+qv+a9MXuazKSO5csy/Ow1O9BsFujJ8ps5nwrtzYULn5sAAAAAAADABfiUpul/H10EsDTuynBD2cFME1byAgAAAAAAAB+ivYfjAQAAAAAAAACuEsExAAAAAAAAAKCE4BgAAAAAAAAAUEKPYwAAAAAAAABACSuOAQAAAAAAAAAlBMcAAAAAAAAAgBKCYwAAAAAAAABACcExAAAAAAAAAKCE4BgAAAAAAAAAUEJwDAAAAAAAAAAoITgGAAAAAAAAAJQQHAMAAAAAAAAASgiOAQAAAAAAAAAlBMcAAAAAAAAAgJL/A7wR+7FFvAMTAAAAAElFTkSuQmCC"},6422:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240715055215350-294ee219cbb752ec65c2cb201d129c9a.png"},62251:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240715060654524-ca25242e371e21ec2afe82ed2a72dcca.png"},73871:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240715061918592-117d7a4c16fdf33c7d9631c9e8665205.png"},14596:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240715062011162-50b0a5f3d289dc3e2eabdfefbb19bf19.png"},25123:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240715062251901-7a3935d06fe1c411588f0079583101aa.png"},30232:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240715063431699-b77ff4d636f93f728d82462874448f09.png"},7183:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240715063810279-d0a661b12a8b25ae7a32c3d0a26bb530.png"},7684:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240715231608313-30d4b8c090586db9e253a0fcac518734.png"},62419:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240716005749680-5c4305c7f6c611f4de1368827463b1fa.png"},51294:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240716010924975-39fb932e4330142bd205ae8b7bed9700.png"},7912:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240716011627204-ef5bee0db8644fbe20ea3a73616d0875.png"},53976:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240716022801022-75b518ec30f59779555ff5955e147807.png"},92212:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240716032515528-4247b4454ee799e7a0de1922a2f5a8d7.png"},47471:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240716054142239-c827e55599c22c598ca569ab9ce2283c.png"},74631:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240716093526112-a9e4d9c567cae81ff458e6225e2a3e30.png"},64698:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240716094811565-0dcce75fae9eca816d78ee8293f66e65.png"},4626:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240716130353734-bf4971729b0d41137fb24ddd08d38cf6.png"},79067:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240716131234525-b8176147bd8146d90dc8d2d3bbe9b552.png"},38381:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240716134021495-d63fd35b88c0a5cdace920a3b3879c40.png"},41530:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240716134304829-33ecbedbd0536c2dc0eac8fda0c9a7ec.png"},15629:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240717152142349-15c5a0df71350d5440032d572ad83dd0.png"},29192:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240717152343368-15e13d3d0666d950adc66e338b72ba67.png"},55177:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240717155240894-5e1a66c7cf9f9ccf43763e3561f15e97.png"},84125:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240717163913445-3cf4208f2ff73973fca6d1342dad0b56.png"},94422:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240718001857217-36f003cbf9e812a4808a93f95e5d1f02.png"},6787:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240718002849152-18a3c239695943ad4e68c9a37fae6459.png"},44691:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240718003008881-323bc415122eac8ddff31fcf33b3546e.png"},31907:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240718015832159-1ab5c7a2d572649f5281041998dd74fc.png"},16169:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240718021958161-96912b51e7c863040a7b722743a17318.png"},14236:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240718032035597-2630f5f496123eb5f99caad2e93ec9d8.png"},55441:(e,a,t)=>{t.d(a,{Z:()=>l});const l=t.p+"assets/images/image-20240718141258577-9d4e0ce636a8042a908caed2207d462b.png"}}]);