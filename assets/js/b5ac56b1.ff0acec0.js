"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3222],{3905:(n,e,t)=>{t.d(e,{Zo:()=>s,kt:()=>y});var l=t(67294);function i(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,l)}return t}function a(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?r(Object(t),!0).forEach((function(e){i(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function o(n,e){if(null==n)return{};var t,l,i=function(n,e){if(null==n)return{};var t,l,i={},r=Object.keys(n);for(l=0;l<r.length;l++)t=r[l],e.indexOf(t)>=0||(i[t]=n[t]);return i}(n,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(l=0;l<r.length;l++)t=r[l],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}var p=l.createContext({}),u=function(n){var e=l.useContext(p),t=e;return n&&(t="function"==typeof n?n(e):a(a({},e),n)),t},s=function(n){var e=u(n.components);return l.createElement(p.Provider,{value:e},n.children)},m="mdxType",c={inlineCode:"code",wrapper:function(n){var e=n.children;return l.createElement(l.Fragment,{},e)}},O=l.forwardRef((function(n,e){var t=n.components,i=n.mdxType,r=n.originalType,p=n.parentName,s=o(n,["components","mdxType","originalType","parentName"]),m=u(t),O=i,y=m["".concat(p,".").concat(O)]||m[O]||c[O]||r;return t?l.createElement(y,a(a({ref:e},s),{},{components:t})):l.createElement(y,a({ref:e},s))}));function y(n,e){var t=arguments,i=e&&e.mdxType;if("string"==typeof n||i){var r=t.length,a=new Array(r);a[0]=O;var o={};for(var p in e)hasOwnProperty.call(e,p)&&(o[p]=e[p]);o.originalType=n,o[m]="string"==typeof n?n:i,a[1]=o;for(var u=2;u<r;u++)a[u]=t[u];return l.createElement.apply(null,a)}return l.createElement.apply(null,t)}O.displayName="MDXCreateElement"},21523:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>p,contentTitle:()=>a,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>u});var l=t(87462),i=(t(67294),t(3905));const r={sidebar_position:23},a="Optional \u7c7b",o={unversionedId:"Java/Optional",id:"Java/Optional",title:"Optional \u7c7b",description:"- \u81ed\u540d\u662d\u8457\u7684\u7a7a\u6307\u9488\u5f02\u5e38\u662f\u5bfc\u81f4 Java \u5e94\u7528\u7a0b\u5e8f\u5931\u8d25\u7684\u6700\u5e38\u89c1\u539f\u56e0\uff0c\u4ee5\u524d\uff0c\u4e3a\u4e86\u89e3\u51b3\u7a7a\u6307\u9488\u5f02\u5e38\uff0cGoogle \u516c\u53f8\u8457\u540d\u7684 Guava \u9879\u76ee\u5f15\u5165\u4e86 Optional \u7c7b\uff0cGuava \u901a\u8fc7\u4f7f\u7528\u68c0\u67e5\u7a7a\u503c\u7684\u65b9\u5f0f\u6765\u9632\u6b62\u4ee3\u7801\u6c61\u67d3\uff0c\u5b83\u9f13\u52b1\u7a0b\u5e8f\u5458\u5199\u66f4\u5e72\u51c0\u7684\u4ee3\u7801\u3002\u53d7\u5230Google Guava\u7684\u542f\u53d1\uff0cOptional \u7c7b\u5df2\u7ecf\u6210\u4e3a Java 8 \u7c7b\u5e93\u7684\u4e00\u90e8\u5206\u3002",source:"@site/docs/Java/Optional.md",sourceDirName:"Java",slug:"/Java/Optional",permalink:"/docs/Java/Optional",draft:!1,tags:[],version:"current",sidebarPosition:23,frontMatter:{sidebar_position:23},sidebar:"tutorialSidebar",previous:{title:"Stream API",permalink:"/docs/Java/StreamAPI"},next:{title:"MQ",permalink:"/docs/category/mq"}},p={},u=[],s={toc:u};function m(n){let{components:e,...t}=n;return(0,i.kt)("wrapper",(0,l.Z)({},s,t,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"optional-\u7c7b"},"Optional \u7c7b"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u81ed\u540d\u662d\u8457\u7684\u7a7a\u6307\u9488\u5f02\u5e38\u662f\u5bfc\u81f4 Java \u5e94\u7528\u7a0b\u5e8f\u5931\u8d25\u7684\u6700\u5e38\u89c1\u539f\u56e0\uff0c\u4ee5\u524d\uff0c\u4e3a\u4e86\u89e3\u51b3\u7a7a\u6307\u9488\u5f02\u5e38\uff0cGoogle \u516c\u53f8\u8457\u540d\u7684 Guava \u9879\u76ee\u5f15\u5165\u4e86 Optional \u7c7b\uff0cGuava \u901a\u8fc7\u4f7f\u7528\u68c0\u67e5\u7a7a\u503c\u7684\u65b9\u5f0f\u6765\u9632\u6b62\u4ee3\u7801\u6c61\u67d3\uff0c\u5b83\u9f13\u52b1\u7a0b\u5e8f\u5458\u5199\u66f4\u5e72\u51c0\u7684\u4ee3\u7801\u3002\u53d7\u5230Google Guava\u7684\u542f\u53d1\uff0cOptional \u7c7b\u5df2\u7ecf\u6210\u4e3a Java 8 \u7c7b\u5e93\u7684\u4e00\u90e8\u5206\u3002"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Optional<T>")," \u7c7b( ",(0,i.kt)("inlineCode",{parentName:"li"},"java.util.Optional"),")\u662f\u4e00\u4e2a\u5bb9\u5668\u7c7b\uff0c\u5b83\u53ef\u4ee5\u4fdd\u5b58\u7c7b\u578b T \u7684\u503c\uff0c\u4ee3\u8868\u8fd9\u4e2a\u503c\u5b58\u5728\u3002\u6216\u8005\u4ec5\u4ec5\u4fdd\u5b58 null\uff0c\u8868\u793a\u8fd9\u4e2a\u503c\u4e0d\u5b58\u5728\u3002",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u539f\u6765\u7528 null \u8868\u793a\u4e00\u4e2a\u503c\u4e0d\u5b58\u5728\uff0c\u73b0\u5728 Optional \u53ef\u4ee5\u66f4\u597d\u7684\u8868\u8fbe\u8fd9\u4e2a\u6982\u5ff5\u3002\u5e76\u4e14\u53ef\u4ee5\u907f\u514d\u7a7a\u6307\u9488\u5f02\u5e38\u3002"))),(0,i.kt)("li",{parentName:"ul"},"Optional \u7c7b\u7684 Javadoc \u63cf\u8ff0\u5982\u4e0b:\u8fd9\u662f\u4e00\u4e2a\u53ef\u4ee5\u4e3a null \u7684\u5bb9\u5668\u5bf9\u8c61\u3002\u5982\u679c\u503c\u5b58\u5728\u5219 ",(0,i.kt)("inlineCode",{parentName:"li"},"isPresent()")," \u65b9\u6cd5\u4f1a\u8fd4\u56detrue\uff0c\u8c03\u7528 ",(0,i.kt)("inlineCode",{parentName:"li"},"get()")," \u65b9\u6cd5\u4f1a\u8fd4\u56de\u8be5\u5bf9\u8c61\u3002"),(0,i.kt)("li",{parentName:"ul"},"Optional \u63d0\u4f9b\u5f88\u591a\u6709\u7528\u7684\u65b9\u6cd5\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u4e0d\u7528\u663e\u5f0f\u8fdb\u884c\u7a7a\u503c\u68c0\u6d4b",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u521b\u5efa Optional \u7c7b\u5bf9\u8c61\u7684\u65b9\u6cd5:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Optional.of(T t)"),": \u521b\u5efa\u4e00\u4e2a Optional \u5b9e\u4f8b\uff0ct\u5fc5\u987b\u975e\u7a7a;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Optional.empty()"),": \u521b\u5efa\u4e00\u4e2a\u7a7a\u7684 Optional \u5b9e\u4f8b "),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Optional.ofNullable(T t)"),": t \u53ef\u4ee5\u4e3anull"))),(0,i.kt)("li",{parentName:"ul"},"\u5224\u65ad Optional \u5bb9\u5668\u4e2d\u662f\u5426\u5305\u542b\u5bf9\u8c61:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"boolean isPresent()"),": \u5224\u65ad\u662f\u5426\u5305\u542b\u5bf9\u8c61"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"void ifPresent(Consumer<?super T>consumer)"),": \u5982\u679c\u6709\u503c\uff0c\u5c31\u6267\u884c Consumer \u63a5\u53e3\u7684\u5b9e\u73b0\u4ee3\u7801\uff0c\u5e76\u4e14\u8be5\u503c\u4f1a\u4f5c\u4e3a\u53c2\u6570\u4f20\u7ed9\u5b83\u3002"))),(0,i.kt)("li",{parentName:"ul"},"\u83b7\u53d6Optional\u5bb9\u5668\u7684\u5bf9\u8c61:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"T get()"),": \u5982\u679c\u8c03\u7528\u5bf9\u8c61\u5305\u542b\u503c\uff0c\u8fd4\u56de\u8be5\u503c\uff0c\u5426\u5219\u629b\u5f02\u5e38"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"T orElse(T other)"),": \u5982\u679c\u6709\u503c\u5219\u5c06\u5176\u8fd4\u56de\uff0c\u5426\u5219\u8fd4\u56de\u6307\u5b9a\u7684 other \u5bf9\u8c61\u3002"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"T orElseGet(Supplier<?extends T> other)"),": \u5982\u679c\u6709\u503c\u5219\u5c06\u5176\u8fd4\u56de\uff0c\u5426\u5219\u8fd4\u56de\u7531 Supplier \u63a5\u53e3\u5b9e\u73b0\u63d0\u4f9b\u7684\u5bf9\u8c61 "),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"T orElseThrow(Supplier<?extends X>exceptionSupplier)"),":\u5982\u679c\u6709\u503c\u5219\u5c06\u5176\u8fd4\u56de\uff0c\u5426\u5219\u629b\u51fa\u7531 Supplier \u63a5\u53e3\u5b9e\u73b0\u63d0\u4f9b\u7684\u5f02\u5e38\u3002")))))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'/**\n* Optional\u7c7b\uff1a\u4e3a\u4e86\u5728\u7a0b\u5e8f\u4e2d\u907f\u514d\u51fa\u73b0\u7a7a\u6307\u9488\u5f02\u5e38\u800c\u521b\u5efa\u7684\n*\n* \u5e38\u7528\u65b9\u6cd5\uff1a\n* ofNullable(T t)\n* orElse(T other)\n*\n* @author Lhk\n*/\npublic class OptionalTest {\n    /*\n    \u521b\u5efaOptional\u7c7b\u5bf9\u8c61\u7684\u65b9\u6cd5\uff1a\n    Optional.of(T t) : \u521b\u5efa\u4e00\u4e2a Optional \u5b9e\u4f8b\uff0ct\u5fc5\u987b\u975e\u7a7a\n    Optional.empty() : \u521b\u5efa\u4e00\u4e2a\u7a7a\u7684 Optional \u5b9e\u4f8b\n    Optional.ofNullable(T t)\uff1at\u53ef\u4ee5\u4e3anull\n    */\n    @Test\n    public void test1(){\n        Girl girl = new Girl();\n        //of(T t):\u4fdd\u8bc1t\u975e\u7a7a\n        Optional<Girl> optionalGirl = Optional.of(girl);\n    }\n    \n    @Test\n    public void test2(){\n        Girl girl = new Girl();\n        girl=null;\n        //ofNullable(T t):t\u53ef\u4ee5\u4e3anull\n        Optional<Girl> optionalGirl = Optional.ofNullable(girl);\n        // orElse(T other) \uff1a\u5982\u679c\u5f53\u524d\u7684Optional\u5185\u5c01\u88c5\u6709\u503c\u5219\u5c06\u5176\u8fd4\u56de\uff0c\u5982\u679c\u4e3anull\u8fd4\u56de\u6307\u5b9a\u7684other\u5bf9\u8c61\u3002\n        Girl girl1 = optionalGirl.orElse(new Girl("\u5c0f\u7231"));\n        System.out.println(girl1);\n    }\n\n    //\u8be5\u65b9\u6cd5\u5b58\u5728\u7a7a\u6307\u9488\u5f02\u5e38\n    public String getGirlName(Boy boy){\n        return boy.getGirl().getName();\n    }\n\n    @Test\n    public void test3(){\n        Boy boy = new Boy();\n        getGirlName(boy);//java.lang.NullPointerException\n    }\n\n    //\u4f18\u5316\u540e\u7684getGirlName\n    public String getGirlName1(Boy boy){\n        if (boy!=null){\n            Girl girl = boy.getGirl();\n            if (girl!=null){\n                return girl.getName();\n            }\n        }\n        return null;\n    }\n\n    @Test\n    public void test4(){\n        Boy boy = new Boy();\n        boy=null;\n        String girlName1 = getGirlName1(boy);\n        System.out.println(girlName1);\n    }\n\n    //\u4f7f\u7528Optional\u7c7b\u7684getGirlName\n    public String getGirlName2(Boy boy){\n        Optional<Boy> boyOptional = Optional.ofNullable(boy);\n        Boy boy1 = boyOptional.orElse(new Boy(new Girl("\u5c0f\u82b1")));\n        Girl girl = boy1.getGirl();\n        Optional<Girl> optionalGirl = Optional.ofNullable(girl);\n        Girl girl1 = optionalGirl.orElse(new Girl("\u5c0f\u5c0f"));\n        return girl1.getName();\n    }\n\n    @Test\n    public void test5(){\n        Boy boy = new Boy();\n        boy =null;\n        boy=new Boy(new Girl("\u5c0f\u971e"));\n        String name = getGirlName2(boy);\n        System.out.println(name);\n    }\n}\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'/**\n* \u5e38\u7528\u65b9\u6cd5\u6d4b\u8bd5\n* @author Lhk\n*/\npublic class OptionalTest1 {\n\n    @Test\n    public void test1(){\n        //\u5b9e\u4f8b\u5316Optional\u5bf9\u8c61\n        Optional<Object> emptyop = Optional.empty();\n        if (!emptyop.isPresent()){//\u5224\u65adOptional\u5bf9\u8c61\u4e2d\u662f\u5426\u5305\u542b\u6570\u636e,\u6709\u6570\u636e\u4e3atrue\n            System.out.println("\u6570\u636e\u4e3a\u7a7a");\n        }\n        System.out.println(emptyop.isPresent());//false\n        System.out.println(emptyop);\n        //get():\u8fd4\u56deOptional\u5c01\u88c5\u7684\u6570\u636e\uff0c\u5fc5\u987b\u4fdd\u8bc1Optional\u5bf9\u8c61\u5185\u6709\u6570\u636e\uff0c\u5426\u5219\u62a5\u9519\n        // System.out.println(emptyop.get());\n    }\n\n    @Test\n    public void test2(){\n        String str="lhk";\n        //of(T t):\u5c01\u88c5\u6570\u636et\u5b9e\u4f8b\u5316Optional\u5bf9\u8c61\uff0c\u53c2\u6570t\u5fc5\u987b\u975e\u7a7a\uff0c\u5426\u5219\u62a5\u9519\n        Optional<String> op = Optional.of(str);\n        //\u901a\u5e38of(T t)\u4e0eget()\u642d\u914d\u4f7f\u7528\uff0c\u7528\u4e8e\u83b7\u53d6Optional\u5bf9\u8c61\u5185\u5c01\u88c5\u7684\u6570\u636evalue\n        String s = op.get();\n        System.out.println(s);\n    }\n\n    @Test\n    public void test3(){\n        // String str="hello";\n        String str=null;\n        //ofNullable(T t):\u5c01\u88c5\u6570\u636et\u5b9e\u4f8b\u5316Optional\u5bf9\u8c61\u5185\u90e8\u7684value\uff0c\u4e0d\u8981\u6c42t\u975e\u7a7a\n        Optional<String> stringOptional = Optional.ofNullable(str);\n        //orElse(T t1):\u82e5Optional\u5bf9\u8c61\u5185\u90e8\u7684value\u503c\u4e3a\u7a7a\uff0c\u5219\u8fd4\u56det1,\u5426\u5219\u8fd4\u56deOptional\u5bf9\u8c61\u5185\u90e8\u7684value\n        String str1 = stringOptional.orElse("hi");\n        System.out.println(str1);\n    }\n}\n')))}m.isMDXComponent=!0}}]);